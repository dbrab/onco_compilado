"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[383],{8383:(R,S,n)=>{n.r(S),n.d(S,{LocationSampleModule:()=>P});var v=n(9808),g=n(325),d=n(3075),L=n(6087),r=n(2986),p=n(4850),y=n(303),a=n(5e3),b=n(520),h=n(591),m=n(2340),C=n(7261),f=n(189);let A=(()=>{class i{constructor(t,o,e){this.http=t,this.snackBar=o,this.ubicationService=e,this.dataOptionsForms$=new h.X(null),this.locationSampleEditSubject$=new h.X(null),this.urlUtils="src/app/shared/utils/data/",this.resultSubject$=new h.X(null)}get optionsForms$(){return this.dataOptionsForms$}get resultItems$(){return this.resultSubject$}setItems(t){this.resultSubject$.next(t)}get locationSampleOnEdit(){return this.locationSampleEditSubject$}setLocationSampleOnEdit(t){this.locationSampleEditSubject$.next(t)}storeLocationSample(t){return this.http.post(`${m.N.API}locations_samples`,t).pipe((0,p.U)(o=>(this.getLocationSamples(1,10,"","desc").pipe((0,r.q)(1)).subscribe(),this.openSnackBar("Se cre\xf3 correctamente","success-snack-bar"),o.data)))}updateLocationSample(t){const o=t.id;return t._method="put",this.http.post(`${m.N.API}locations_samples/${o}`,t).pipe((0,p.U)(e=>(this.getLocationSamples(1,10,"","desc").pipe((0,r.q)(1)).subscribe(),this.openSnackBar("Actualizado correctamente","success-snack-bar"),e.data)))}deleteLocationSample(t){return this.http.delete(`${m.N.API}locations_samples/${t}`).pipe((0,p.U)(o=>(this.getLocationSamples(1,10,"","desc").pipe((0,r.q)(1)).subscribe(),this.openSnackBar("Eliminado correctamente","success-snack-bar"),o.data)))}getLocationSample(t){return this.http.get(`${m.N.API}locations_samples/${t}`).pipe((0,p.U)(o=>o.data))}getLocationSamples(t=1,o=20,e="",s="desc"){return this.http.get(`${m.N.API}locations_samples`,{params:(new b.LE).set("page",t.toString()).set("filter",e).set("sort",s).set("per_page",o.toString())}).pipe((0,p.U)(c=>(this.setLocationSampleOnEdit(null),this.setItems(c),c)))}openSnackBar(t,o,e=""){this.snackBar.open(t,e,{duration:2e3,horizontalPosition:"center",verticalPosition:"top",panelClass:o})}}return i.\u0275fac=function(t){return new(t||i)(a.LFG(b.eN),a.LFG(C.ux),a.LFG(f._))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var I=n(8966),T=n(3355),u=n(9224),$=n(7423),Z=n(5245),F=n(953),M=n(3160);const j=function(){return[20,50,100]},B=[{path:"",component:(()=>{class i{constructor(t,o,e){this.locationSampleService=t,this.dialog=o,this.typeLocationService=e,this.columns=[{title:"C\xf3digo",col:"code"},{title:"Tipo",col:"type_location"},{title:"Cant.Racks",col:"racks"},{title:"Cant.Cajas x Rack",col:"boxes"},{title:"Cant.Posiciones x Caja",col:"positions"},{title:"Descripci\xf3n",col:"description"},{title:"Marca/Modelo",col:"brand_model"},{title:"Capacidad",col:"capacity"}],this.pageDefault=1,this.perPage=10,this.orden="desc",this.filter="",this.result=this.locationSampleService.resultItems$}ngOnInit(){this.getLocationSamples(this.pageDefault,this.perPage,this.filter,this.orden)}getTypeLocations(){this.typeLocationService.getTypeLocationSamples(1,1e3).pipe((0,r.q)(1)).subscribe(t=>{this.typeLocationsOptions=t.data.data.map(o=>({name:o.name,value:o.id}))})}paginatorChange(t){this.getLocationSamples(t.pageIndex+1,t.pageSize)}getLocationSamples(t,o,e,s){this.subscroption=this.locationSampleService.getLocationSamples(t,o,e,s).subscribe(c=>this.loadData())}loadData(){this.dataSource=this.result.pipe((0,p.U)(t=>t.data.data.map(e=>{var s;return{id:e.id,type_location_id:e.type_location_id,code:e.code,racks:e.racks,boxes:e.boxes,positions:e.positions,description:e.description,brand_model:e.brand_model,capacity:e.capacity,type_location:null===(s=e.type_location)||void 0===s?void 0:s.name}}))),this.totalResut=this.result.pipe((0,p.U)(t=>t.data.total)),this.getTypeLocations()}search(t){this.getLocationSamples(this.pageDefault,this.perPage,t,this.orden)}deleteItem(t){return this.locationSampleService.deleteLocationSample(t)}itemAction(t){"delete"===t.action&&this.deleteItem(t.element.id).pipe((0,r.q)(1)).subscribe(),"edit"===t.action&&this.openDialog("Edita Almac\xe9n de Muestras",t.element)}openDialog(t="Agrega Almac\xe9n de Muestras",o){const e={title:t,data:this.setFields(o)};return this.dialog.open(y.Q,{width:"550px",data:e}).afterClosed().subscribe(c=>{c&&(c.id?this.updateLocationSample(c):this.storeLocationSample(c))})}updateLocationSample(t){this.locationSampleService.updateLocationSample(t).pipe((0,r.q)(1)).subscribe()}storeLocationSample(t){this.locationSampleService.storeLocationSample(t).pipe((0,r.q)(1)).subscribe(o=>{})}setFields(t){return[{nameControl:"id",type:"hidden",value:null==t?void 0:t.id,label:"Id"},{nameControl:"code",type:"text",value:null==t?void 0:t.code,validators:[d.kI.required],label:"C\xf3digo",class:"mvd-col1--1"},{nameControl:"type_location_id",type:"select",options:this.typeLocationsOptions,value:null==t?void 0:t.type_location_id,validators:[d.kI.required],label:"Tipo de Almac\xe9n",class:"mvd-col1--1"},{nameControl:"racks",type:"text",value:null==t?void 0:t.racks,validators:[d.kI.required],label:"Cantidad de Racks",class:"mvd-col1--1"},{nameControl:"boxes",type:"text",value:null==t?void 0:t.boxes,validators:[d.kI.required],label:"Cantidad de Cajas x Rack",class:"mvd-col1--1"},{nameControl:"positions",type:"text",value:null==t?void 0:t.positions,validators:[d.kI.required],label:"Cantidad de Posiciones x Caja",class:"mvd-col1--1"},{nameControl:"description",type:"text",value:null==t?void 0:t.description,label:"Descripci\xf3n",class:"mvd-col1--1"},{nameControl:"brand_model",type:"text",value:null==t?void 0:t.brand_model,label:"Marca/Modelo",class:"mvd-col1--1"},{nameControl:"capacity",type:"text",value:null==t?void 0:t.capacity,label:"Capacidad",class:"mvd-col1--1"}]}ngOnDestroy(){this.subscroption.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(a.Y36(A),a.Y36(I.uw),a.Y36(T.H))},i.\u0275cmp=a.Xpm({type:i,selectors:[["mvd-location-sample"]],viewQuery:function(t,o){if(1&t&&a.Gf(L.NW,7),2&t){let e;a.iGM(e=a.CRH())&&(o.paginator=e.first)}},decls:19,vars:11,consts:[[1,"card","mat-elevation-z16","animate__animated","animate__slideInRight"],[1,"actions"],["mat-flat-button","","color","primary",3,"click"],[1,"material-icons-round"],[3,"noteFilterBy","changeSearch"],[3,"columns","dataSource","actionChange"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],[1,"border"]],template:function(t,o){1&t&&(a.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),a._uU(3,"Almacenes"),a.qZA(),a.TgZ(4,"mat-card-subtitle"),a._uU(5,"Administrar Almacenes de Muestras"),a.qZA(),a.TgZ(6,"div",1)(7,"button",2),a.NdJ("click",function(){return o.openDialog()}),a.TgZ(8,"mat-icon",3),a._uU(9,"add"),a.qZA(),a.TgZ(10,"span"),a._uU(11,"Crear"),a.qZA()()(),a.TgZ(12,"mvd-input-search",4),a.NdJ("changeSearch",function(s){return o.search(s)}),a.qZA()(),a.TgZ(13,"mat-card-content")(14,"mvd-data-table",5),a.NdJ("actionChange",function(s){return o.itemAction(s)}),a.ALo(15,"async"),a.qZA(),a.TgZ(16,"mat-paginator",6),a.NdJ("page",function(s){return o.paginatorChange(s)}),a.ALo(17,"async"),a.qZA()(),a._UZ(18,"span",7),a.qZA()),2&t&&(a.xp6(12),a.Q6J("noteFilterBy","Filtra por Nombre"),a.xp6(2),a.Q6J("columns",o.columns)("dataSource",a.lcZ(15,6,o.dataSource)),a.xp6(2),a.Q6J("length",a.lcZ(17,8,o.totalResut))("pageSize",o.perPage)("pageSizeOptions",a.DdM(10,j)))},directives:[u.a8,u.dk,u.n5,u.$j,$.lW,Z.Hw,F.V,u.dn,M.Q,L.NW],pipes:[v.Ov],styles:[""]}),i})()}];let D=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[[g.Bz.forChild(B)],g.Bz]}),i})();var N=n(8203);let P=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[[v.ez,D,N.m]]}),i})()}}]);