"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[303],{303:(K,C,a)=>{a.d(C,{Q:()=>z});var p=a(8966),n=a(5e3),_=a(9224),x=a(7423),v=a(5245),f=a(9808),l=a(3075),s=a(508),h=a(3170),Z=a(5439),T=a.n(Z),d=a(277),g=a(7322),F=a(7531),b=a(7446),M=a(4107),u=a(6856),O=a(7663),N=a(2946);function Q(t,r){if(1&t&&(n.TgZ(0,"mat-error"),n._uU(1),n.qZA()),2&t){const o=n.oxw(3);n.xp6(1),n.Oqu(o.getErrorMessage("notIncludedIn"))}}function y(t,r){if(1&t&&(n.TgZ(0,"mat-error"),n._uU(1),n.qZA()),2&t){const o=n.oxw(3);n.xp6(1),n.Oqu(o.getErrorMessage("email"))}}function J(t,r){if(1&t&&(n.TgZ(0,"mat-error"),n._uU(1),n.qZA()),2&t){const o=n.oxw(3);n.xp6(1),n.Oqu(o.getErrorMessage("required"))}}function I(t,r){if(1&t&&(n.TgZ(0,"mat-error"),n._uU(1),n.qZA()),2&t){const o=n.oxw(3);n.xp6(1),n.Oqu(o.getErrorMessage("date"))}}function D(t,r){if(1&t&&(n.TgZ(0,"mat-error"),n._uU(1),n.qZA()),2&t){const o=n.oxw(3);n.xp6(1),n.Oqu(o.getErrorMessage("number"))}}function w(t,r){if(1&t&&(n.ynx(0),n.TgZ(1,"mat-form-field",6)(2,"mat-label"),n._uU(3),n.qZA(),n._UZ(4,"input",7),n.YNc(5,Q,2,1,"mat-error",2),n.YNc(6,y,2,1,"mat-error",2),n.YNc(7,J,2,1,"mat-error",2),n.YNc(8,I,2,1,"mat-error",2),n.YNc(9,D,2,1,"mat-error",2),n.qZA(),n.BQk()),2&t){const o=n.oxw().$implicit,e=n.oxw();n.xp6(1),n.Tol(null==o?null:o.class),n.xp6(2),n.Oqu(o.label),n.xp6(1),n.Q6J("formControlName",o.nameControl)("placeholder",o.label)("type",o.type),n.xp6(1),n.Q6J("ngIf",null==e.form.controls[o.nameControl].errors?null:e.form.controls[o.nameControl].errors.notIncludedIn),n.xp6(1),n.Q6J("ngIf",null==e.form.controls[o.nameControl].errors?null:e.form.controls[o.nameControl].errors.email),n.xp6(1),n.Q6J("ngIf",null==e.form.controls[o.nameControl].errors?null:e.form.controls[o.nameControl].errors.required),n.xp6(1),n.Q6J("ngIf",null==e.form.controls[o.nameControl].errors?null:e.form.controls[o.nameControl].errors.date),n.xp6(1),n.Q6J("ngIf",null==e.form.controls[o.nameControl].errors?null:e.form.controls[o.nameControl].errors.number)}}function A(t,r){if(1&t&&(n.ynx(0),n.TgZ(1,"mat-checkbox",8),n._uU(2),n.qZA(),n.BQk()),2&t){const o=n.oxw().$implicit;n.xp6(1),n.Tol(null==o?null:o.class),n.Q6J("formControlName",o.nameControl),n.xp6(1),n.Oqu(o.label)}}function q(t,r){if(1&t&&(n.TgZ(0,"mat-option",12),n._uU(1),n.qZA()),2&t){const o=r.$implicit;n.Q6J("value",o.value),n.xp6(1),n.hij(" ",o.name," ")}}function P(t,r){if(1&t&&(n.ynx(0),n.TgZ(1,"mat-form-field",6)(2,"mat-label"),n._uU(3),n.qZA(),n.TgZ(4,"mat-select",9)(5,"mat-option",10),n._uU(6," Selacciona... "),n.qZA(),n.YNc(7,q,2,2,"mat-option",11),n.qZA()(),n.BQk()),2&t){const o=n.oxw().$implicit;n.xp6(1),n.Tol(o.class),n.xp6(2),n.Oqu(o.label),n.xp6(1),n.Q6J("placeholder",o.label)("formControlName",o.nameControl),n.xp6(3),n.Q6J("ngForOf",o.options)}}function U(t,r){if(1&t&&(n.TgZ(0,"mat-error"),n._uU(1),n.qZA()),2&t){const o=n.oxw(3);n.xp6(1),n.Oqu(o.getErrorMessage("date"))}}function Y(t,r){if(1&t){const o=n.EpF();n.ynx(0),n.TgZ(1,"mat-form-field",13)(2,"mat-label"),n._uU(3),n.qZA(),n.TgZ(4,"input",14),n.NdJ("click",function(){return n.CHM(o),n.MAs(7).open()})("dateChange",function(i){n.CHM(o);const m=n.oxw().$implicit;return n.oxw().formatDate(i,m.nameControl)}),n.qZA(),n._UZ(5,"mat-datepicker-toggle",15)(6,"mat-datepicker",16,17),n.YNc(8,U,2,1,"mat-error",2),n.qZA(),n.BQk()}if(2&t){const o=n.MAs(7),e=n.oxw().$implicit,i=n.oxw();n.xp6(3),n.Oqu(e.label),n.xp6(1),n.Q6J("formControlName",e.nameControl)("placeholder",e.label)("matDatepicker",o),n.xp6(1),n.Q6J("for",o),n.xp6(3),n.Q6J("ngIf",null==i.form.controls[e.nameControl].errors?null:i.form.controls[e.nameControl].errors.date)}}function k(t,r){if(1&t&&(n.TgZ(0,"mat-error"),n._uU(1),n.qZA()),2&t){const o=n.oxw(3);n.xp6(1),n.Oqu(o.getErrorMessage("number"))}}function E(t,r){if(1&t&&(n.ynx(0),n.TgZ(1,"mat-form-field",13)(2,"mat-label"),n._uU(3),n.qZA(),n._UZ(4,"input",18),n.YNc(5,k,2,1,"mat-error",2),n.qZA(),n.BQk()),2&t){const o=n.oxw().$implicit,e=n.oxw();n.xp6(3),n.Oqu(o.label),n.xp6(1),n.Q6J("formControlName",o.nameControl)("placeholder",o.label),n.xp6(1),n.Q6J("ngIf",null==e.form.controls[o.nameControl].errors?null:e.form.controls[o.nameControl].errors.number)}}function L(t,r){if(1&t&&(n.ynx(0),n.TgZ(1,"mat-form-field",19)(2,"mat-label"),n._uU(3),n.qZA(),n._UZ(4,"textarea",20),n.qZA(),n.BQk()),2&t){const o=n.oxw().$implicit;n.xp6(3),n.Oqu(o.label),n.xp6(1),n.Q6J("formControlName",o.nameControl)("placeholder",o.label)}}function R(t,r){if(1&t&&(n.ynx(0),n._UZ(1,"quill-editor",21),n.BQk()),2&t){const o=n.oxw().$implicit,e=n.oxw();n.xp6(1),n.Q6J("placeholder",o.label)("modules",e.configEditor.modules)("formControlName",o.nameControl)}}function B(t,r){if(1&t&&n._UZ(0,"img",29),2&t){const o=n.oxw(3);n.Q6J("src",o.imgPreview,n.LSH)}}function H(t,r){1&t&&n._UZ(0,"img",29),2&t&&n.Q6J("src","../../../assets/images/no-image.svg",n.LSH)}function $(t,r){if(1&t&&(n.TgZ(0,"span",30),n._uU(1),n.qZA()),2&t){const o=n.oxw(3);n.xp6(1),n.Oqu(o.messageUpload)}}function V(t,r){if(1&t){const o=n.EpF();n.ynx(0),n.TgZ(1,"div",22)(2,"div",23)(3,"label",24)(4,"div",25),n.YNc(5,B,1,1,"img",26),n.YNc(6,H,1,1,"img",26),n.qZA()(),n.TgZ(7,"input",27),n.NdJ("change",function(i){return n.CHM(o),n.oxw(2).uploadImage(i)}),n.qZA(),n.YNc(8,$,2,1,"span",28),n.qZA()(),n.BQk()}if(2&t){const o=n.oxw(2);n.xp6(5),n.Q6J("ngIf",o.imgPreview),n.xp6(1),n.Q6J("ngIf",!o.imgPreview),n.xp6(2),n.Q6J("ngIf",o.messageUpload)}}function S(t,r){if(1&t&&(n.ynx(0),n.YNc(1,w,10,11,"ng-container",2),n.YNc(2,A,3,4,"ng-container",2),n.YNc(3,P,8,6,"ng-container",2),n.YNc(4,Y,9,6,"ng-container",2),n.YNc(5,E,6,4,"ng-container",2),n.YNc(6,L,5,3,"ng-container",2),n.YNc(7,R,2,3,"ng-container",2),n.YNc(8,V,9,3,"ng-container",2),n.BQk()),2&t){const o=r.$implicit;n.xp6(1),n.Q6J("ngIf","text"===o.type||"time"===o.type),n.xp6(1),n.Q6J("ngIf","checkbox"===o.type),n.xp6(1),n.Q6J("ngIf","select"===o.type),n.xp6(1),n.Q6J("ngIf","date"===o.type),n.xp6(1),n.Q6J("ngIf","number"===o.type),n.xp6(1),n.Q6J("ngIf","textarea"===o.type),n.xp6(1),n.Q6J("ngIf","textareaEditor"===o.type),n.xp6(1),n.Q6J("ngIf","image"===o.type)}}function G(t,r){if(1&t){const o=n.EpF();n.ynx(0),n.TgZ(1,"mvd-form-locations",31),n.NdJ("changeForm",function(i){return n.CHM(o),n.oxw().setFormLocation(i)}),n.qZA(),n.BQk()}if(2&t){const o=n.oxw();n.xp6(1),n.Q6J("data",o.locationFieldsData)}}let W=(()=>{class t{constructor(o,e){this.fb=o,this.dialog=e,this.fields=null,this.value=new n.vpe,this.messageUpload=null,this.dataLocation=null,this.neighborhood_id=null,this.formLocation=null,this.formValid=!1,this.configEditor={modules:{syntax:!1,toolbar:[["bold","italic","underline","strike"],[{color:[]}],[{align:[]}],[{header:[1,2,3,4,5,6,!1]}],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}]]}},this.form=this.fb.group({})}ngOnInit(){this.buildForm()}changeForm(o){this.neighborhood_id&&this.dataLocation?o.neighborhood_id=this.neighborhood_id:this.form.setErrors({invalid:!0}),this.value.emit(o)}buildForm(){this.fields&&this.fields.map(e=>{var i;return"image"===e.type&&e.value&&(this.imgPreview=e.value),this.form.addControl(e.nameControl,this.fb.control(null!==(i=e.value)&&void 0!==i?i:e.sugerido,e.validators))})}formatDate(o,e){let i=o.value;this.form.get(e).setValue(T()(i).format("YYYY-MM-DD HH:mm:ss"))}uploadImage(o){var e;if(null===(e=null==o?void 0:o.target)||void 0===e?void 0:e.files[0]){const c=o.target.files[0];if(null==c.type.match(/image\/*/))return this.messageUpload="No es una im\xe1gen",this.imgPreview=null,void this.form.get("image").patchValue(null);this.form.get("image").patchValue(c),this.messageUpload=null;var m=new FileReader;m.readAsDataURL(c),m.onload=on=>{this.imgPreview=m.result}}else{const c=this.form.get("image").value;c?this.imgPreview=c:(this.imgPreview=null,this.form.get("image").patchValue(null))}}setFormLocation(o){this.formLocation=o,this.form.get("neighborhood_id")?this.form.get("neighborhood_id").setValue(o.get("neighborhood_id").value):this.form.addControl("neighborhood_id",this.fb.control(o.get("neighborhood_id").value,l.kI.required))}setDataLocation(){}getErrorMessage(o){let e;switch(o){case"notIncludedIn":e="El email ya existe";break;case"email":e="Email no v\xe1lido";break;case"date":e="Formato de fecha inv\xe1lido";break;case"number":e="Solo n\xfameros";break;case"required":e="Campo requerido";break;default:e="No v\xe1lido"}return e}}return t.\u0275fac=function(o){return new(o||t)(n.Y36(l.qu),n.Y36(p.uw))},t.\u0275cmp=n.Xpm({type:t,selectors:[["mvd-dinamic-form"]],inputs:{fields:"fields",locationFieldsData:"locationFieldsData",userEdit:"userEdit"},outputs:{value:"value"},features:[n._Bn([{provide:s._A,useClass:h.t7,deps:[s.Ad]},{provide:s.sG,useValue:h.$o}])],decls:8,vars:4,consts:[["fxFlex","100","fxLayout","row wrap",3,"formGroup"],[4,"ngFor","ngForOf"],[4,"ngIf"],["fxFlex","100","fxLayout","row","fxLayoutAlign","between",1,"btn-actions"],["fxFlex","33.3"],["fxFlex","33.3","mat-flat-button","","type","submit","color","primary",1,"",3,"disabled","click"],["appearance","outline"],["matInput","","autocomplete","off",3,"formControlName","placeholder","type"],["color","primary",3,"formControlName","value"],[3,"placeholder","formControlName"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["appearance","outline",1,""],["matInput","","autocomplete","off",3,"formControlName","placeholder","matDatepicker","click","dateChange"],["matSuffix","",3,"for"],["startView","year"],["picker",""],["type","number","matInput","","autocomplete","off",3,"formControlName","placeholder"],["appearance","outline",1,"mvd-col1--1"],["matInput","",1,"textarea",3,"formControlName","placeholder"],["theme","snow",1,"mvd-col1--1",2,"min-height","100px",3,"placeholder","modules","formControlName"],[1,"content-image"],[1,"upload"],["for","file"],[1,"image-input"],["alt","Subir Imagen",3,"src",4,"ngIf"],["id","file","hidden","","type","file",3,"change"],["style","color:red;",4,"ngIf"],["alt","Subir Imagen",3,"src"],[2,"color","red"],[1,"mvd-col1--1",3,"data","changeForm"]],template:function(o,e){1&o&&(n.TgZ(0,"form",0),n.YNc(1,S,9,8,"ng-container",1),n.YNc(2,G,2,1,"ng-container",2),n.TgZ(3,"div",3),n._UZ(4,"span",4)(5,"span",4),n.TgZ(6,"button",5),n.NdJ("click",function(){return e.changeForm(e.form.value)}),n._uU(7,"Guardar"),n.qZA()()()),2&o&&(n.Q6J("formGroup",e.form),n.xp6(1),n.Q6J("ngForOf",e.fields),n.xp6(1),n.Q6J("ngIf",e.locationFieldsData),n.xp6(4),n.Q6J("disabled",!e.form.valid))},directives:[l._Y,l.JL,d.yH,d.xw,l.sg,f.sg,f.O5,g.KE,g.hX,F.Nt,l.Fj,l.JJ,l.u,g.TO,b.oG,M.gD,s.ey,u.hl,u.nW,g.R9,u.Mq,l.wV,O.g6,N.Z,d.Wh,x.lW],styles:["form[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));grid-gap:1rem;gap:1rem;align-items:flex-start;padding:1rem!important}form[_ngcontent-%COMP%]   .content-color[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 50px;grid-column-gap:3px;column-gap:3px;cursor:pointer}form[_ngcontent-%COMP%]   .content-color[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{cursor:pointer}form[_ngcontent-%COMP%]   .content-color[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:50px!important;height:50px!important;font-size:50px!important;margin-top:4px;color:#000}form[_ngcontent-%COMP%]   .content-select-ico[_ngcontent-%COMP%]{height:50px;display:grid;align-content:center}form[_ngcontent-%COMP%]   .content-select-ico[_ngcontent-%COMP%]   .btn-select-ico[_ngcontent-%COMP%]{border-radius:10px!important;margin-top:5px!important;height:50px!important}form[_ngcontent-%COMP%]   .content-select-ico[_ngcontent-%COMP%]   .btn-select-ico[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:30px;width:30px;height:30px}form[_ngcontent-%COMP%]   .content-image[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-row:1/3;grid-column:1/2;align-items:center;grid-gap:1rem;gap:1rem;border-radius:10px;background-color:var(--background-gral);padding:1rem}form[_ngcontent-%COMP%]   .image-input[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-position:center;border-radius:5px;object-fit:cover;cursor:pointer!important;width:100%}form[_ngcontent-%COMP%]   .textarea[_ngcontent-%COMP%]{min-height:100px}"]}),t})();function j(t,r){if(1&t&&(n.TgZ(0,"mat-card-title"),n._uU(1),n.qZA()),2&t){const o=n.oxw();n.xp6(1),n.Oqu(o.data.title)}}function X(t,r){if(1&t){const o=n.EpF();n.TgZ(0,"mvd-dinamic-form",4),n.NdJ("value",function(i){return n.CHM(o),n.oxw().action(i)}),n.qZA()}if(2&t){const o=n.oxw();n.Q6J("fields",o.data.data)}}let z=(()=>{class t{constructor(o,e){this.dialogRef=o,this.data=e}ngOnInit(){}onNoClick(){this.dialogRef.close()}action(o){this.dialogRef.close(o)}}return t.\u0275fac=function(o){return new(o||t)(n.Y36(p.so),n.Y36(p.WI))},t.\u0275cmp=n.Xpm({type:t,selectors:[["ng-component"]],decls:7,vars:2,consts:[[1,""],["mat-button","",1,"btn-close-modal",3,"click"],[4,"ngIf"],[3,"fields","value",4,"ngIf"],[3,"fields","value"]],template:function(o,e){1&o&&(n.TgZ(0,"mat-card",0)(1,"button",1),n.NdJ("click",function(){return e.onNoClick()}),n.TgZ(2,"mat-icon"),n._uU(3,"close"),n.qZA()(),n.TgZ(4,"mat-card-header"),n.YNc(5,j,2,1,"mat-card-title",2),n.qZA(),n.YNc(6,X,1,1,"mvd-dinamic-form",3),n.qZA()),2&o&&(n.xp6(5),n.Q6J("ngIf",e.data.title),n.xp6(1),n.Q6J("ngIf",e.data.data))},directives:[_.a8,x.lW,v.Hw,_.dk,f.O5,_.n5,W],styles:[".mat-card[_ngcontent-%COMP%]{box-shadow:none!important;margin:0!important;padding-left:16px!important}"]}),t})()}}]);