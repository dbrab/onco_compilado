"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[626],{2626:(M,h,i)=>{i.r(h),i.d(h,{ProfileModule:()=>J});var t=i(9808),v=i(325),c=i(3075),f=i(7e3),e=i(5e3),g=i(6621),u=i(4850),_=i(2340),E=i(520),b=i(7261);let P=(()=>{class n{constructor(a,l){this.http=a,this.snackBar=l}updatePassword(a){return this.http.put(`${_.N.API}profile/password`,a).pipe((0,u.U)(l=>(this.openSnackBar("Actualizado correctamente","success-snack-bar"),l.data)))}openSnackBar(a,l,d=""){this.snackBar.open(a,d,{duration:2e3,horizontalPosition:"center",verticalPosition:"top",panelClass:l})}}return n.\u0275fac=function(a){return new(a||n)(e.LFG(E.eN),e.LFG(b.ux))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Z=i(8966),C=i(5543),x=i(9224),r=i(7423),m=i(277),s=i(7322),o=i(7531),T=i(5245),I=i(7510);function y(n,p){if(1&n&&(e.TgZ(0,"mat-card-subtitle"),e._uU(1),e.qZA()),2&n){const a=p.ngIf;e.xp6(1),e.lnq(" Usuario: ",a.id," / Nombre: ",a.name," ",a.last_name," ")}}function U(n,p){if(1&n){const a=e.EpF();e.TgZ(0,"mat-card",1)(1,"mat-card-header")(2,"mat-card-title"),e._uU(3,"Perfil"),e.qZA(),e.YNc(4,y,2,3,"mat-card-subtitle",2),e.TgZ(5,"div",3)(6,"button",4),e.NdJ("click",function(){return e.CHM(a),e.oxw().back()}),e._uU(7,"Volver"),e.qZA(),e.TgZ(8,"button",5),e.NdJ("click",function(){return e.CHM(a),e.oxw().onSubmit()}),e._uU(9,"Guardar"),e.qZA()()(),e.TgZ(10,"mat-card-content")(11,"form",6)(12,"mat-form-field",7)(13,"mat-label"),e._uU(14,"Nombre"),e.qZA(),e._UZ(15,"input",8),e.qZA(),e.TgZ(16,"mat-form-field",7)(17,"mat-label"),e._uU(18,"Apellido"),e.qZA(),e._UZ(19,"input",9),e.qZA(),e.TgZ(20,"mat-form-field",7)(21,"mat-label"),e._uU(22,"Email"),e.qZA(),e._UZ(23,"input",10),e.qZA(),e.ynx(24,11),e.TgZ(25,"p",12),e._uU(26,"Actualizar Contrase\xf1a"),e.qZA(),e.TgZ(27,"mat-form-field",13)(28,"mat-label"),e._uU(29,"Nueva Contrase\xf1a"),e.qZA(),e._UZ(30,"input",14),e.TgZ(31,"button",15),e.NdJ("click",function(){e.CHM(a);const d=e.oxw();return d.hide=!d.hide}),e.TgZ(32,"mat-icon"),e._uU(33),e.qZA()()(),e._UZ(34,"span",16),e.TgZ(35,"mat-form-field",13)(36,"mat-label"),e._uU(37,"Confirmar contrase\xf1a"),e.qZA(),e._UZ(38,"input",17),e.TgZ(39,"button",15),e.NdJ("click",function(){e.CHM(a);const d=e.oxw();return d.hide2=!d.hide2}),e.TgZ(40,"mat-icon"),e._uU(41),e.qZA()()(),e._UZ(42,"span",16)(43,"mvd-errors-messages",18),e.BQk(),e.qZA()(),e._UZ(44,"span",19),e.qZA()}if(2&n){const a=e.oxw();e.xp6(4),e.Q6J("ngIf",a.userEdit),e.xp6(4),e.Q6J("disabled",!a.formPass.valid||""===a.password.value),e.xp6(3),e.Q6J("formGroup",a.form),e.xp6(13),e.Q6J("formGroup",a.formPass),e.xp6(6),e.Q6J("type",a.hide?"password":"text"),e.xp6(1),e.uIk("aria-label","Hide password")("aria-pressed",a.hide),e.xp6(2),e.Oqu(a.hide?"visibility_off":"visibility"),e.xp6(5),e.Q6J("type",a.hide2?"password":"text"),e.xp6(1),e.uIk("aria-label","Hide password")("aria-pressed",a.hide),e.xp6(2),e.Oqu(a.hide?"visibility_off":"visibility"),e.xp6(2),e.Q6J("campo",a.formPass.errors)("name","Contrase\xf1a")}}const N=[{path:":id",component:(()=>{class n{constructor(a,l,d,k,F,R,q){this.userService=a,this.profileService=l,this.activatedRoute=d,this.fb=k,this.router=F,this.dialog=R,this.roleService=q,this.hide=!0,this.hide2=!0,this.changes=!1,this.subscriptions=[],this.formPass=this.fb.group({password:[""],confirmPassword:[""]},{validators:[n=>n.controls.password.value!==n.controls.confirmPassword.value?{validatePassword:!0}:{}]}),console.log(this.formPass),this.createForm()}ngOnInit(){this.activatedRoute.paramMap.subscribe(a=>{a.params.id&&this.subscriptions.push(this.userService.getUser(a.params.id).subscribe(l=>{this.getRoles()}))}),this.activatedRoute.queryParamMap.subscribe(a=>{var l,d;this.urlReturn=null===(l=null==a?void 0:a.params)||void 0===l?void 0:l.urlReturn,this.userId=null===(d=null==a?void 0:a.params)||void 0===d?void 0:d.id})}createForm(){this.form=this.fb.group({name:[null,c.kI.required],last_name:[null,c.kI.required],email:[null,[c.kI.required,c.kI.email],f.e.validateEmailExist(this.userService)],roles:new c.Oe([])})}get password(){return this.formPass.get("password")}get confirm_password(){return this.formPass.get("confirmPassword")}updateForm(a){this.form.patchValue({name:null==a?void 0:a.name,last_name:null==a?void 0:a.last_name,email:null==a?void 0:a.email})}getRoles(){this.subscriptions.push(this.userService.userOnEdit.subscribe(a=>{this.userEdit=a,this.updateForm(this.userEdit)}))}onSubmit(){this.profileService.updatePassword(this.formPass.value).subscribe(a=>{})}get control(){return this.form.get("roles")}back(){this.router.navigate(this.urlReturn?[this.urlReturn]:["/usuarios"])}ngOnDestroy(){this.subscriptions.map(a=>a.unsubscribe())}}return n.\u0275fac=function(a){return new(a||n)(e.Y36(g.f),e.Y36(P),e.Y36(v.gz),e.Y36(c.qu),e.Y36(v.F0),e.Y36(Z.uw),e.Y36(C.f))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-profile"]],decls:1,vars:1,consts:[["class","card mat-elevation-z2 animate__animated animate__slideInRight",4,"ngIf"],[1,"card","mat-elevation-z2","animate__animated","animate__slideInRight"],[4,"ngIf"],[1,"adasda"],["mat-stroked-button","","color","primary",1,"btn-submit",3,"click"],["mat-flat-button","","color","primary",1,"btn-submit",3,"disabled","click"],["fxFlex","100","fxLayout","row wrap","fxLayoutGap","20px","fxLayoutAlign","space-between center",3,"formGroup"],["appearance","outline","fxFlex.xs","100","fxFlex","calc(33.3% - 20px)","appearance","outline"],["readonly","","matInput","","formControlName","name","placeholder","Nombre"],["readonly","","matInput","","formControlName","last_name","placeholder","Apellido"],["readonly","","matInput","","formControlName","email","placeholder","Email"],[3,"formGroup"],["fxFlex","100",2,"font-weight","500"],["appearance","outline","fxFlex.xs","100","fxFlex","30","appearance","outline"],["matInput","","formControlName","password","placeholder","*******",3,"type"],["mat-icon-button","","matSuffix","",3,"click"],["fxFlex","100"],["matInput","","formControlName","confirmPassword","placeholder","*******",3,"type"],[3,"campo","name"],[1,"border"]],template:function(a,l){1&a&&e.YNc(0,U,45,14,"mat-card",0),2&a&&e.Q6J("ngIf",l.form)},directives:[t.O5,x.a8,x.dk,x.n5,x.$j,r.lW,x.dn,c._Y,c.JL,m.yH,m.xw,m.SQ,m.Wh,c.sg,s.KE,s.hX,o.Nt,c.Fj,c.JJ,c.u,s.R9,T.Hw,I.g],styles:[".adasda[_ngcontent-%COMP%]{justify-content:flex-end;display:flex}@media only screen and (max-width: 576px){.adasda[_ngcontent-%COMP%]{display:block!important}}.tabs-content[_ngcontent-%COMP%]{margin-top:3rem}.mat-card-actions[_ngcontent-%COMP%]{padding-right:1.5rem}.btn-submit[_ngcontent-%COMP%]{width:100px;line-height:2.2;margin:1rem}.mat-card-subtitle[_ngcontent-%COMP%]{padding-left:1rem!important}"]}),n})()}];let O=(()=>{class n{}return n.\u0275fac=function(a){return new(a||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[v.Bz.forChild(N)],v.Bz]}),n})();var w=i(8203);let J=(()=>{class n{}return n.\u0275fac=function(a){return new(a||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[t.ez,O,w.m]]}),n})()},7510:(M,h,i)=>{i.d(h,{g:()=>x});var t=i(5e3),v=i(9808),c=i(7322);function f(r,m){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const s=t.oxw();t.xp6(1),t.Oqu(s.getErrorMessage("notIncludedIn"))}}function e(r,m){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const s=t.oxw();t.xp6(1),t.Oqu(s.getErrorMessage("validateNumDoc"))}}function g(r,m){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const s=t.oxw();t.xp6(1),t.Oqu(s.getErrorMessage("validateCode"))}}function u(r,m){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const s=t.oxw();t.xp6(1),t.Oqu(s.getErrorMessage("email"))}}function _(r,m){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const s=t.oxw();t.xp6(1),t.Oqu(s.getErrorMessage("validateEmailExist"))}}function E(r,m){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const s=t.oxw();t.xp6(1),t.Oqu(s.getErrorMessage("required"))}}function b(r,m){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const s=t.oxw();t.xp6(1),t.Oqu(s.getErrorMessage("number"))}}function P(r,m){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const s=t.oxw();t.xp6(1),t.Oqu(s.getErrorMessage("date"))}}function Z(r,m){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const s=t.oxw();t.xp6(1),t.Oqu(s.getErrorMessage("validateRoleExist"))}}function C(r,m){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const s=t.oxw();t.xp6(1),t.Oqu(s.getErrorMessage("validatePassword"))}}let x=(()=>{class r{constructor(){}ngOnInit(){}getErrorMessage(s){let o;switch(console.log(s),s){case"validateNumDoc":case"validateCode":case"notIncludedIn":o=`${this.name} ya existe`;break;case"validateEmailExist":o="Email ya existe";break;case"email":o="Email no v\xe1lido";break;case"date":o="Formato de fecha inv\xe1lido";break;case"number":o=`${this.name} admite solamente n\xfameros`;break;case"required":o=`${this.name} es necesario`;break;case"validateRoleExist":o="El rol ya existe";break;case"validatePassword":o="Contrase\xf1as no coinciden";break;default:o="No v\xe1lido"}return o}}return r.\u0275fac=function(s){return new(s||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["mvd-errors-messages"]],inputs:{campo:"campo",name:"name"},decls:10,vars:10,consts:[[4,"ngIf"]],template:function(s,o){1&s&&(t.YNc(0,f,2,1,"mat-error",0),t.YNc(1,e,2,1,"mat-error",0),t.YNc(2,g,2,1,"mat-error",0),t.YNc(3,u,2,1,"mat-error",0),t.YNc(4,_,2,1,"mat-error",0),t.YNc(5,E,2,1,"mat-error",0),t.YNc(6,b,2,1,"mat-error",0),t.YNc(7,P,2,1,"mat-error",0),t.YNc(8,Z,2,1,"mat-error",0),t.YNc(9,C,2,1,"mat-error",0)),2&s&&(t.Q6J("ngIf",null==o.campo?null:o.campo.notIncludedIn),t.xp6(1),t.Q6J("ngIf",null==o.campo?null:o.campo.validateNumDoc),t.xp6(1),t.Q6J("ngIf",null==o.campo?null:o.campo.validateCode),t.xp6(1),t.Q6J("ngIf",null==o.campo?null:o.campo.email),t.xp6(1),t.Q6J("ngIf",null==o.campo?null:o.campo.validateEmailExist),t.xp6(1),t.Q6J("ngIf",null==o.campo?null:o.campo.required),t.xp6(1),t.Q6J("ngIf",null==o.campo?null:o.campo.number),t.xp6(1),t.Q6J("ngIf",null==o.campo?null:o.campo.date),t.xp6(1),t.Q6J("ngIf",null==o.campo?null:o.campo.validateRoleExist),t.xp6(1),t.Q6J("ngIf",null==o.campo?null:o.campo.validatePassword))},directives:[v.O5,c.TO],styles:[""],changeDetection:0}),r})()},7e3:(M,h,i)=>{i.d(h,{e:()=>v});var t=i(4850);class v{constructor(){}static validateNumDoc(f){return e=>f.checkExist("n_doc",e.value).pipe((0,t.U)(u=>null===u.exist?null:{validateNumDoc:u.exist}))}static validateCode(f){return e=>f.checkExist("code",e.value).pipe((0,t.U)(u=>null===u.exist?null:{validateCode:u.exist}))}static validateEmailExist(f){return e=>f.checkEmailExist(e.value).pipe((0,t.U)(u=>null===u.exist?null:{validateEmailExist:u.exist}))}static validateRoleExist(f){return e=>f.checkRoleExist(e.value).pipe((0,t.U)(u=>null===u.exist?null:{validateRoleExist:u.exist}))}}}}]);