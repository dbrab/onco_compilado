"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[193],{1193:(J,c,a)=>{a.r(c),a.d(c,{EvolutionsModule:()=>F});var v=a(9808),p=a(325),g=a(3075),m=a(6087),h=a(4850),d=a(2986),f=a(303),t=a(5e3),E=a(1338),C=a(8966),u=a(9224),b=a(7423),Z=a(5245),S=a(953),y=a(3160);const A=function(){return[20,50,100]},T=[{path:"",component:(()=>{class e{constructor(o,n){this.evolutionService=o,this.dialog=n,this.columns=[{title:"Nombre",col:"name"},{title:"Etapa de fin",col:"end",type:"boolean"}],this.pageDefault=1,this.perPage=10,this.orden="desc",this.filter="",this.result=this.evolutionService.resultItems$}ngOnInit(){this.getEvolutions(this.pageDefault,this.perPage,this.filter,this.orden)}paginatorChange(o){this.getEvolutions(o.pageIndex+1,o.pageSize)}getEvolutions(o,n,i,s){this.subscroption=this.evolutionService.getEvolutions(o,n,i,s).subscribe(r=>this.loadData())}loadData(){this.dataSource=this.result.pipe((0,h.U)(o=>o.data.data.map(i=>({id:i.id,name:i.name,end:null==i?void 0:i.end})))),this.totalResut=this.result.pipe((0,h.U)(o=>o.data.total))}search(o){this.getEvolutions(this.pageDefault,this.perPage,o,this.orden)}deleteItem(o){return this.evolutionService.deleteEvolution(o)}itemAction(o){"delete"===o.action&&this.deleteItem(o.element.id).pipe((0,d.q)(1)).subscribe(),"edit"===o.action&&this.openDialog("Edita Evoluci\xf3n",o.element)}openDialog(o="Agrega Evoluci\xf3n",n){const i={title:o,data:this.setFields(n)};return this.dialog.open(f.Q,{width:"550px",data:i}).afterClosed().subscribe(r=>{r&&(r.id?this.updateEvolution(r):this.storeEvolution(r))})}updateEvolution(o){this.evolutionService.updateEvolution(o).pipe((0,d.q)(1)).subscribe()}storeEvolution(o){this.evolutionService.storeEvolution(o).pipe((0,d.q)(1)).subscribe(n=>{})}setFields(o){return[{nameControl:"id",type:"hidden",value:null==o?void 0:o.id,label:"Id"},{nameControl:"name",type:"text",value:null==o?void 0:o.name,validators:[g.kI.required],label:"Nombre",class:"mvd-col1--1"},{nameControl:"end",type:"checkbox",value:null==o?void 0:o.end,label:"Etapa final"}]}ngOnDestroy(){this.subscroption.unsubscribe()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(E.g),t.Y36(C.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["mvd-evolutions"]],viewQuery:function(o,n){if(1&o&&t.Gf(m.NW,7),2&o){let i;t.iGM(i=t.CRH())&&(n.paginator=i.first)}},decls:23,vars:11,consts:[[1,"card","mat-elevation-z16","animate__animated","animate__slideInRight"],[1,"actions"],["mat-flat-button","","color","primary",3,"click"],[1,"material-icons-round"],["mat-flat-button","","color","","disabled","",1,"btn-simple"],[3,"noteFilterBy","changeSearch"],[3,"columns","dataSource","actionChange"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],[1,"border"]],template:function(o,n){1&o&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),t._uU(3,"Evoluciones Pacientes"),t.qZA(),t.TgZ(4,"mat-card-subtitle"),t._uU(5,"Administrar Evoluciones"),t.qZA(),t.TgZ(6,"div",1)(7,"button",2),t.NdJ("click",function(){return n.openDialog()}),t.TgZ(8,"mat-icon",3),t._uU(9,"add"),t.qZA(),t.TgZ(10,"span"),t._uU(11,"Crear"),t.qZA()(),t.TgZ(12,"button",4)(13,"mat-icon",3),t._uU(14,"save_alt"),t.qZA(),t._uU(15," Exportar "),t.qZA()(),t.TgZ(16,"mvd-input-search",5),t.NdJ("changeSearch",function(s){return n.search(s)}),t.qZA()(),t.TgZ(17,"mat-card-content")(18,"mvd-data-table",6),t.NdJ("actionChange",function(s){return n.itemAction(s)}),t.ALo(19,"async"),t.qZA(),t.TgZ(20,"mat-paginator",7),t.NdJ("page",function(s){return n.paginatorChange(s)}),t.ALo(21,"async"),t.qZA()(),t._UZ(22,"span",8),t.qZA()),2&o&&(t.xp6(16),t.Q6J("noteFilterBy","Filtra por Nombre"),t.xp6(2),t.Q6J("columns",n.columns)("dataSource",t.lcZ(19,6,n.dataSource)),t.xp6(2),t.Q6J("length",t.lcZ(21,8,n.totalResut))("pageSize",n.perPage)("pageSizeOptions",t.DdM(10,A)))},directives:[u.a8,u.dk,u.n5,u.$j,b.lW,Z.Hw,S.V,u.dn,y.Q,m.NW],pipes:[v.Ov],styles:[""]}),e})()}];let D=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[p.Bz.forChild(T)],p.Bz]}),e})();var z=a(8203);let F=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[v.ez,D,z.m]]}),e})()}}]);