"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[909],{2909:(F,u,s)=>{s.r(u),s.d(u,{DoctorsModule:()=>z});var p=s(9808),m=s(325),h=s(6087),g=s(4850),d=s(2986),v=s(303),o=s(5e3),D=s(5551),f=s(8966),c=s(9224),C=s(7423),S=s(5245),y=s(953),Z=s(3160);const b=function(){return[20,50,100]},A=[{path:"",component:(()=>{class a{constructor(t,e){this.doctorService=t,this.dialog=e,this.columns=[{title:"Nombre",col:"name"},{title:"Apellido",col:"last_name"},{title:"Contacto",col:"contact"}],this.pageDefault=1,this.perPage=10,this.orden="desc",this.filter="",this.result=this.doctorService.resultItems$}ngOnInit(){this.getDoctors(this.pageDefault,this.perPage,this.filter,this.orden)}paginatorChange(t){this.getDoctors(t.pageIndex+1,t.pageSize)}getDoctors(t,e,n,i){this.subscroption=this.doctorService.getDoctors(t,e,n,i).subscribe(l=>this.loadData())}loadData(){this.dataSource=this.result.pipe((0,g.U)(t=>t.data.data.map(n=>({id:n.id,name:n.name,last_name:null==n?void 0:n.last_name,contact:null==n?void 0:n.contact})))),this.totalResut=this.result.pipe((0,g.U)(t=>t.data.total))}search(t){this.getDoctors(this.pageDefault,this.perPage,t,this.orden)}deleteItem(t){return this.doctorService.deleteDoctor(t)}itemAction(t){"delete"===t.action&&this.deleteItem(t.element.id).pipe((0,d.q)(1)).subscribe(),"edit"===t.action&&this.openDialog("Edita M\xe9dico",t.element)}openDialog(t="Agrega M\xe9dico",e){const n={title:t,data:this.setFields(e)};return this.dialog.open(v.Q,{width:"550px",data:n}).afterClosed().subscribe(l=>{l&&(l.id?this.updateDoctor(l):this.storeDoctor(l))})}updateDoctor(t){this.doctorService.updateDoctor(t).pipe((0,d.q)(1)).subscribe(e=>this.getDoctors(this.pageDefault,this.perPage,this.filter,this.orden))}storeDoctor(t){this.doctorService.storeDoctor(t).pipe((0,d.q)(1)).subscribe(e=>{this.getDoctors(this.pageDefault,this.perPage,this.filter,this.orden)})}setFields(t){return[{nameControl:"id",type:"hidden",value:null==t?void 0:t.id,label:"Id"},{nameControl:"name",type:"text",value:null==t?void 0:t.name,label:"Nombre",class:"mvd-col1--1"},{nameControl:"last_name",type:"text",value:null==t?void 0:t.last_name,label:"Apellido",class:"mvd-col1--1"},{nameControl:"contact",type:"text",value:null==t?void 0:t.contact,label:"Contacto",class:"mvd-col1--1"}]}ngOnDestroy(){this.subscroption.unsubscribe()}}return a.\u0275fac=function(t){return new(t||a)(o.Y36(D.e),o.Y36(f.uw))},a.\u0275cmp=o.Xpm({type:a,selectors:[["mvd-doctors"]],viewQuery:function(t,e){if(1&t&&o.Gf(h.NW,7),2&t){let n;o.iGM(n=o.CRH())&&(e.paginator=n.first)}},decls:19,vars:11,consts:[[1,"card","mat-elevation-z16","animate__animated","animate__slideInRight"],[1,"actions"],["mat-flat-button","","color","primary",3,"click"],[1,"material-icons-round"],[3,"noteFilterBy","changeSearch"],[3,"columns","dataSource","actionChange"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],[1,"border"]],template:function(t,e){1&t&&(o.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),o._uU(3,"M\xe9dicos"),o.qZA(),o.TgZ(4,"mat-card-subtitle"),o._uU(5,"Administrar M\xe9dicos"),o.qZA(),o.TgZ(6,"div",1)(7,"button",2),o.NdJ("click",function(){return e.openDialog()}),o.TgZ(8,"mat-icon",3),o._uU(9,"add"),o.qZA(),o.TgZ(10,"span"),o._uU(11,"Crear"),o.qZA()()(),o.TgZ(12,"mvd-input-search",4),o.NdJ("changeSearch",function(i){return e.search(i)}),o.qZA()(),o.TgZ(13,"mat-card-content")(14,"mvd-data-table",5),o.NdJ("actionChange",function(i){return e.itemAction(i)}),o.ALo(15,"async"),o.qZA(),o.TgZ(16,"mat-paginator",6),o.NdJ("page",function(i){return e.paginatorChange(i)}),o.ALo(17,"async"),o.qZA()(),o._UZ(18,"span",7),o.qZA()),2&t&&(o.xp6(12),o.Q6J("noteFilterBy","Filtra por Nombre"),o.xp6(2),o.Q6J("columns",e.columns)("dataSource",o.lcZ(15,6,e.dataSource)),o.xp6(2),o.Q6J("length",o.lcZ(17,8,e.totalResut))("pageSize",e.perPage)("pageSizeOptions",o.DdM(10,b)))},directives:[c.a8,c.dk,c.n5,c.$j,C.lW,S.Hw,y.V,c.dn,Z.Q,h.NW],pipes:[p.Ov],styles:[""]}),a})()}];let T=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=o.oAB({type:a}),a.\u0275inj=o.cJS({imports:[[m.Bz.forChild(A)],m.Bz]}),a})();var M=s(8203);let z=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=o.oAB({type:a}),a.\u0275inj=o.cJS({imports:[[p.ez,T,M.m]]}),a})()}}]);