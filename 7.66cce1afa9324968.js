(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[7],{1007:(L,w,l)=>{"use strict";l.r(w),l.d(w,{PatientsModule:()=>$o});var u=l(9808),U=l(325),E=l(6359),t=l(5e3),y=l(5120),A=l(520),b=l(591),m=l(4850),_=l(2340),p=l(7261);let h=(()=>{class i{constructor(e,a){this.http=e,this.snackBar=a,this.tracePatientEditSubject$=new b.X(null),this.urlUtils="src/app/shared/utils/data/",this.resultSubject$=new b.X(null),this.statusPatient$=new b.X("")}get resultItems$(){return this.resultSubject$}setItems(e){this.resultSubject$.next(e)}get tracePatientOnEdit(){return this.tracePatientEditSubject$}get currentStatusPatient$(){return this.statusPatient$}setTracePatientOnEdit(e){this.tracePatientEditSubject$.next(e)}getTraces(e=1,a=10,o="",r="desc",s=null){return this.http.get(`${_.N.API}traces_patients`,{params:(new A.LE).set("page",e.toString()).set("filter",o).set("sort",r).set("patient_id",s.toString()).set("per_page",a.toString())}).pipe((0,m.U)(f=>{var x,I;return this.statusPatient$.next(null===(I=null===(x=f.data.data[0])||void 0===x?void 0:x.stage)||void 0===I?void 0:I.name),this.setTracePatientOnEdit(null),this.setItems(f),f}))}getPatient(e){return this.http.get(`${_.N.API}traces_patients/${e}`).pipe((0,m.U)(a=>(this.setTracePatientOnEdit(a.data),a.data)))}storeTracePatient(e){return this.http.post(`${_.N.API}traces_patients`,e).pipe((0,m.U)(a=>(this.setTracePatientOnEdit(a.data),this.openSnackBar("Se cre\xf3 correctamente","success-snack-bar"),a.data)))}openSnackBar(e,a,o=""){this.snackBar.open(e,o,{duration:2e3,horizontalPosition:"center",verticalPosition:"top",panelClass:a})}updateTrace(e){return e._method="put",this.http.post(`${_.N.API}traces_patients/${e.id}`,e).pipe((0,m.U)(a=>(this.setTracePatientOnEdit(a.data),this.openSnackBar("Se cre\xf3 correctamente","success-snack-bar"),a.data)))}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(A.eN),t.LFG(p.ux))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),F=(()=>{class i{constructor(e,a){this.http=e,this.snackBar=a,this.tracingPatientEditSubject$=new b.X(null)}tracePatientOnEdit(e){return e?this.getTracing(e):this.tracingPatientEditSubject$.getValue()?this.tracingPatientEditSubject$.asObservable():void 0}setTracingPatientOnEdit(e){this.tracingPatientEditSubject$.next(e)}storeTracingPatient(e){this.http.post(`${_.N.API}tracings`,e).pipe((0,m.U)(o=>(this.setTracingPatientOnEdit(o.data),o.data))).subscribe()}updateTracingPatient(e){const a=e;a._method="PUT",this.http.post(`${_.N.API}tracings/${e.id}`,a).pipe((0,m.U)(o=>(this.setTracingPatientOnEdit(o.data),o.data))).subscribe()}getTracing(e){return this.http.get(`${_.N.API}tracings/${e}`).pipe((0,m.U)(a=>(this.setTracingPatientOnEdit(a.data),a.data)))}openSnackBar(e,a,o=""){this.snackBar.open(e,o,{duration:2e3,horizontalPosition:"center",verticalPosition:"top",panelClass:a})}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(A.eN),t.LFG(p.ux))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var v=l(5598),Z=l(8966),q=l(9224),d=l(277),N=l(5245),J=l(7238),S=l(7423),Q=l(4344),it=l(3251),c=l(3075),_t=l(7092),ut=l(5439),O=l.n(ut),Y=l(13),M=l(1059),T=l(2986),st=l(7e3),D=l(1079),H=l(303),ft=l(189),gt=l(3582),ht=l(8567),xt=l(5551),g=l(7322),W=l(4107),$=l(508),j=l(7510),k=l(7531),C=l(6856),R=l(7446),vt=l(8765),bt=l(7170);function Zt(i,n){if(1&i&&(t.TgZ(0,"mat-option",36),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.name," ")}}function Tt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",12)(1,"mat-label"),t._uU(2,"Fecha defunci\xf3n"),t.qZA(),t.TgZ(3,"input",37),t.NdJ("dateChange",function(o){return t.CHM(e),t.oxw(3).formatDateDead(o)}),t.qZA(),t._UZ(4,"mat-datepicker-toggle",14)(5,"mat-datepicker",null,15),t.TgZ(7,"mat-error"),t._UZ(8,"mvd-errors-messages",6),t.qZA()()}if(2&i){const e=t.MAs(6),a=t.oxw(3);t.xp6(3),t.Q6J("matDatepicker",e),t.xp6(1),t.Q6J("for",e),t.xp6(4),t.Q6J("campo",a.form.get("date_dead").errors)("name","Fecha defunci\xf3n")}}function Ct(i,n){if(1&i&&(t.TgZ(0,"mat-option",36),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.name," ")}}function yt(i,n){if(1&i&&(t.TgZ(0,"mat-option",36),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function At(i,n){if(1&i&&(t.TgZ(0,"mat-form-field",25)(1,"mat-label"),t._uU(2,"Nacionalidad"),t.qZA(),t.TgZ(3,"mat-select",38),t.YNc(4,yt,2,2,"mat-option",5),t.qZA(),t.TgZ(5,"mat-error"),t._UZ(6,"mvd-errors-messages",6),t.qZA()()),2&i){const e=n.ngIf,a=t.oxw(3);t.xp6(4),t.Q6J("ngForOf",e),t.xp6(2),t.Q6J("campo",a.form.get("nationality_id").errors)("name","Pa\xeds")}}function Ft(i,n){if(1&i&&(t.TgZ(0,"mat-option",36),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function St(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",25)(1,"mat-label"),t._uU(2,"Pa\xedses"),t.qZA(),t.TgZ(3,"mat-select",39),t.NdJ("selectionChange",function(){return t.CHM(e),t.oxw(3).onSelectCountry()}),t.YNc(4,Ft,2,2,"mat-option",5),t.qZA(),t.TgZ(5,"mat-error"),t._UZ(6,"mvd-errors-messages",6),t.qZA()()}if(2&i){const e=n.ngIf,a=t.oxw(3);t.xp6(4),t.Q6J("ngForOf",e),t.xp6(2),t.Q6J("campo",a.form.get("country_id").errors)("name","Pa\xeds")}}function It(i,n){if(1&i&&(t.TgZ(0,"mat-option",36),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function qt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",25)(1,"mat-label"),t._uU(2,"Departamento"),t.qZA(),t._UZ(3,"input",40),t.TgZ(4,"mat-autocomplete",41,42),t.NdJ("optionSelected",function(){return t.CHM(e),t.oxw(3).onSelectState()}),t.YNc(6,It,2,2,"mat-option",5),t.ALo(7,"filterState"),t.ALo(8,"async"),t.qZA(),t.TgZ(9,"mat-error"),t._UZ(10,"mvd-errors-messages",6),t.qZA()()}if(2&i){const e=t.MAs(5),a=t.oxw(3);t.xp6(3),t.Q6J("matAutocomplete",e),t.xp6(1),t.Q6J("displayWith",a.getNameStates.bind(a)),t.xp6(2),t.Q6J("ngForOf",t.xi3(7,5,t.lcZ(8,8,a.filteredStates),a.form.get("country_id").value)),t.xp6(4),t.Q6J("campo",a.form.get("state_id").errors)("name","Departamento")}}function Nt(i,n){if(1&i&&(t.TgZ(0,"mat-option",36),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function Ut(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",25)(1,"mat-label"),t._uU(2,"Ciudad"),t.qZA(),t._UZ(3,"input",43),t.TgZ(4,"mat-autocomplete",44,45),t.YNc(6,Nt,2,2,"mat-option",5),t.ALo(7,"filterCity"),t.ALo(8,"async"),t.qZA(),t.TgZ(9,"mat-error"),t._UZ(10,"mvd-errors-messages",6),t.qZA(),t.TgZ(11,"button",46),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).addCity()}),t.TgZ(12,"mat-icon",47),t._uU(13,"add_circle"),t.qZA()()()}if(2&i){const e=t.MAs(5),a=t.oxw(3);t.xp6(3),t.Q6J("matAutocomplete",e),t.xp6(1),t.Q6J("displayWith",a.getNameCities.bind(a)),t.xp6(2),t.Q6J("ngForOf",t.xi3(7,5,t.lcZ(8,8,a.filteredCities),a.form.get("state_id").value)),t.xp6(4),t.Q6J("campo",a.form.get("city_id").errors)("name","Ciudad")}}function wt(i,n){if(1&i&&(t.TgZ(0,"mat-option",36),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.name," ")}}function Jt(i,n){if(1&i&&(t.TgZ(0,"mat-option",36),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.name," ")}}function kt(i,n){if(1&i&&(t.TgZ(0,"mat-option",36),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function Qt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",25)(1,"mat-label"),t._uU(2,"Instituci\xf3n M\xe9dica"),t.qZA(),t._UZ(3,"input",48),t.TgZ(4,"mat-autocomplete",44,42),t.YNc(6,kt,2,2,"mat-option",5),t.ALo(7,"async"),t.qZA(),t.TgZ(8,"button",46),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return o.addMedicaInstitutions(o.form.get("medical_institution_id"))}),t.TgZ(9,"mat-icon",47),t._uU(10,"add_circle"),t.qZA()(),t.TgZ(11,"mat-error"),t._UZ(12,"mvd-errors-messages",6),t.qZA()()}if(2&i){const e=t.MAs(5),a=t.oxw(3);t.xp6(3),t.Q6J("matAutocomplete",e),t.xp6(1),t.Q6J("displayWith",a.getNameMedicalInst.bind(a)),t.xp6(2),t.Q6J("ngForOf",t.lcZ(7,5,a.filteredMedicaInstitutions)),t.xp6(6),t.Q6J("campo",a.form.get("medical_institution_id").errors)("name","Instituci\xf3n M\xe9dica")}}function Ot(i,n){if(1&i&&(t.TgZ(0,"mat-option",36),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.AsE(" ",e.name," ",e.last_name," ")}}function Pt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",25)(1,"mat-label"),t._uU(2,"M\xe9dico Tratante"),t.qZA(),t._UZ(3,"input",49),t.TgZ(4,"mat-autocomplete",44,42),t.YNc(6,Ot,2,3,"mat-option",5),t.ALo(7,"async"),t.qZA(),t.TgZ(8,"button",46),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return o.addDoctor(o.form.get("doctor_id"))}),t.TgZ(9,"mat-icon",47),t._uU(10,"add_circle"),t.qZA()(),t.TgZ(11,"mat-error"),t._UZ(12,"mvd-errors-messages",6),t.qZA()()}if(2&i){const e=t.MAs(5),a=t.oxw(3);t.xp6(3),t.Q6J("matAutocomplete",e),t.xp6(1),t.Q6J("displayWith",a.getNameDoctor.bind(a)),t.xp6(2),t.Q6J("ngForOf",t.lcZ(7,5,a.filteredDoctors)),t.xp6(6),t.Q6J("campo",a.form.get("doctor_id").errors)("name","Doctor")}}function Mt(i,n){if(1&i&&(t.TgZ(0,"mat-option",36),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.AsE(" ",e.name," ",e.last_name," ")}}function Yt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",25)(1,"mat-label"),t._uU(2,"Derivado por"),t.qZA(),t._UZ(3,"input",50),t.TgZ(4,"mat-autocomplete",44,42),t.YNc(6,Mt,2,3,"mat-option",5),t.ALo(7,"async"),t.qZA(),t.TgZ(8,"button",46),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return o.addDoctor(o.form.get("derived_by_id"))}),t.TgZ(9,"mat-icon",47),t._uU(10,"add_circle"),t.qZA()(),t.TgZ(11,"mat-error"),t._UZ(12,"mvd-errors-messages",6),t.qZA()()}if(2&i){const e=t.MAs(5),a=t.oxw(3);t.xp6(3),t.Q6J("matAutocomplete",e),t.xp6(1),t.Q6J("displayWith",a.getNameDoctor.bind(a)),t.xp6(2),t.Q6J("ngForOf",t.lcZ(7,5,a.filteredDoctorsDeriv)),t.xp6(6),t.Q6J("campo",a.form.get("derived_by_id").errors)("name","Derivado por")}}function Dt(i,n){if(1&i&&(t.TgZ(0,"mat-option",36),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function Lt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",25)(1,"mat-label"),t._uU(2,"Instituci\xf3n de cirug\xeda"),t.qZA(),t._UZ(3,"input",51),t.TgZ(4,"mat-autocomplete",44,42),t.YNc(6,Dt,2,2,"mat-option",5),t.ALo(7,"async"),t.qZA(),t.TgZ(8,"button",46),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return o.addMedicaInstitutions(o.form.get("surgery_institution_id"))}),t.TgZ(9,"mat-icon",47),t._uU(10,"add_circle"),t.qZA()()()}if(2&i){const e=t.MAs(5),a=t.oxw(3);t.xp6(3),t.Q6J("matAutocomplete",e),t.xp6(1),t.Q6J("displayWith",a.getNameMedicalInst.bind(a)),t.xp6(2),t.Q6J("ngForOf",t.lcZ(7,3,a.filteredSurgeryInstitution))}}function Et(i,n){if(1&i&&(t.TgZ(0,"mat-form-field",25)(1,"mat-label"),t._uU(2,"Proyecto Investigaci\xf3n"),t.qZA(),t.TgZ(3,"mat-select",52)(4,"mat-option",36),t._uU(5," pendiente "),t.qZA()(),t.TgZ(6,"mat-error"),t._UZ(7,"mvd-errors-messages",6),t.qZA()()),2&i){const e=t.oxw(3);t.xp6(7),t.Q6J("campo",e.form.get("proyect_investigation_id").errors)("name","Proyecto Investigaci\xf3n")}}function $t(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"form",2)(1,"mat-form-field",3)(2,"mat-label"),t._uU(3,"Tipo Paciente"),t.qZA(),t.TgZ(4,"mat-select",4),t.NdJ("selectionChange",function(o){return t.CHM(e),t.oxw(2).setCode(o)}),t.ynx(5),t.YNc(6,Zt,2,2,"mat-option",5),t.BQk(),t.qZA(),t.TgZ(7,"mat-error"),t._UZ(8,"mvd-errors-messages",6),t.qZA()(),t.TgZ(9,"mat-form-field",7)(10,"mat-label"),t._uU(11,"C\xf3digo"),t.qZA(),t._UZ(12,"input",8),t.TgZ(13,"mat-error"),t._UZ(14,"mvd-errors-messages",6),t.qZA()(),t.TgZ(15,"mat-form-field",9)(16,"mat-label"),t._uU(17,"Nombres"),t.qZA(),t._UZ(18,"input",10),t.TgZ(19,"mat-error"),t._UZ(20,"mvd-errors-messages",6),t.qZA()(),t.TgZ(21,"mat-form-field",9)(22,"mat-label"),t._uU(23,"Apellidos"),t.qZA(),t._UZ(24,"input",11),t.TgZ(25,"mat-error"),t._UZ(26,"mvd-errors-messages",6),t.qZA()(),t.TgZ(27,"mat-form-field",12)(28,"mat-label"),t._uU(29,"Fecha de Naciemiento"),t.qZA(),t.TgZ(30,"input",13),t.NdJ("dateChange",function(o){return t.CHM(e),t.oxw(2).formatDate(o)}),t.qZA(),t._UZ(31,"mat-datepicker-toggle",14)(32,"mat-datepicker",null,15),t.TgZ(34,"mat-error"),t._UZ(35,"mvd-errors-messages",6),t.qZA()(),t.TgZ(36,"mat-checkbox",16),t._uU(37,"Fallecido"),t.qZA(),t.YNc(38,Tt,9,4,"mat-form-field",17),t.TgZ(39,"mat-form-field",18)(40,"mat-label"),t._uU(41,"Edad"),t.qZA(),t._UZ(42,"input",19),t.TgZ(43,"mat-error"),t._UZ(44,"mvd-errors-messages",6),t.qZA()(),t.TgZ(45,"mat-form-field",7)(46,"mat-label"),t._uU(47,"Tipo Documento"),t.qZA(),t.TgZ(48,"mat-select",20),t.YNc(49,Ct,2,2,"mat-option",5),t.qZA(),t.TgZ(50,"mat-error"),t._UZ(51,"mvd-errors-messages",6),t.qZA()(),t.TgZ(52,"mat-form-field",7)(53,"mat-label"),t._uU(54,"N\xba Documento Identidad"),t.qZA(),t._UZ(55,"input",21),t.TgZ(56,"mat-error"),t._UZ(57,"mvd-errors-messages",6),t.qZA()(),t.TgZ(58,"mat-form-field",22)(59,"mat-label"),t._uU(60,"Email"),t.qZA(),t._UZ(61,"input",23),t.TgZ(62,"mat-error"),t._UZ(63,"mvd-errors-messages",6),t.qZA()(),t.TgZ(64,"mat-form-field",22)(65,"mat-label"),t._uU(66,"Direcci\xf3n"),t.qZA(),t._UZ(67,"input",24),t.TgZ(68,"mat-error"),t._UZ(69,"mvd-errors-messages",6),t.qZA()(),t.TgZ(70,"mat-form-field",25)(71,"mat-label"),t._uU(72,"Tel\xe9fono"),t.qZA(),t._UZ(73,"input",26),t.TgZ(74,"mat-error"),t._UZ(75,"mvd-errors-messages",6),t.qZA()(),t.YNc(76,At,7,3,"mat-form-field",27),t.ALo(77,"async"),t.YNc(78,St,7,3,"mat-form-field",27),t.ALo(79,"async"),t.YNc(80,qt,11,10,"mat-form-field",27),t.YNc(81,Ut,14,10,"mat-form-field",27),t.TgZ(82,"mat-form-field",25)(83,"mat-label"),t._uU(84,"Genero"),t.qZA(),t.TgZ(85,"mat-select",28),t.YNc(86,wt,2,2,"mat-option",5),t.qZA(),t.TgZ(87,"mat-error"),t._UZ(88,"mvd-errors-messages",6),t.qZA()(),t.TgZ(89,"mat-form-field",25)(90,"mat-label"),t._uU(91,"Ascendencia"),t.qZA(),t.TgZ(92,"mat-select",29),t.YNc(93,Jt,2,2,"mat-option",5),t.qZA(),t.TgZ(94,"mat-error"),t._UZ(95,"mvd-errors-messages",6),t.qZA()(),t.YNc(96,Qt,13,7,"mat-form-field",27),t.YNc(97,Pt,13,7,"mat-form-field",27),t.YNc(98,Yt,13,7,"mat-form-field",27),t.YNc(99,Lt,11,5,"mat-form-field",27),t.TgZ(100,"mat-form-field",25)(101,"mat-label"),t._uU(102,"RegistroH"),t.qZA(),t._UZ(103,"input",30),t.TgZ(104,"mat-error"),t._UZ(105,"mvd-errors-messages",6),t.qZA()(),t.YNc(106,Et,8,2,"mat-form-field",27),t.TgZ(107,"div",31)(108,"mat-checkbox",32),t._uU(109,"Ashkenazi"),t.qZA()(),t.TgZ(110,"div",33)(111,"mat-form-field",34)(112,"mat-label"),t._uU(113,"Observaciones"),t.qZA(),t._UZ(114,"textarea",35),t.qZA()()()}if(2&i){const e=t.MAs(33),a=t.oxw().ngIf,o=t.oxw();t.Q6J("formGroup",o.form),t.xp6(6),t.Q6J("ngForOf",a.type_patient),t.xp6(2),t.Q6J("campo",o.form.get("type_patient").errors)("name","Tipo de Paciente"),t.xp6(6),t.Q6J("campo",o.form.get("code").errors)("name","C\xf3digo"),t.xp6(6),t.Q6J("campo",o.form.get("name").errors)("name","Nombre"),t.xp6(6),t.Q6J("campo",o.form.get("last_name").errors)("name","Apellido"),t.xp6(4),t.Q6J("matDatepicker",e),t.xp6(1),t.Q6J("for",e),t.xp6(4),t.Q6J("campo",o.form.get("birth").errors)("name","Fecha nacimiento"),t.xp6(3),t.Q6J("ngIf",o.form.get("dead").value),t.xp6(6),t.Q6J("campo",o.form.get("age").errors)("name","Edad"),t.xp6(5),t.Q6J("ngForOf",a.type_doc),t.xp6(2),t.Q6J("campo",o.form.get("type_doc").errors)("name","Tipo Documento"),t.xp6(6),t.Q6J("campo",o.form.get("n_doc").errors)("name","N\xba de documento"),t.xp6(6),t.Q6J("campo",o.form.get("email").errors)("name","Email"),t.xp6(6),t.Q6J("campo",o.form.get("address").errors)("name","Direcci\xf3n"),t.xp6(6),t.Q6J("campo",o.form.get("phone").errors)("name","Tel\xe9fono"),t.xp6(1),t.Q6J("ngIf",t.lcZ(77,44,o.countries)),t.xp6(2),t.Q6J("ngIf",t.lcZ(79,46,o.countries)),t.xp6(2),t.Q6J("ngIf",o.states),t.xp6(1),t.Q6J("ngIf",o.cities),t.xp6(5),t.Q6J("ngForOf",a.gender),t.xp6(2),t.Q6J("campo",o.form.get("gender").errors)("name","Genero"),t.xp6(5),t.Q6J("ngForOf",a.breed),t.xp6(2),t.Q6J("campo",o.form.get("breed_id").errors)("name","Raza"),t.xp6(1),t.Q6J("ngIf",o.medicaInstitutions),t.xp6(1),t.Q6J("ngIf",o.doctors),t.xp6(1),t.Q6J("ngIf",o.doctors),t.xp6(1),t.Q6J("ngIf",o.medicaInstitutions),t.xp6(6),t.Q6J("campo",o.form.get("registroH").errors)("name","RegistroH")}}function Bt(i,n){if(1&i&&(t.ynx(0),t.YNc(1,$t,115,48,"form",1),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.form)}}const X=O();let Gt=(()=>{class i{constructor(e,a,o,r,s,f,x){this.fb=e,this.ubicationService=a,this.patientService=o,this.locationService=r,this.medicalInstitutionService=s,this.doctorService=f,this.dialog=x,this.dataIdentification=new t.vpe,this.subscriptions=[],this.subscriptions.push(this.ubicationService.statesItems$.subscribe(I=>this.states=I),this.ubicationService.citiesItems$.subscribe(I=>this.cities=I),this.patientService.medicalInstitutionsItems$.subscribe(I=>this.medicaInstitutions=I),this.patientService.doctorsItems$.subscribe(I=>this.doctors=I)),this.countries=this.ubicationService.countriesItems$,this.dataSelects$=this.patientService.dataSelect()}ngOnInit(){this.createForm(),this.subscriptions.push(this.patientService.patientOnEdit.subscribe(e=>{this.patientEdit=e,this.patientEdit&&this.updateForm(this.patientEdit)}))}createForm(){this.form=this.fb.group({code:[null,c.kI.required,st.e.validateCode(this.patientService)],birth:[null,c.kI.required],type_doc:["CI",c.kI.required],n_doc:[null,c.kI.required,st.e.validateNumDoc(this.patientService)],name:[null,c.kI.required],last_name:[null,c.kI.required],phone:[null],address:[null],email:[null,[_t.dN.email]],ashkenasi:[!1],gender:[null],type_patient:[null,c.kI.required],nationality_id:[null],city_id:[null],medical_institution_id:[null],surgery_institution_id:[null],registroH:[null],doctor_id:[null],derived_by_id:[null],breed_id:[null],obs:[null],country_id:[null],state_id:[null],age:[null,c.kI.required],dead:[!1],date_dead:[null],proyect_investigation_id:[null]}),this.form.valueChanges.pipe((0,Y.b)(500)).subscribe(e=>{this.dataIdentification.emit(this.form)}),this.filteredStates=this.form.get("state_id").valueChanges.pipe((0,M.O)(""),(0,m.U)(e=>e?this._filterStates(e):this.states)),this.filteredCities=this.form.get("city_id").valueChanges.pipe((0,M.O)(""),(0,m.U)(e=>e?this._filterCities(e):this.cities)),this.filteredSurgeryInstitution=this.form.get("surgery_institution_id").valueChanges.pipe((0,M.O)(""),(0,m.U)(e=>e?this._filterMedicalInstitutions(e):this.medicaInstitutions)),this.filteredMedicaInstitutions=this.form.get("medical_institution_id").valueChanges.pipe((0,M.O)(""),(0,m.U)(e=>e?this._filterMedicalInstitutions(e):this.medicaInstitutions)),this.filteredDoctorsDeriv=this.form.get("derived_by_id").valueChanges.pipe((0,M.O)(""),(0,m.U)(e=>e?this._filterDoctors(e):this.doctors)),this.filteredDoctors=this.form.get("doctor_id").valueChanges.pipe((0,M.O)(""),(0,m.U)(e=>e?this._filterDoctors(e):this.doctors))}formatDate(e){let a=e.value;this.form.get("birth").setValue(X(a).format("YYYY-MM-DD HH:mm:ss")),this.form.get("dead").value?this.calculoEdad(this.form.get("birth").value,this.form.get("date_dead").value):this.calculoEdad(this.form.get("birth").value)}formatDateDead(e){let a=e.value;this.form.get("date_dead").setValue(X(a).format("YYYY-MM-DD HH:mm:ss")),this.form.get("dead").value?this.calculoEdad(this.form.get("birth").value,this.form.get("date_dead").value):this.calculoEdad(this.form.get("birth").value)}calculoEdad(e,a){const o=X(),r=X(e);let s;s=a?X(a).diff(r,"years"):o.diff(r,"years"),this.form.get("age").setValue(s)}updateForm(e){var a,o,r;this.form.patchValue({country_id:(null==e?void 0:e.country_id)?null==e?void 0:e.country_id:null===(o=null===(a=null==e?void 0:e.city)||void 0===a?void 0:a.state)||void 0===o?void 0:o.country_id,state_id:(null==e?void 0:e.state_id)?null==e?void 0:e.state_id:null===(r=null==e?void 0:e.city)||void 0===r?void 0:r.state_id,code:null==e?void 0:e.code,birth:null==e?void 0:e.birth,type_doc:null==e?void 0:e.type_doc,n_doc:null==e?void 0:e.n_doc,name:null==e?void 0:e.name,last_name:null==e?void 0:e.last_name,phone:null==e?void 0:e.phone,address:null==e?void 0:e.address,email:null==e?void 0:e.email,ashkenasi:null==e?void 0:e.ashkenasi,gender:null==e?void 0:e.gender,type_patient:null==e?void 0:e.type_patient,nationality_id:null==e?void 0:e.nationality_id,medical_institution_id:null==e?void 0:e.medical_institution_id,surgery_institution_id:null==e?void 0:e.surgery_institution_id,registroH:null==e?void 0:e.registroH,doctor_id:null==e?void 0:e.doctor_id,derived_by_id:null==e?void 0:e.derived_by_id,breed_id:null==e?void 0:e.breed_id,obs:null==e?void 0:e.obs,city_id:null==e?void 0:e.city_id,age:"",dead:null==e?void 0:e.dead,date_dead:null==e?void 0:e.date_dead,proyect_investigation_id:null}),this.form.get("dead").value?this.calculoEdad(this.form.get("birth").value,this.form.get("date_dead").value):this.calculoEdad(this.form.get("birth").value)}onSelectCountry(){this.form.get("state_id").setValue(null,{emitEvent:!1}),this.form.get("city_id").setValue(null,{emitEvent:!1})}onSelectState(){this.form.get("city_id").setValue(null,{emitEvent:!1})}onSelectCity(){}_filterStates(e){const a="string"==typeof e?e.toLowerCase():"";if(this.states)return this.states.filter(o=>o.name.toLowerCase().includes(a))}getNameStates(e){if(e&&this.states)return this.states.find(a=>a.id===e).name}_filterCities(e){const a="string"==typeof e?e.toLowerCase():"";if(this.cities)return this.cities.filter(o=>o.name.toLowerCase().includes(a))}getNameCities(e){if(e&&this.cities)return this.cities.find(a=>a.id===e).name}_filterMedicalInstitutions(e){const a="string"==typeof e?e.toLowerCase():"";if(this.medicaInstitutions)return this.medicaInstitutions.filter(o=>o.name.toLowerCase().includes(a))}getNameMedicalInst(e){if(e&&this.medicaInstitutions)return this.medicaInstitutions.find(a=>a.id===e).name}_filterDoctors(e){const a="string"==typeof e?e.toLowerCase():"";if(this.doctors)return this.doctors.filter(o=>o.name.toLowerCase().includes(a)||o.last_name.toLowerCase().includes(a))}getNameDoctor(e){if(e&&this.doctors){const a=this.doctors.find(o=>o.id===e);return`${a.name} ${a.last_name}`}}setCode(e){const a=e.value.slice(1);this.patientEdit?this.form.get("code").setValue(`${a}-${this.patientEdit.id}`):this.patientService.lastId().subscribe(o=>{this.form.get("code").setValue(`${a}-${o+1}`)})}addCity(){setTimeout(()=>{this.autocomplete.closePanel()},100),this.locationService.openDialog("cities",null,1e4),this.subscriptions.push(this.locationService.resultCitiesItems$.subscribe(e=>{var a,o,r;if((null===(a=null==e?void 0:e.data)||void 0===a?void 0:a.data.length)>=1){this.cities=null===(o=null==e?void 0:e.data)||void 0===o?void 0:o.data,this.ubicationService.setCitiesItems(null===(r=null==e?void 0:e.data)||void 0===r?void 0:r.data);const s=Math.max.apply(Math,this.cities.map(function(f){return f.id}));this.form.get("city_id").setValue(s)}}))}addMedicaInstitutions(e){const r={title:"Agrega Instituci\xf3n M\xe9dica",data:[{nameControl:"name",type:"text",value:"",validators:[c.kI.required],label:"Nombre",class:"mvd-col1--1"}]};setTimeout(()=>this.dialog.open(H.Q,{width:"300px",data:r}).afterClosed().subscribe(f=>{f&&this.medicalInstitutionService.storeMedicalInstitution(f).pipe((0,T.q)(1)).subscribe(x=>{this.medicaInstitutions=[...this.medicaInstitutions,x],this.patientService.setMedicalInstitutionsItems(this.medicaInstitutions),e.setValue(x.id)})}),100)}addDoctor(e){const r={title:"Agrega M\xe9dico",data:[{nameControl:"name",type:"text",value:"",validators:[c.kI.required],label:"Nombre",class:"mvd-col1--1"},{nameControl:"last_name",type:"text",value:"",validators:[c.kI.required],label:"Apellido",class:"mvd-col1--1"},{nameControl:"contact",type:"text",value:"",label:"Contacto",class:"mvd-col1--1"}]};setTimeout(()=>this.dialog.open(H.Q,{width:"300px",data:r}).afterClosed().subscribe(f=>{f&&this.doctorService.storeDoctor(f).pipe((0,T.q)(1)).subscribe(x=>{this.doctors=[...this.doctors,x],this.patientService.setDoctorsItems(this.doctors),e.setValue(x.id)})}),100)}ngOnDestroy(){this.subscriptions.map(e=>e.unsubscribe())}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(c.qu),t.Y36(ft._),t.Y36(y.$),t.Y36(gt.a),t.Y36(ht.d),t.Y36(xt.e),t.Y36(Z.uw))},i.\u0275cmp=t.Xpm({type:i,selectors:[["mvd-patient-identification"]],viewQuery:function(e,a){if(1&e&&t.Gf(D.ZL,5),2&e){let o;t.iGM(o=t.CRH())&&(a.autocomplete=o.first)}},outputs:{dataIdentification:"dataIdentification"},decls:2,vars:3,consts:[[4,"ngIf"],["fxFlex","100","fxLayoutGap","6px","fxLayout","row wrap","fxLayoutAlign","start center",3,"formGroup",4,"ngIf"],["fxFlex","100","fxLayoutGap","6px","fxLayout","row wrap","fxLayoutAlign","start center",3,"formGroup"],["appearance","outline","fxFlex","16","fxFlex.lt-md","100","fxFlexOffset.lt-md","0","fxFlexOffset","calc(62% + 3rem)",1,""],["placeholder","Seleccione...","formControlName","type_patient",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"campo","name"],["appearance","outline","fxFlex","16","fxFlex.lt-md","100",1,""],["formControlName","code","matInput","","type","text","placeholder","C\xf3digo Paciente"],["appearance","outline","fxFlex","calc(30% + 6px)","fxFlex.lt-md","100",1,""],["formControlName","name","type","text","matInput","","placeholder","Nombre"],["formControlName","last_name","type","text","matInput","","placeholder","Apellidos","aria-autocomplete","off"],["appearance","outline","fxFlex","11","fxFlex.lt-md","100",1,""],["formControlName","birth","type","datetime","matInput","","placeholder","Fecha de Naciemiento",3,"matDatepicker","dateChange"],["matSuffix","",3,"for"],["picker",""],["color","primary","formControlName","dead","fxFlex","8",1,"checkbox"],["class","","appearance","outline","fxFlex","11","fxFlex.lt-md","100",4,"ngIf"],["appearance","outline","fxFlex","10","fxFlex.lt-md","100",1,""],["matInput","","placeholder","Edad","type","number","readonly","","formControlName","age"],["placeholder","Seleccione...","formControlName","type_doc"],["formControlName","n_doc","type","text","matInput","","placeholder","Documento de identidad"],["appearance","outline","fxFlex","calc(32% + 6px)","fxFlex.lt-md","100",1,""],["formControlName","email","type","email","matInput","","placeholder","Correo Electr\xf3nico"],["formControlName","address","type","text","matInput","","placeholder","Direcci\xf3n"],["appearance","outline","fxFlex","calc(16% + 6px)","fxFlex.lt-md","100",1,""],["formControlName","phone","type","tel","matInput","","placeholder","Tel\xe9fono"],["class","","appearance","outline","fxFlex","calc(16% + 6px)","fxFlex.lt-md","100",4,"ngIf"],["placeholder","Seleccione...","formControlName","gender"],["placeholder","Seleccione...","formControlName","breed_id"],["formControlName","registroH","type","tel","matInput","","placeholder","RegistroH"],["appearance","outline","fxFlex","calc(16% + 6px)","fxFlex.lt-md","100","fxLayoutAlign","none start",1,"checkbox"],["formControlName","ashkenasi"],["fxFlex","100","fxLayout","row wrap","fxLayoutGap","1rem","fxLayoutAlign","start stretch",1,"content-column-checkbox"],["appearance","outline","fxFlex","100","fxFlex.lt-md","100",1,""],["rows","5","formControlName","obs","matInput","","placeholder","Detalle, comentario o notas, relevantes sobre el paciente"],[3,"value"],["formControlName","date_dead","type","datetime","matInput","","placeholder","Fecha defunci\xf3n",3,"matDatepicker","dateChange"],["placeholder","Seleccione Nacionalidad...","formControlName","nationality_id"],["placeholder","Seleccione Pa\xeds...","formControlName","country_id",3,"selectionChange"],["matInput","","aria-label","Departamento","formControlName","state_id","type","text",3,"matAutocomplete"],[3,"displayWith","optionSelected"],["auto","matAutocomplete"],["matInput","","aria-label","Ciudad","formControlName","city_id","type","text",3,"matAutocomplete"],[3,"displayWith"],["autoCity","matAutocomplete"],["type","button","matSuffix","","mat-icon-button","","aria-label","Add",1,"add-icon-input",3,"click"],["color","primary"],["matInput","","aria-label","Instituci\xf3n M\xe9dica","formControlName","medical_institution_id","type","text",3,"matAutocomplete"],["matInput","","aria-label","M\xe9dico Tratante","formControlName","doctor_id","type","text",3,"matAutocomplete"],["matInput","","aria-label","Derivado por","formControlName","derived_by_id","type","text",3,"matAutocomplete"],["matInput","","aria-label","Instituci\xf3n de cirug\xeda","formControlName","surgery_institution_id","type","text",3,"matAutocomplete"],["placeholder","Seleccione...","formControlName","proyect_investigation_id"]],template:function(e,a){1&e&&(t.YNc(0,Bt,2,1,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,a.dataSelects$))},directives:[u.O5,c._Y,c.JL,d.yH,d.SQ,d.xw,d.Wh,c.sg,g.KE,d.UT,g.hX,W.gD,c.JJ,c.u,u.sg,$.ey,g.TO,j.g,c.Fj,k.Nt,C.hl,C.nW,g.R9,C.Mq,R.oG,c.wV,D.ZL,D.XC,S.lW,N.Hw],pipes:[u.Ov,vt.i,bt.y],styles:[".checkbox[_ngcontent-%COMP%]{margin-bottom:1rem}.add-icon-input[_ngcontent-%COMP%]{margin-right:-12px;padding-bottom:5px}.add-icon-input[_ngcontent-%COMP%]   .mat-button-ripple.mat-ripple[_ngcontent-%COMP%], .add-icon-input[_ngcontent-%COMP%]   .mat-button-focus-overlay[_ngcontent-%COMP%]{inset:-3px 0 3px -1px!important}"]}),i})();var G=l(2654),Ht=l(7224);let ct=(()=>{class i{constructor(e,a,o){this.http=e,this.patientService=a,this.snackBar=o,this.studiesSubject$=new b.X([])}setPatient(e){this.patient=e}setStudies(e){this.studiesSubject$.next(e)}get studies$(){return this.studiesSubject$.value.length||this.getStudies().subscribe(),this.studiesSubject$.asObservable()}storeTracingTreatments(e){return this.http.post(`${_.N.API}treatments`,e).pipe((0,m.U)(a=>(this.patient.studies=a.data,this.patientService.setPatientOnEdit(this.patient),this.openSnackBar("Se cre\xf3 correctamente","success-snack-bar"),a.data)))}removeTracingTreatments(e){return this.http.post(`${_.N.API}treatments/${e}`,{patient_id:this.patient.id}).pipe((0,m.U)(o=>(this.patient.studies=o.data,this.patientService.setPatientOnEdit(this.patient),this.openSnackBar("Se elimin\xf3 correctamente","success-snack-bar"),o.data)))}storeTreatments(e){return this.http.post(`${_.N.API}treatments`,e).pipe((0,m.U)(a=>{let o=this.studiesSubject$.getValue();return a.data&&(o=[...o,a.data]),this.setStudies(o),this.openSnackBar("Se cre\xf3 correctamente","success-snack-bar"),a.data}))}getStudies(){return this.http.get(`${_.N.API}treatments`,{params:(new A.LE).set("page",1).set("sort","asc").set("per_page",1e3)}).pipe((0,m.U)(e=>(this.setStudies(e.data.data.length?e.data.data:[]),console.log(e),e.data.data)))}openSnackBar(e,a,o=""){this.snackBar.open(e,o,{duration:2e3,horizontalPosition:"center",verticalPosition:"top",panelClass:a})}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(A.eN),t.LFG(y.$),t.LFG(p.ux))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var lt=l(9814),K=l(6891);function jt(i,n){1&i&&(t.TgZ(0,"mat-form-field",62)(1,"mat-label"),t._uU(2,"Talla en m"),t.qZA(),t._UZ(3,"input",63),t.qZA())}function Rt(i,n){1&i&&(t.TgZ(0,"mat-form-field",62)(1,"mat-label"),t._uU(2,"Peso en Kg"),t.qZA(),t._UZ(3,"input",64),t.qZA())}function Vt(i,n){1&i&&(t.TgZ(0,"mat-form-field",62)(1,"mat-label"),t._uU(2,"IMC"),t.qZA(),t._UZ(3,"input",65),t.qZA())}function zt(i,n){1&i&&(t.TgZ(0,"mat-radio-group",66)(1,"mat-radio-button",67),t._uU(2,"Actual"),t.qZA(),t.TgZ(3,"mat-radio-button",67),t._uU(4,"Pasado"),t.qZA()()),2&i&&(t.xp6(1),t.Q6J("value",1),t.xp6(2),t.Q6J("value",0))}function Wt(i,n){if(1&i&&(t.TgZ(0,"mat-option",70),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.name," ")}}function Xt(i,n){if(1&i&&(t.TgZ(0,"mat-form-field",68)(1,"mat-label"),t._uU(2,"Cantidad de Cigarrillos"),t.qZA(),t.TgZ(3,"mat-select",69),t.YNc(4,Wt,2,2,"mat-option",56),t.qZA()()),2&i){const e=t.oxw().ngIf;t.xp6(4),t.Q6J("ngForOf",e.fumador_cant)}}function Kt(i,n){if(1&i&&(t.TgZ(0,"mat-option",70),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.name," ")}}function te(i,n){if(1&i&&(t.TgZ(0,"mat-form-field",68)(1,"mat-label"),t._uU(2,"Per\xedodo"),t.qZA(),t.TgZ(3,"mat-select",71),t.YNc(4,Kt,2,2,"mat-option",56),t.qZA()()),2&i){const e=t.oxw().ngIf;t.xp6(4),t.Q6J("ngForOf",e.vicio_periodo)}}function ee(i,n){1&i&&(t.TgZ(0,"mat-radio-group",72)(1,"mat-radio-button",67),t._uU(2,"Actual"),t.qZA(),t.TgZ(3,"mat-radio-button",67),t._uU(4,"Pasado"),t.qZA()()),2&i&&(t.xp6(1),t.Q6J("value",1),t.xp6(2),t.Q6J("value",0))}function ie(i,n){if(1&i&&(t.TgZ(0,"mat-option",70),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.name," ")}}function ae(i,n){if(1&i&&(t.TgZ(0,"mat-form-field",68)(1,"mat-label"),t._uU(2,"Litros Diarios"),t.qZA(),t.TgZ(3,"mat-select",73),t.YNc(4,ie,2,2,"mat-option",56),t.qZA()()),2&i){const e=t.oxw().ngIf;t.xp6(4),t.Q6J("ngForOf",e.alcoholista_cant)}}function oe(i,n){if(1&i&&(t.TgZ(0,"mat-option",70),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.name," ")}}function ne(i,n){if(1&i&&(t.TgZ(0,"mat-form-field",68)(1,"mat-label"),t._uU(2,"Per\xedodo"),t.qZA(),t.TgZ(3,"mat-select",74),t.YNc(4,oe,2,2,"mat-option",56),t.qZA()()),2&i){const e=t.oxw().ngIf;t.xp6(4),t.Q6J("ngForOf",e.vicio_periodo)}}function re(i,n){1&i&&(t.TgZ(0,"mat-radio-group",75)(1,"mat-radio-button",67),t._uU(2,"Actual"),t.qZA(),t.TgZ(3,"mat-radio-button",67),t._uU(4,"Pasado"),t.qZA()()),2&i&&(t.xp6(1),t.Q6J("value",1),t.xp6(2),t.Q6J("value",0))}function se(i,n){1&i&&(t.TgZ(0,"mat-form-field",76)(1,"mat-label"),t._uU(2,"Tipo de droga/s"),t.qZA(),t._UZ(3,"input",77),t.qZA())}function ce(i,n){if(1&i&&(t.TgZ(0,"mat-option",70),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.name," ")}}function le(i,n){if(1&i&&(t.TgZ(0,"mat-form-field",68)(1,"mat-label"),t._uU(2,"Per\xedodo"),t.qZA(),t.TgZ(3,"mat-select",78),t.YNc(4,ce,2,2,"mat-option",56),t.qZA()()),2&i){const e=t.oxw().ngIf;t.xp6(4),t.Q6J("ngForOf",e.vicio_periodo)}}function me(i,n){1&i&&(t.TgZ(0,"mat-form-field",29)(1,"mat-label"),t._uU(2,"En donde"),t.qZA(),t._UZ(3,"input",79),t.qZA())}function de(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",80)(1,"mat-label"),t._uU(2,"Fecha"),t.qZA(),t.TgZ(3,"input",81),t.NdJ("click",function(){return t.CHM(e),t.MAs(6).open()})("dateChange",function(o){return t.CHM(e),t.oxw(3).formatDate(o,"rt_date")}),t.qZA(),t._UZ(4,"mat-datepicker-toggle",82)(5,"mat-datepicker",null,83),t.qZA()}if(2&i){const e=t.MAs(6);t.xp6(3),t.Q6J("matDatepicker",e),t.xp6(1),t.Q6J("for",e)}}function pe(i,n){if(1&i&&(t.TgZ(0,"mat-option",70),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.name," ")}}function _e(i,n){if(1&i&&(t.TgZ(0,"mat-form-field",68)(1,"mat-label"),t._uU(2,"Per\xedodo"),t.qZA(),t.TgZ(3,"mat-select",84),t.YNc(4,pe,2,2,"mat-option",56),t.qZA()()),2&i){const e=t.oxw().ngIf;t.xp6(4),t.Q6J("ngForOf",e.anticonceptivos_periodo)}}function ue(i,n){if(1&i&&(t.TgZ(0,"mat-option",70),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.name," ")}}function fe(i,n){if(1&i&&(t.TgZ(0,"mat-form-field",68)(1,"mat-label"),t._uU(2,"Per\xedodo"),t.qZA(),t.TgZ(3,"mat-select",85),t.YNc(4,ue,2,2,"mat-option",56),t.qZA()()),2&i){const e=t.oxw().ngIf;t.xp6(4),t.Q6J("ngForOf",e.amamantar_periodo)}}function ge(i,n){if(1&i&&(t.TgZ(0,"mat-option",70),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.name," ")}}function he(i,n){if(1&i&&(t.TgZ(0,"mat-form-field",68)(1,"mat-label"),t._uU(2,"Per\xedodo"),t.qZA(),t.TgZ(3,"mat-select",86),t.YNc(4,ge,2,2,"mat-option",56),t.qZA()()),2&i){const e=t.oxw().ngIf;t.xp6(4),t.Q6J("ngForOf",e.hormonas_periodo)}}function xe(i,n){1&i&&(t.TgZ(0,"mat-form-field",29)(1,"mat-label"),t._uU(2,"Tipo TRH"),t.qZA(),t._UZ(3,"input",87),t.qZA())}function ve(i,n){1&i&&(t.TgZ(0,"mat-form-field",29)(1,"mat-label"),t._uU(2,"Cuales"),t.qZA(),t._UZ(3,"input",88),t.qZA())}function be(i,n){if(1&i&&(t.TgZ(0,"mat-option",70),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.name," ")}}function Ze(i,n){if(1&i&&(t.TgZ(0,"mat-form-field",89)(1,"mat-label"),t._uU(2,"Frecuencia"),t.qZA(),t.TgZ(3,"mat-select",90),t.YNc(4,be,2,2,"mat-option",56),t.qZA()()),2&i){const e=t.oxw().ngIf;t.xp6(4),t.Q6J("ngForOf",e.mamografia_frecuencia)}}function Te(i,n){1&i&&(t.TgZ(0,"mat-form-field",91)(1,"mat-label"),t._uU(2,"Indique otros"),t.qZA(),t._UZ(3,"input",92),t.qZA())}function Ce(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",93)(1,"mat-label"),t._uU(2,"Fecha \xfaltima"),t.qZA(),t.TgZ(3,"input",94),t.NdJ("dateChange",function(o){return t.CHM(e),t.oxw(3).formatDate(o,"mamografia_date_ultima")})("click",function(){return t.CHM(e),t.MAs(6).open()}),t.qZA(),t._UZ(4,"mat-datepicker-toggle",82)(5,"mat-datepicker",null,83),t.qZA()}if(2&i){const e=t.MAs(6);t.xp6(3),t.Q6J("matDatepicker",e),t.xp6(1),t.Q6J("for",e)}}function ye(i,n){if(1&i&&(t.TgZ(0,"mat-option",70),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.name," ")}}function Ae(i,n){if(1&i&&(t.TgZ(0,"mat-form-field",89)(1,"mat-label"),t._uU(2,"Frecuencia"),t.qZA(),t.TgZ(3,"mat-select",95),t.YNc(4,ye,2,2,"mat-option",56),t.qZA()()),2&i){const e=t.oxw().ngIf;t.xp6(4),t.Q6J("ngForOf",e.rm_mamaria_frecuencia)}}function Fe(i,n){1&i&&(t.TgZ(0,"mat-form-field",91)(1,"mat-label"),t._uU(2,"Indique otros"),t.qZA(),t._UZ(3,"input",96),t.qZA())}function Se(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",93)(1,"mat-label"),t._uU(2,"Fecha \xfaltima"),t.qZA(),t.TgZ(3,"input",97),t.NdJ("dateChange",function(o){return t.CHM(e),t.oxw(3).formatDate(o,"rm_mamaria_date_ultima")})("click",function(){return t.CHM(e),t.MAs(6).open()}),t.qZA(),t._UZ(4,"mat-datepicker-toggle",82)(5,"mat-datepicker",null,83),t.qZA()}if(2&i){const e=t.MAs(6);t.xp6(3),t.Q6J("matDatepicker",e),t.xp6(1),t.Q6J("for",e)}}function Ie(i,n){if(1&i&&(t.TgZ(0,"mat-option",70),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.name," ")}}function qe(i,n){if(1&i&&(t.TgZ(0,"mat-form-field",89)(1,"mat-label"),t._uU(2,"Frecuencia"),t.qZA(),t.TgZ(3,"mat-select",98),t.YNc(4,Ie,2,2,"mat-option",56),t.qZA()()),2&i){const e=t.oxw().ngIf;t.xp6(4),t.Q6J("ngForOf",e.pap_frecuencia)}}function Ne(i,n){1&i&&(t.TgZ(0,"mat-form-field",91)(1,"mat-label"),t._uU(2,"Indique otros"),t.qZA(),t._UZ(3,"input",99),t.qZA())}function Ue(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",93)(1,"mat-label"),t._uU(2,"Fecha \xfaltima"),t.qZA(),t.TgZ(3,"input",100),t.NdJ("click",function(){return t.CHM(e),t.MAs(6).open()})("dateChange",function(o){return t.CHM(e),t.oxw(3).formatDate(o,"pap_date_ultima")}),t.qZA(),t._UZ(4,"mat-datepicker-toggle",82)(5,"mat-datepicker",null,83),t.qZA()}if(2&i){const e=t.MAs(6);t.xp6(3),t.Q6J("matDatepicker",e),t.xp6(1),t.Q6J("for",e)}}function we(i,n){if(1&i&&(t.TgZ(0,"mat-option",70),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.name," ")}}function Je(i,n){if(1&i&&(t.TgZ(0,"mat-form-field",89)(1,"mat-label"),t._uU(2,"Frecuencia"),t.qZA(),t.TgZ(3,"mat-select",101),t.YNc(4,we,2,2,"mat-option",56),t.qZA()()),2&i){const e=t.oxw().ngIf;t.xp6(4),t.Q6J("ngForOf",e.fecatest_frecuencia)}}function ke(i,n){1&i&&(t.TgZ(0,"mat-form-field",91)(1,"mat-label"),t._uU(2,"Indique otros"),t.qZA(),t._UZ(3,"input",102),t.qZA())}function Qe(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",93)(1,"mat-label"),t._uU(2,"Fecha \xfaltima"),t.qZA(),t.TgZ(3,"input",103),t.NdJ("dateChange",function(o){return t.CHM(e),t.oxw(3).formatDate(o,"fecatest_date_ultima")})("click",function(){return t.CHM(e),t.MAs(6).open()}),t.qZA(),t._UZ(4,"mat-datepicker-toggle",82)(5,"mat-datepicker",null,83),t.qZA()}if(2&i){const e=t.MAs(6);t.xp6(3),t.Q6J("matDatepicker",e),t.xp6(1),t.Q6J("for",e)}}function Oe(i,n){if(1&i&&(t.TgZ(0,"mat-option",70),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.name," ")}}function Pe(i,n){if(1&i&&(t.TgZ(0,"mat-form-field",89)(1,"mat-label"),t._uU(2,"Frecuencia"),t.qZA(),t.TgZ(3,"mat-select",104),t.YNc(4,Oe,2,2,"mat-option",56),t.qZA()()),2&i){const e=t.oxw().ngIf;t.xp6(4),t.Q6J("ngForOf",e.fibrocolonoscopia_frecuencia)}}function Me(i,n){1&i&&(t.TgZ(0,"mat-form-field",91)(1,"mat-label"),t._uU(2,"Indique otros"),t.qZA(),t._UZ(3,"input",105),t.qZA())}function Ye(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",93)(1,"mat-label"),t._uU(2,"Fecha \xfaltima"),t.qZA(),t.TgZ(3,"input",106),t.NdJ("dateChange",function(o){return t.CHM(e),t.oxw(3).formatDate(o,"fibrocolonoscopia_date_ultima")})("click",function(){return t.CHM(e),t.MAs(6).open()}),t.qZA(),t._UZ(4,"mat-datepicker-toggle",82)(5,"mat-datepicker",null,83),t.qZA()}if(2&i){const e=t.MAs(6);t.xp6(3),t.Q6J("matDatepicker",e),t.xp6(1),t.Q6J("for",e)}}function De(i,n){if(1&i&&(t.TgZ(0,"mat-option",70),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.name," ")}}function Le(i,n){if(1&i&&(t.TgZ(0,"mat-form-field",89)(1,"mat-label"),t._uU(2,"Frecuencia"),t.qZA(),t.TgZ(3,"mat-select",107),t.YNc(4,De,2,2,"mat-option",56),t.qZA()()),2&i){const e=t.oxw().ngIf;t.xp6(4),t.Q6J("ngForOf",e.fibrogastroscopia_frecuencia)}}function Ee(i,n){1&i&&(t.TgZ(0,"mat-form-field",91)(1,"mat-label"),t._uU(2,"Indique otros"),t.qZA(),t._UZ(3,"input",108),t.qZA())}function $e(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",93)(1,"mat-label"),t._uU(2,"Fecha \xfaltima"),t.qZA(),t.TgZ(3,"input",109),t.NdJ("dateChange",function(o){return t.CHM(e),t.oxw(3).formatDate(o,"fibrogastroscopia_date_ultima")})("click",function(){return t.CHM(e),t.MAs(6).open()}),t.qZA(),t._UZ(4,"mat-datepicker-toggle",82)(5,"mat-datepicker",null,83),t.qZA()}if(2&i){const e=t.MAs(6);t.xp6(3),t.Q6J("matDatepicker",e),t.xp6(1),t.Q6J("for",e)}}function Be(i,n){if(1&i&&(t.TgZ(0,"mat-option",70),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.name," ")}}function Ge(i,n){if(1&i&&(t.TgZ(0,"mat-form-field",89)(1,"mat-label"),t._uU(2,"Frecuencia"),t.qZA(),t.TgZ(3,"mat-select",110),t.YNc(4,Be,2,2,"mat-option",56),t.qZA()()),2&i){const e=t.oxw().ngIf;t.xp6(4),t.Q6J("ngForOf",e.psa_frecuencia)}}function He(i,n){1&i&&(t.TgZ(0,"mat-form-field",91)(1,"mat-label"),t._uU(2,"Indique otros"),t.qZA(),t._UZ(3,"input",111),t.qZA())}function je(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",112)(1,"mat-label"),t._uU(2,"Fecha \xfaltima"),t.qZA(),t.TgZ(3,"input",113),t.NdJ("dateChange",function(o){return t.CHM(e),t.oxw(3).formatDate(o,"psa_date_ultima")})("click",function(){return t.CHM(e),t.MAs(6).open()}),t.qZA(),t._UZ(4,"mat-datepicker-toggle",82)(5,"mat-datepicker",null,83),t.qZA()}if(2&i){const e=t.MAs(6);t.xp6(3),t.Q6J("matDatepicker",e),t.xp6(1),t.Q6J("for",e)}}function Re(i,n){1&i&&(t.TgZ(0,"mat-form-field",114)(1,"mat-label"),t._uU(2,"Resultado"),t.qZA(),t._UZ(3,"input",115),t.qZA())}function Ve(i,n){1&i&&(t.TgZ(0,"mat-checkbox",116),t._uU(1,"Indirectos "),t.qZA())}function ze(i,n){1&i&&(t.TgZ(0,"mat-form-field",117)(1,"mat-label"),t._uU(2,"Tipo Parentesco Indirectos"),t.qZA(),t._UZ(3,"input",118),t.qZA())}function We(i,n){1&i&&(t.TgZ(0,"mat-checkbox",119),t._uU(1,"Directos"),t.qZA())}function Xe(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"p",120)(1,"span",121),t._uU(2),t.qZA(),t.TgZ(3,"span",122)(4,"button",123),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(3).removePatientFamilyAntecedent(r.id)}),t.TgZ(5,"mat-icon"),t._uU(6,"delete_outline"),t.qZA()()()()}if(2&i){const e=n.$implicit;t.xp6(2),t.AsE(" ",null==e||null==e.kinship?null:e.kinship.name,"(",null==e||null==e.topography?null:e.topography.name,")")}}function Ke(i,n){if(1&i&&(t.TgZ(0,"mat-option",70),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function ti(i,n){if(1&i&&(t.TgZ(0,"mat-option",70),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function ei(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"span",124)(1,"button",125),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).submitPatientFamilyAntecedent()}),t.TgZ(2,"mat-icon",126),t._uU(3,"add_circle"),t.qZA()()()}}function ii(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"p",120)(1,"span",121),t._uU(2),t.qZA(),t.TgZ(3,"span",122)(4,"button",123),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(5).removeAntecedent(r.id)}),t.TgZ(5,"mat-icon"),t._uU(6,"delete_outline"),t.qZA()()()()}if(2&i){const e=n.$implicit;t.xp6(2),t.HOy("Topograf\xeda ",e.topography.name,", edad ",e.edad,", Tratamiento ",null==e||null==e.treatment?null:e.treatment.name,", Observaciones ",e.obs,"")}}function ai(i,n){if(1&i&&(t.ynx(0),t.YNc(1,ii,7,4,"p",53),t.BQk()),2&i){const e=t.oxw(4);t.xp6(1),t.Q6J("ngForOf",e.patientEdit.cancer_patient_antecedents)}}function oi(i,n){if(1&i&&(t.TgZ(0,"mat-option",70),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function ni(i,n){if(1&i&&(t.TgZ(0,"mat-form-field",134)(1,"mat-label"),t._uU(2,"Topograf\xeda"),t.qZA(),t.TgZ(3,"mat-select",57),t.YNc(4,oi,2,2,"mat-option",56),t.ALo(5,"async"),t.qZA()()),2&i){const e=t.oxw(4);t.xp6(4),t.Q6J("ngForOf",t.lcZ(5,1,e.topographies))}}function ri(i,n){1&i&&(t.TgZ(0,"mat-form-field",135)(1,"mat-label"),t._uU(2,"Edad"),t.qZA(),t._UZ(3,"input",136),t.qZA())}function si(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"span",137)(1,"button",125),t.NdJ("click",function(){return t.CHM(e),t.oxw(4).submitAntecedent()}),t.TgZ(2,"mat-icon",126),t._uU(3,"add_circle"),t.qZA()()()}}function ci(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"form",52),t.YNc(1,ai,2,1,"ng-container",127),t.YNc(2,ni,6,3,"mat-form-field",128),t.YNc(3,ri,4,0,"mat-form-field",129),t.TgZ(4,"mvd-input-select-add-item",130),t.NdJ("addOption",function(o){return t.CHM(e),t.oxw(3).add(o)})("changeValue",function(o){return t.CHM(e),t.oxw(3).change(o)}),t.qZA(),t.TgZ(5,"mat-form-field",131)(6,"mat-label"),t._uU(7,"Observaciones"),t.qZA(),t._UZ(8,"input",132),t.qZA(),t.YNc(9,si,4,0,"span",133),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("formGroup",e.formAntecedents),t.xp6(1),t.Q6J("ngIf",null==e.patientEdit?null:e.patientEdit.cancer_patient_antecedents),t.xp6(1),t.Q6J("ngIf",e.form.get("anterior").value),t.xp6(1),t.Q6J("ngIf",e.form.get("anterior").value),t.xp6(1),t.Q6J("value",e.valueSelect)("options",e.options)("namePlaceholder","Tratamientos"),t.xp6(5),t.Q6J("ngIf",e.form.get("anterior").value)}}function li(i,n){if(1&i&&(t.TgZ(0,"div",3)(1,"div",4)(2,"h3",5),t._uU(3,"Factores de riesgo"),t.qZA(),t.TgZ(4,"div",6)(5,"mat-checkbox",7),t._uU(6,"IMC"),t.qZA(),t.YNc(7,jt,4,0,"mat-form-field",8),t.YNc(8,Rt,4,0,"mat-form-field",8),t.YNc(9,Vt,4,0,"mat-form-field",8),t.qZA(),t.TgZ(10,"div",6)(11,"mat-checkbox",9),t._uU(12,"Fumador "),t.qZA(),t.YNc(13,zt,5,2,"mat-radio-group",10),t.YNc(14,Xt,5,1,"mat-form-field",11),t.YNc(15,te,5,1,"mat-form-field",11),t.qZA(),t.TgZ(16,"div",6)(17,"mat-checkbox",12),t._uU(18,"Alcoholista "),t.qZA(),t.YNc(19,ee,5,2,"mat-radio-group",13),t.YNc(20,ae,5,1,"mat-form-field",11),t.YNc(21,ne,5,1,"mat-form-field",11),t.qZA(),t.TgZ(22,"div",6)(23,"mat-checkbox",14),t._uU(24,"Drogas "),t.qZA(),t.YNc(25,re,5,2,"mat-radio-group",15),t.YNc(26,se,4,0,"mat-form-field",16),t.YNc(27,le,5,1,"mat-form-field",11),t.qZA(),t.TgZ(28,"div",6)(29,"mat-checkbox",17),t._uU(30,"Recibi\xf3 RT previamente "),t.qZA(),t.YNc(31,me,4,0,"mat-form-field",18),t.YNc(32,de,7,2,"mat-form-field",19),t.qZA(),t.TgZ(33,"div",6)(34,"mat-checkbox",20),t._uU(35,"Utiliz\xf3 anticoncept\xedvos orales"),t.qZA(),t.YNc(36,_e,5,1,"mat-form-field",11),t.qZA(),t.TgZ(37,"div",6)(38,"mat-checkbox",21),t._uU(39,"Di\xf3 de amamantar "),t.qZA(),t.YNc(40,fe,5,1,"mat-form-field",11),t.qZA(),t.TgZ(41,"div",6)(42,"mat-checkbox",22),t._uU(43,"Realiz\xf3 TRH "),t.qZA(),t.YNc(44,he,5,1,"mat-form-field",11),t.YNc(45,xe,4,0,"mat-form-field",18),t.qZA(),t.TgZ(46,"div",6)(47,"mat-form-field",23)(48,"mat-label"),t._uU(49,"Edad menarca"),t.qZA(),t._UZ(50,"input",24),t.qZA(),t.TgZ(51,"mat-form-field",23)(52,"mat-label"),t._uU(53,"Edad primer embarazo"),t.qZA(),t._UZ(54,"input",25),t.qZA(),t.TgZ(55,"mat-form-field",23)(56,"mat-label"),t._uU(57,"Edad menopausia"),t.qZA(),t._UZ(58,"input",26),t.qZA(),t.TgZ(59,"mat-checkbox",27),t._uU(60," Menopausia Quir\xfargica"),t.qZA()(),t.TgZ(61,"div",6)(62,"mat-checkbox",28),t._uU(63,"Factores de riesgo ambientales"),t.qZA(),t.YNc(64,ve,4,0,"mat-form-field",18),t.qZA(),t.TgZ(65,"div",6)(66,"mat-form-field",29)(67,"mat-label"),t._uU(68,"Factor de riesgo especifico"),t.qZA(),t._UZ(69,"input",30),t.qZA()()(),t.TgZ(70,"div",4)(71,"h3",5),t._uU(72,"Estudios de Screening"),t.qZA(),t.TgZ(73,"div",6)(74,"mat-checkbox",31),t._uU(75,"Mamograf\xeda / Ecograf\xeda "),t.qZA(),t.YNc(76,Ze,5,1,"mat-form-field",32),t.YNc(77,Te,4,0,"mat-form-field",33),t.YNc(78,Ce,7,2,"mat-form-field",34),t.qZA(),t.TgZ(79,"div",6)(80,"mat-checkbox",35),t._uU(81,"RM Mamaria "),t.qZA(),t.YNc(82,Ae,5,1,"mat-form-field",32),t.YNc(83,Fe,4,0,"mat-form-field",33),t.YNc(84,Se,7,2,"mat-form-field",34),t.qZA(),t.TgZ(85,"div",6)(86,"mat-checkbox",36),t._uU(87,"Se realiza PAP "),t.qZA(),t.YNc(88,qe,5,1,"mat-form-field",32),t.YNc(89,Ne,4,0,"mat-form-field",33),t.YNc(90,Ue,7,2,"mat-form-field",34),t.qZA(),t.TgZ(91,"div",6)(92,"mat-checkbox",37),t._uU(93,"Fecatest"),t.qZA(),t.YNc(94,Je,5,1,"mat-form-field",32),t.YNc(95,ke,4,0,"mat-form-field",33),t.YNc(96,Qe,7,2,"mat-form-field",34),t.qZA(),t.TgZ(97,"div",6)(98,"mat-checkbox",38),t._uU(99,"Fibrocolonoscop\xeda "),t.qZA(),t.YNc(100,Pe,5,1,"mat-form-field",32),t.YNc(101,Me,4,0,"mat-form-field",33),t.YNc(102,Ye,7,2,"mat-form-field",34),t.qZA(),t.TgZ(103,"div",6)(104,"mat-checkbox",39),t._uU(105,"Fibrogastroscop\xeda "),t.qZA(),t.YNc(106,Le,5,1,"mat-form-field",32),t.YNc(107,Ee,4,0,"mat-form-field",33),t.YNc(108,$e,7,2,"mat-form-field",34),t.qZA(),t.TgZ(109,"div",6)(110,"mat-checkbox",40),t._uU(111,"PSA"),t.qZA(),t.YNc(112,Ge,5,1,"mat-form-field",32),t.YNc(113,He,4,0,"mat-form-field",33),t.TgZ(114,"div",41),t.YNc(115,je,7,2,"mat-form-field",42),t.YNc(116,Re,4,0,"mat-form-field",43),t.qZA()()(),t.TgZ(117,"div",4)(118,"h3",5),t._uU(119,"Antecedentes"),t.qZA(),t.TgZ(120,"div",44)(121,"mat-checkbox",45),t._uU(122,"Antecedentes de cancer en Flia."),t.qZA(),t.TgZ(123,"div",46)(124,"div",47),t.YNc(125,Ve,2,0,"mat-checkbox",48),t.YNc(126,ze,4,0,"mat-form-field",49),t.qZA(),t.TgZ(127,"div",50),t.YNc(128,We,2,0,"mat-checkbox",51),t.TgZ(129,"form",52),t.ynx(130),t.YNc(131,Xe,7,2,"p",53),t.TgZ(132,"mat-form-field",54)(133,"mat-label"),t._uU(134,"Parentesco"),t.qZA(),t.TgZ(135,"mat-select",55),t.YNc(136,Ke,2,2,"mat-option",56),t.ALo(137,"async"),t.qZA()(),t.TgZ(138,"mat-form-field",54)(139,"mat-label"),t._uU(140,"Topograf\xeda"),t.qZA(),t.TgZ(141,"mat-select",57),t.YNc(142,ti,2,2,"mat-option",56),t.ALo(143,"async"),t.qZA()(),t.YNc(144,ei,4,0,"span",58),t.BQk(),t.qZA()()()(),t.TgZ(145,"div",59)(146,"mat-checkbox",60),t._uU(147,"Cancer diagnosticado anteriormente"),t.qZA(),t.YNc(148,ci,10,8,"form",61),t.qZA()()()),2&i){const e=t.oxw(2);t.xp6(7),t.Q6J("ngIf",e.form.get("imc").value),t.xp6(1),t.Q6J("ngIf",e.form.get("imc").value),t.xp6(1),t.Q6J("ngIf",e.form.get("imc").value),t.xp6(4),t.Q6J("ngIf",e.form.get("fumador").value),t.xp6(1),t.Q6J("ngIf",e.form.get("fumador").value),t.xp6(1),t.Q6J("ngIf",e.form.get("fumador").value),t.xp6(4),t.Q6J("ngIf",e.form.get("alcoholista").value),t.xp6(1),t.Q6J("ngIf",e.form.get("alcoholista").value),t.xp6(1),t.Q6J("ngIf",e.form.get("alcoholista").value),t.xp6(4),t.Q6J("ngIf",e.form.get("drogas").value),t.xp6(1),t.Q6J("ngIf",e.form.get("drogas").value),t.xp6(1),t.Q6J("ngIf",e.form.get("drogas").value),t.xp6(4),t.Q6J("ngIf",e.form.get("rt").value),t.xp6(1),t.Q6J("ngIf",e.form.get("rt").value),t.xp6(4),t.Q6J("ngIf",e.form.get("anticonceptivos").value),t.xp6(4),t.Q6J("ngIf",e.form.get("amamantar").value),t.xp6(4),t.Q6J("ngIf",e.form.get("hormonas").value),t.xp6(1),t.Q6J("ngIf",e.form.get("hormonas").value),t.xp6(19),t.Q6J("ngIf",e.form.get("ambientales").value),t.xp6(12),t.Q6J("ngIf",e.form.get("mamografia").value),t.xp6(1),t.Q6J("ngIf","otros"===e.form.get("mamografia_frecuencia").value),t.xp6(1),t.Q6J("ngIf",e.form.get("mamografia").value),t.xp6(4),t.Q6J("ngIf",e.form.get("rm_mamaria").value),t.xp6(1),t.Q6J("ngIf","otros"===e.form.get("rm_mamaria_frecuencia").value),t.xp6(1),t.Q6J("ngIf",e.form.get("rm_mamaria").value),t.xp6(4),t.Q6J("ngIf",e.form.get("pap").value),t.xp6(1),t.Q6J("ngIf","otros"===e.form.get("pap_frecuencia").value),t.xp6(1),t.Q6J("ngIf",e.form.get("pap").value),t.xp6(4),t.Q6J("ngIf",e.form.get("fecatest").value),t.xp6(1),t.Q6J("ngIf","otros"===e.form.get("fecatest_frecuencia").value),t.xp6(1),t.Q6J("ngIf",e.form.get("fecatest").value),t.xp6(4),t.Q6J("ngIf",e.form.get("fibrocolonoscopia").value),t.xp6(1),t.Q6J("ngIf","otros"===e.form.get("fibrocolonoscopia_frecuencia").value),t.xp6(1),t.Q6J("ngIf",e.form.get("fibrocolonoscopia").value),t.xp6(4),t.Q6J("ngIf",e.form.get("fibrogastroscopia").value),t.xp6(1),t.Q6J("ngIf","otros"===e.form.get("fibrogastroscopia_frecuencia").value),t.xp6(1),t.Q6J("ngIf",e.form.get("fibrogastroscopia").value),t.xp6(4),t.Q6J("ngIf",e.form.get("psa").value),t.xp6(1),t.Q6J("ngIf","otros"===e.form.get("psa_frecuencia").value),t.xp6(2),t.Q6J("ngIf",e.form.get("psa").value),t.xp6(1),t.Q6J("ngIf",e.form.get("psa").value),t.xp6(9),t.Q6J("ngIf",e.form.get("antecedente").value),t.xp6(1),t.Q6J("ngIf",e.form.get("antecedente_indirectos").value),t.xp6(2),t.Q6J("ngIf",e.form.get("antecedente").value),t.xp6(1),t.Q6J("formGroup",e.formAntecedentsFamily),t.xp6(2),t.Q6J("ngForOf",null==e.patientEdit?null:e.patientEdit.cancer_patient_family_antecedents),t.xp6(5),t.Q6J("ngForOf",t.lcZ(137,50,e.tipoParentescos)),t.xp6(6),t.Q6J("ngForOf",t.lcZ(143,52,e.topographies)),t.xp6(2),t.Q6J("ngIf",e.form.get("antecedente").value),t.xp6(4),t.Q6J("ngIf",e.form.get("anterior").value)}}function mi(i,n){if(1&i&&(t.TgZ(0,"form",1),t.YNc(1,li,149,54,"div",2),t.ALo(2,"async"),t.qZA()),2&i){const e=t.oxw();t.Q6J("formGroup",e.form),t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,e.dataSelects))}}let di=(()=>{class i{constructor(e,a,o,r){this.fb=e,this.patientService=a,this.decimalPipe=o,this.treatmentService=r,this.dataBasic=new t.vpe,this.subscriptions=[],this.subscriptions2=new G.w,this.parentesco=[],this.options=[],this.treatments=[]}ngOnInit(){this.formatOptionsSelect(),this.surgeries=this.patientService.getSurgeries(),this.topographies=this.patientService.getTopographies(),this.dataSelects=this.patientService.dataSelect(),this.tipoParentescos=this.patientService.getTiposParentescos(),this.createForm(),this.subscriptions.push(this.patientService.patientOnEdit.subscribe(e=>{var a,o,r;console.log("PATIENT EDIT",e),this.patientEdit=e,this.formAntecedents.patchValue({patient_id:null===(a=this.patientEdit)||void 0===a?void 0:a.id}),this.formAntecedentsFamily.patchValue({patient_id:null===(o=this.patientEdit)||void 0===o?void 0:o.id}),(null===(r=this.patientEdit)||void 0===r?void 0:r.patient_data)&&this.updateForm(this.patientEdit.patient_data)})),this.patientService.patientOnEdit.pipe((0,Ht.P)()).subscribe(e=>{var a;return this.parentesco=(null===(a=null==e?void 0:e.patient_data)||void 0===a?void 0:a.antecedente_directo_tipo)?e.patient_data.antecedente_directo_tipo.split(","):[]})}formatOptionsSelect(){this.subscriptions2.add(this.treatmentService.studies$.subscribe(e=>{this.treatments=e,this.options=e.map(a=>({value:a.id,text:a.name}))}))}createForm(){this.form=this.fb.group({patient_id:[],date_surgery:[],topography_id:[],treatment_id:[],obs:[],type_surgery_id:[],imc:[!1],imc_talla:[""],imc_peso:[""],imc_imc:[""],fumador:[!1],fumador_activo:[!1],fumador_cant:[""],fumador_periodo:[null],alcoholista:[!1],alcoholista_activo:[!1],alcoholista_cant:[""],alcoholista_periodo:[null],drogas:[!1],drogas_activo:[!1],drogas_tipo:[""],drogas_periodo:[null],rt:[!1],rt_donde:[""],rt_date:[""],anticonceptivos:[!1],anticonceptivos_periodo:[""],amamantar:[!1],amamantar_periodo:[""],hormonas:[!1],hormonas_periodo:[""],tipo_trh:[""],ambientales:[!1],ambientales_cuales:[""],factor_r_especifico:[""],mamografia:[!1],mamografia_frecuencia:[""],mamografia_otros:[""],mamografia_date_ultima:[""],pap:[!1],pap_frecuencia:[""],pap_otros:[""],pap_date_ultima:[""],fecatest:[!1],fecatest_frecuencia:[""],fecatest_otros:[""],fecatest_date_ultima:[""],fibrocolonoscopia:[!1],fibrocolonoscopia_frecuencia:[""],fibrocolonoscopia_otros:[""],fibrocolonoscopia_date_ultima:[""],fibrogastroscopia:[!1],fibrogastroscopia_frecuencia:[""],fibrogastroscopia_otros:[""],fibrogastroscopia_date_ultima:[""],psa:[!1],psa_frecuencia:[""],psa_otros:[""],psa_date_ultima:[""],psa_result:[""],rm_mamaria:[!1],rm_mamaria_frecuencia:[""],rm_mamaria_otros:[""],rm_mamaria_date_ultima:[""],edad_menarca:[""],edad_primer_emb:[""],menopausia_edad:[""],menopausia_quirurgica:[!1],antecedente:[!1],antecedente_directo:[!1],antecedente_directo_tipo:[],antecedente_indirectos:[!1],antecedente_indirectos_tipo:[""],anterior:[!1],date_create:[""],date_update:[""]}),this.formAntecedents=this.fb.group({patient_id:[null],topography_id:[null],treatment_id:[null],obs:[],edad:[null]}),this.formAntecedentsFamily=this.fb.group({topography_id:[null],kinship_id:[null],patient_id:[null]}),this.listenForm()}updateForm(e){var a,o,r;this.form.patchValue({patient_id:e.patient_id,date_surgery:e.date_surgery,topography_id:e.topography_id,treatment_id:null==e?void 0:e.treatment_id,obs:e.obs,type_surgery_id:e.type_surgery_id,imc:e.imc,imc_talla:e.imc_talla,imc_peso:e.imc_peso,imc_imc:e.imc_imc,fumador:e.fumador,fumador_activo:e.fumador_activo,fumador_cant:e.fumador_cant,fumador_periodo:e.fumador_periodo,alcoholista:e.alcoholista,alcoholista_activo:e.alcoholista_activo,alcoholista_cant:e.alcoholista_cant,alcoholista_periodo:e.alcoholista_periodo,drogas:e.drogas,drogas_activo:e.drogas_activo,drogas_tipo:e.drogas_tipo,drogas_periodo:e.drogas_periodo,rt:e.rt,rt_donde:e.rt_donde,rt_date:e.rt_date,anticonceptivos:e.anticonceptivos,anticonceptivos_periodo:e.anticonceptivos_periodo,amamantar:e.amamantar,amamantar_periodo:e.amamantar_periodo,hormonas:e.hormonas,hormonas_periodo:e.hormonas_periodo,tipo_trh:e.tipo_trh,ambientales:e.ambientales,ambientales_cuales:e.ambientales_cuales,factor_r_especifico:e.factor_r_especifico,mamografia:e.mamografia,mamografia_frecuencia:e.mamografia_frecuencia,mamografia_otros:e.mamografia_otros,mamografia_date_ultima:e.mamografia_date_ultima,pap:e.pap,pap_frecuencia:e.pap_frecuencia,pap_otros:e.pap_otros,pap_date_ultima:e.pap_date_ultima,fecatest:e.fecatest,fecatest_frecuencia:e.fecatest_frecuencia,fecatest_otros:e.fecatest_otros,fecatest_date_ultima:e.fecatest_date_ultima,fibrocolonoscopia:e.fibrocolonoscopia,fibrocolonoscopia_frecuencia:e.fibrocolonoscopia_frecuencia,fibrocolonoscopia_otros:e.fibrocolonoscopia_otros,fibrocolonoscopia_date_ultima:e.fibrocolonoscopia_date_ultima,fibrogastroscopia:e.fibrogastroscopia,fibrogastroscopia_frecuencia:e.fibrogastroscopia_frecuencia,fibrogastroscopia_otros:e.fibrogastroscopia_otros,fibrogastroscopia_date_ultima:e.fibrogastroscopia_date_ultima,psa:e.psa,psa_frecuencia:e.psa_frecuencia,psa_otros:e.psa_otros,psa_date_ultima:e.psa_date_ultima,psa_result:e.psa_result,rm_mamaria:e.rm_mamaria,rm_mamaria_frecuencia:e.rm_mamaria_frecuencia,rm_mamaria_otros:e.rm_mamaria_otros,rm_mamaria_date_ultima:e.rm_mamaria_date_ultima,edad_menarca:e.edad_menarca,edad_primer_emb:e.edad_primer_emb,menopausia_edad:e.menopausia_edad,menopausia_quirurgica:e.menopausia_quirurgica,antecedente:e.antecedente,antecedente_directo:e.antecedente_directo,antecedente_directo_tipo:(null===(a=null==e?void 0:e.antecedente_directo_tipo)||void 0===a?void 0:a.split(","))||[],antecedente_indirectos:e.antecedente_indirectos,antecedente_indirectos_tipo:e.antecedente_indirectos_tipo,anterior:!!(null===(o=this.patientEdit)||void 0===o?void 0:o.cancer_patient_antecedents)||e.anterior,anterior_family:!!(null===(r=this.patientEdit)||void 0===r?void 0:r.cancer_patient_family_antecedents)||e.anterior_family,date_create:"",date_update:""})}submitAntecedent(){this.patientService.storeCancerAntecedents(this.formAntecedents.value).pipe((0,T.q)(1)).subscribe(),this.formAntecedents.reset(),this.valueSelect=""}removeAntecedent(e){this.patientService.removeAntecedentCancer(e).pipe((0,T.q)(1)).subscribe()}removeFamilyAntecedent(e){this.patientService.removeFamilyAntecedentCancer(e).pipe((0,T.q)(1)).subscribe()}submitPatientFamilyAntecedent(){this.patientService.storeCancerFamilyAntecedents(this.formAntecedentsFamily.value).pipe((0,T.q)(1)).subscribe(),this.formAntecedentsFamily.reset(),this.valueSelect=""}removePatientFamilyAntecedent(e){this.patientService.removeFamilyAntecedentCancer(e).pipe((0,T.q)(1)).subscribe()}submitAntecedentesDirectos(){const e=this.formAntecedentsFamily.get("topography").value,a=this.formAntecedentsFamily.get("parentesco").value;this.parentesco=[...this.parentesco,`${a} (${e})`],this.formAntecedentsFamily.reset()}removeParentesco(e){this.parentesco=this.parentesco.filter(a=>e!==a)}calculaImc(){const e=this.form.get("imc_talla").value,a=this.form.get("imc_peso").value,o=e*e,r=this.decimalPipe.transform(a/o);e&&a&&o&&r&&this.form.get("imc_imc").setValue(r)}listenForm(){this.form.valueChanges.pipe((0,Y.b)(500)).subscribe(e=>{this.listenImc(e),this.form.get("antecedente_directo_tipo").setValue(this.parentesco),this.dataBasic.emit(this.form)})}formatDate(e,a){let o=e.value;this.form.get(a).setValue(O()(o).format("YYYY-MM-DD HH:mm:ss"))}get treatment_id(){return this.formAntecedents.get("treatment_id")}change(e){this.treatment_id.setValue(e),this.valueSelect=e}add(e){this.subscriptions2.add(this.treatmentService.storeTreatments(e).subscribe())}listenImc(e){let a=this.form.get("imc_talla"),o=this.form.get("imc_peso");a.valueChanges.pipe((0,Y.b)(1e3)).subscribe(r=>this.calculaImc()),o.valueChanges.pipe((0,Y.b)(1e3)).subscribe(r=>this.calculaImc())}checkValue(e){!1===e.imc&&(e.imc_talla||e.imc_peso||e.imc_imc)&&(this.form.get("imc_talla").reset(),this.form.get("imc_peso").reset(),this.form.get("imc_imc").reset()),!1===e.fumador&&(e.fumador_activo||e.fumador_cant)&&(this.form.get("fumador_activo").reset(),this.form.get("fumador_cant").reset()),!1===e.drogas&&(e.drogas_activo||e.drogas_tipo)&&(this.form.get("drogas_activo").reset(),this.form.get("drogas_tipo").reset()),!1===e.rt&&(e.rt_donde||e.rt_date)&&(this.form.get("rt_date").reset(),this.form.get("rt_donde").reset()),!1===e.anticonceptivos&&e.anticonceptivos_periodo&&this.form.get("anticonceptivos_periodo").reset(),!1===e.amamantar&&e.amamantar_periodo&&this.form.get("amamantar_periodo").reset(),!1===e.hormonas&&e.hormonas_periodo&&this.form.get("hormonas_periodo").reset(),!1===e.ambientales&&e.ambientales_cuales&&this.form.get("ambientales_cuales").reset(),!1===e.mamografia&&(e.mamografia_frecuencia||e.mamografia_otros||e.mamografia_date_ultima)&&(this.form.get("mamografia_frecuencia").reset(),this.form.get("mamografia_otros").reset(),this.form.get("mamografia_date_ultima").reset()),!1===e.pap&&(e.pap_frecuencia||e.pap_otros||e.pap_date_ultima)&&(this.form.get("pap_frecuencia").reset(),this.form.get("pap_otros").reset(),this.form.get("pap_date_ultima").reset()),!1===e.antecedente&&(!1!==e.antecedente_directo||!1!==e.antecedente_indirectos)&&(this.form.get("antecedente_directo").setValue(!1),this.form.get("antecedente_directo_tipo").setValue(null),this.form.get("antecedente_indirectos").setValue(!1),this.form.get("antecedente_indirectos_tipo").setValue(null)),!1===e.anterior&&((null!==e.anterior_topography_id||null!==e.anterior_edad)&&(this.form.get("anterior_topography_id").setValue(null),this.form.get("anterior_edad").setValue(null)),(null!==e.anterior_treatment_id||null!==e.anterior_edad)&&(this.form.get("anterior_treatment_id").setValue(null),this.form.get("anterior_edad").setValue(null)),(null!==e.anterior_obs||null!==e.anterior_edad)&&(this.form.get("anterior_obs").setValue(null),this.form.get("anterior_edad").setValue(null)))}ngOnDestroy(){this.subscriptions.map(e=>e.unsubscribe())}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(c.qu),t.Y36(y.$),t.Y36(u.JJ),t.Y36(ct))},i.\u0275cmp=t.Xpm({type:i,selectors:[["mvd-basic-data"]],outputs:{dataBasic:"dataBasic"},features:[t._Bn([u.JJ])],decls:1,vars:1,consts:[["fxFlex","100","fxLayout","column","fxLayoutGap","6px","fxLayoutAlign","start start",3,"formGroup",4,"ngIf"],["fxFlex","100","fxLayout","column","fxLayoutGap","6px","fxLayoutAlign","start start",3,"formGroup"],["class","content-groups","fxFlex","100","fxLayout","column","fxLayoutGap","6px",4,"ngIf"],["fxFlex","100","fxLayout","column","fxLayoutGap","6px",1,"content-groups"],["fxFlex","100","fxLayout","row wrap","fxLayoutGap","6px",1,"content-group-form"],["fxLayout","row","fxFlex","100"],["fxFlex","100","fxLayout","row wrap","fxLayoutGap","2rem","fxLayoutAlign","start stretch",1,"content-column-checkbox"],["color","primary","formControlName","imc","fxFlex","20",1,"checkbox"],["class","","fxFlex","10","appearance","outline","fxFlex.lt-md","100",4,"ngIf"],["color","primary","formControlName","fumador","fxFlex","20",1,"checkbox"],["color","primary","formControlName","fumador_activo","align","'start'",4,"ngIf"],["class","","appearance","outline","fxFlex","20%",4,"ngIf"],["color","primary","formControlName","alcoholista","fxFlex","20",1,"checkbox"],["color","primary","formControlName","alcoholista_activo","align","'start'",4,"ngIf"],["color","primary","formControlName","drogas","fxFlex","20",1,"checkbox"],["color","primary","formControlName","drogas_activo","align","'start'",4,"ngIf"],["class","","fxFlex","20","appearance","outline","fxFlex.lt-md","100",4,"ngIf"],["color","primary","formControlName","rt","fxFlex","20",1,"checkbox"],["class","","fxFlex","40","appearance","outline","fxFlex.lt-md","100",4,"ngIf"],["class","","appearance","outline","fxFlex","20","fxFlex.lt-md","100",4,"ngIf"],["color","primary","formControlName","anticonceptivos","fxFlex","20",1,"checkbox"],["color","primary","formControlName","amamantar","fxFlex","20",1,"checkbox"],["color","primary","formControlName","hormonas","fxFlex","20",1,"checkbox"],["fxFlex","16","appearance","outline","fxFlex.lt-md","100",1,""],["formControlName","edad_menarca","matInput","","placeholder","Edad menarca"],["formControlName","edad_primer_emb","matInput","","placeholder","Edad primer embarazo"],["formControlName","menopausia_edad","matInput","","placeholder","Edad menopausia"],["color","primary","formControlName","menopausia_quirurgica","fxFlex","10",1,"checkbox"],["color","primary","formControlName","ambientales","fxFlex","20",1,"checkbox"],["fxFlex","40","appearance","outline","fxFlex.lt-md","100",1,""],["formControlName","factor_r_especifico","matInput","","placeholder","Factor de riesgo especifico"],["color","primary","formControlName","mamografia","fxFlex","20",1,"checkbox"],["class","","appearance","outline","fxFlex","22",4,"ngIf"],["class","","fxFlex","30","appearance","outline","fxFlex.lt-md","100",4,"ngIf"],["class","","appearance","outline","fxFlex","16","fxFlex.lt-md","100",4,"ngIf"],["color","primary","formControlName","rm_mamaria","fxFlex","20",1,"checkbox"],["color","primary","formControlName","pap","fxFlex","20",1,"checkbox"],["color","primary","formControlName","fecatest","fxFlex","20",1,"checkbox"],["color","primary","formControlName","fibrocolonoscopia","fxFlex","20",1,"checkbox"],["color","primary","formControlName","fibrogastroscopia","fxFlex","20",1,"checkbox"],["color","primary","formControlName","psa","fxFlex","25",1,"checkbox"],["fxFlex","16","fxFlex.lt-md","100","fxLayoutGap","5px"],["class","","appearance","outline","fxFlex","50",4,"ngIf"],["class","","fxFlex","50","appearance","outline",4,"ngIf"],["fxFlex","100","fxLayout","row wrap","fxLayoutGap","2rem","fxLayoutAlign","start center",1,"content-column-checkbox"],["color","primary","formControlName","antecedente","fxFlex","100",1,"checkbox"],["fxFlex","100","fxLayout","row wrap",1,"pl-5"],["fxFlex","100"],["color","primary","formControlName","antecedente_indirectos","fxFlex","20","class","checkbox",4,"ngIf"],["fxFlex","70","appearance","outline","fxFlex.lt-md","100",4,"ngIf"],["fxFlex","100","fxLayout","row wrap"],["color","primary","formControlName","antecedente_directo","fxFlex","100","class","checkbox pb-0",4,"ngIf"],["fxLayout","row wrap","fxFlex","100","fxLayoutGap","1rem","fxLayoutAlign","start stretch",1,"card","pl-5",3,"formGroup"],["class","antecedents-list","fxFlex","100",4,"ngFor","ngForOf"],["appearance","outline","fxFlex","35",1,""],["placeholder","Seleccione...","formControlName","kinship_id"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Seleccione...","formControlName","topography_id"],["fxFlex","15",4,"ngIf"],["fxFlex","100","fxLayout","row wrap","fxLayoutGap","1rem","fxLayoutAlign","start stretch",1,"content-column-checkbox"],["color","primary","formControlName","anterior","fxFlex","100",1,"checkbox","pb-0"],["fxLayout","row wrap","class","card pl-5","fxFlex","100","fxLayoutGap","1rem","fxLayoutAlign","start stretch",3,"formGroup",4,"ngIf"],["fxFlex","10","appearance","outline","fxFlex.lt-md","100",1,""],["formControlName","imc_talla","matInput","","placeholder","Altura"],["formControlName","imc_peso","matInput","","placeholder","Peso"],["formControlName","imc_imc","matInput","","placeholder","IMC","readonly",""],["color","primary","formControlName","fumador_activo","align","'start'"],[1,"checkbox",3,"value"],["appearance","outline","fxFlex","20%",1,""],["placeholder","Seleccione...","formControlName","fumador_cant"],[3,"value"],["placeholder","Seleccione...","formControlName","fumador_periodo"],["color","primary","formControlName","alcoholista_activo","align","'start'"],["placeholder","Seleccione...","formControlName","alcoholista_cant"],["placeholder","Seleccione...","formControlName","alcoholista_periodo"],["color","primary","formControlName","drogas_activo","align","'start'"],["fxFlex","20","appearance","outline","fxFlex.lt-md","100",1,""],["formControlName","drogas_tipo","type","text","matInput","","placeholder","Tipo de droga/s"],["placeholder","Seleccione...","formControlName","drogas_periodo"],["formControlName","rt_donde","matInput","","placeholder","En Donde"],["appearance","outline","fxFlex","20","fxFlex.lt-md","100",1,""],["formControlName","rt_date","matInput","","placeholder","Fecha","autocomplete","off",3,"matDatepicker","click","dateChange"],["matSuffix","",3,"for"],["picker",""],["placeholder","Seleccione...","formControlName","anticonceptivos_periodo"],["placeholder","Seleccione...","formControlName","amamantar_periodo"],["placeholder","Seleccione...","formControlName","hormonas_periodo"],["formControlName","tipo_trh","matInput","","placeholder","Tipo TRH"],["formControlName","ambientales_cuales","matInput","","placeholder","Factores ambientales"],["appearance","outline","fxFlex","22",1,""],["placeholder","Seleccione...","formControlName","mamografia_frecuencia"],["fxFlex","30","appearance","outline","fxFlex.lt-md","100",1,""],["formControlName","mamografia_otros","matInput","","placeholder","Indique otros"],["appearance","outline","fxFlex","16","fxFlex.lt-md","100",1,""],["formControlName","mamografia_date_ultima","matInput","","placeholder","Fecha","autocomplete","off",3,"matDatepicker","dateChange","click"],["placeholder","Seleccione...","formControlName","rm_mamaria_frecuencia"],["formControlName","rm_mamaria_otros","matInput","","placeholder","Indique otros"],["formControlName","rm_mamaria_date_ultima","matInput","","placeholder","Fecha","autocomplete","off",3,"matDatepicker","dateChange","click"],["placeholder","Seleccione...","formControlName","pap_frecuencia"],["formControlName","pap_otros","matInput","","placeholder","Indique otros"],["formControlName","pap_date_ultima","matInput","","placeholder","Fecha","autocomplete","off",3,"matDatepicker","click","dateChange"],["placeholder","Seleccione...","formControlName","fecatest_frecuencia"],["formControlName","fecatest_otros","matInput","","placeholder","Indique otros"],["formControlName","fecatest_date_ultima","matInput","","placeholder","Fecha","autocomplete","off",3,"matDatepicker","dateChange","click"],["placeholder","Seleccione...","formControlName","fibrocolonoscopia_frecuencia"],["formControlName","fibrocolonoscopia_otros","matInput","","placeholder","Indique otros"],["formControlName","fibrocolonoscopia_date_ultima","matInput","","placeholder","Fecha","autocomplete","off",3,"matDatepicker","dateChange","click"],["placeholder","Seleccione...","formControlName","fibrogastroscopia_frecuencia"],["formControlName","fibrogastroscopia_otros","matInput","","placeholder","Indique otros"],["formControlName","fibrogastroscopia_date_ultima","matInput","","placeholder","Fecha","autocomplete","off",3,"matDatepicker","dateChange","click"],["placeholder","Seleccione...","formControlName","psa_frecuencia"],["formControlName","psa_otros","matInput","","placeholder","Indique otros"],["appearance","outline","fxFlex","50",1,""],["formControlName","psa_date_ultima","matInput","","placeholder","Fecha","autocomplete","off",3,"matDatepicker","dateChange","click"],["fxFlex","50","appearance","outline",1,""],["formControlName","psa_result","matInput","","placeholder","Resultado de \xfaltimo"],["color","primary","formControlName","antecedente_indirectos","fxFlex","20",1,"checkbox"],["fxFlex","70","appearance","outline","fxFlex.lt-md","100"],["formControlName","antecedente_indirectos_tipo","matInput","","placeholder","Tipos Antecedentes Indirectos"],["color","primary","formControlName","antecedente_directo","fxFlex","100",1,"checkbox","pb-0"],["fxFlex","100",1,"antecedents-list"],[1,"text-list"],[1,"btn-list"],["mat-icon-button","","type","button","matTooltip","Eliminar","matTooltipClass","tips",1,"buttons-actions",3,"click"],["fxFlex","15"],["type","button","mat-icon-button","","aria-label","Add",1,"add-icon",3,"click"],["color","primary"],[4,"ngIf"],["class","","appearance","outline","fxFlex","25","fxFlex.lt-md","100",4,"ngIf"],["class","","fxFlex","15","appearance","outline","fxFlex.lt-md","100",4,"ngIf"],[3,"value","options","namePlaceholder","addOption","changeValue"],["appearance","outline","fxFlex","24","fxFlex.lt-md","100",1,""],["formControlName","obs","matInput","","type","text","placeholder","Observaciones"],["fxFlex","10",4,"ngIf"],["appearance","outline","fxFlex","25","fxFlex.lt-md","100",1,""],["fxFlex","15","appearance","outline","fxFlex.lt-md","100",1,""],["formControlName","edad","matInput","","placeholder","Edad"],["fxFlex","10"]],template:function(e,a){1&e&&t.YNc(0,mi,3,4,"form",0),2&e&&t.Q6J("ngIf",a.form)},directives:[u.O5,c._Y,c.JL,d.yH,d.xw,d.SQ,d.Wh,c.sg,R.oG,c.JJ,c.u,g.KE,g.hX,c.Fj,k.Nt,lt.VQ,lt.U0,W.gD,u.sg,$.ey,C.hl,C.nW,g.R9,C.Mq,S.lW,J.gM,N.Hw,K.F],pipes:[u.Ov],styles:["h3[_ngcontent-%COMP%]{font-weight:500}.content-column-checkbox[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{padding:10px 10px 27px}.content-groups[_ngcontent-%COMP%]{width:100%}.bg-row[_ngcontent-%COMP%]{background-color:#e1f5fe}.chip-antecedentes[_ngcontent-%COMP%]{min-height:20px!important;font-weight:400;font-size:12px}.btn[_ngcontent-%COMP%]{height:35px!important;margin-top:4px}.buttons-actions[_ngcontent-%COMP%]{background-color:transparent;color:#9e9e9e;line-height:18px;float:right}.buttons-actions[_ngcontent-%COMP%]:hover{color:var(--color-primary)}.buttons-actions[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:18px!important}.buttons-actions[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{height:inherit!important;width:inherit!important}@media screen and (max-width: 576px){.antecedents-list[_ngcontent-%COMP%]{height:initial!important}}.antecedents-list[_ngcontent-%COMP%]{height:25px;font-size:10pt;align-items:center;display:flex}.antecedents-list[_ngcontent-%COMP%]   .text-list[_ngcontent-%COMP%]{width:87%}.antecedents-list[_ngcontent-%COMP%]   .text-list-antecedente[_ngcontent-%COMP%]{width:250px}.antecedents-list[_ngcontent-%COMP%]   .btn-list[_ngcontent-%COMP%]{width:10%}.pl-5[_ngcontent-%COMP%]{padding-left:5%}.pb-0[_ngcontent-%COMP%]{padding-bottom:0!important}.card[_ngcontent-%COMP%]{margin-bottom:2rem}"]}),i})();var pi=l(5023);let _i=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["mvd-patient-samples"]],inputs:{patient:"patient"},decls:1,vars:1,consts:[[3,"patient"]],template:function(e,a){1&e&&t._UZ(0,"mvd-samples-table",0),2&e&&t.Q6J("patient",a.patient)},directives:[pi.V],styles:[""]}),i})();var ui=l(8437),fi=l(7544),V=l(6087),gi=l(6719);function hi(i,n){if(1&i&&t._UZ(0,"ngx-doc-viewer",3),2&i){const e=t.oxw();t.Q6J("viewerUrl","https://docs.google.com/gview?url=%URL%&embedded=true")("url",e.data)}}let xi=(()=>{class i{constructor(e,a){this.dialogRef=e,this.data=a}ngOnInit(){}onNoClick(){this.dialogRef.close()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z.so),t.Y36(Z.WI))},i.\u0275cmp=t.Xpm({type:i,selectors:[["ng-component"]],decls:5,vars:1,consts:[[1,""],["mat-button","",1,"btn-close-modal",3,"click"],["class","full","viewer","url","style","width:100%;height:90vh;","loaded","",3,"viewerUrl","url",4,"ngIf"],["viewer","url","loaded","",1,"full",2,"width","100%","height","90vh",3,"viewerUrl","url"]],template:function(e,a){1&e&&(t.TgZ(0,"mat-card",0)(1,"button",1),t.NdJ("click",function(){return a.onNoClick()}),t.TgZ(2,"mat-icon"),t._uU(3,"close"),t.qZA()(),t.YNc(4,hi,1,2,"ngx-doc-viewer",2),t.qZA()),2&e&&(t.xp6(4),t.Q6J("ngIf",a.data))},directives:[q.a8,S.lW,N.Hw,u.O5,gi.zr],styles:[".mat-card[_ngcontent-%COMP%]{box-shadow:none!important;margin:0!important;padding:0!important;padding-top:1rem!important;background-color:#cfcfcf}"]}),i})();var vi=l(9441);let bi=(()=>{class i{constructor(e,a,o,r){this.http=e,this.snackBar=a,this.patientService=o,this.router=r,this.resultSubject$=new b.X(null),this.attachedEditSubject$=new b.X(null),this.patientService.patientOnEdit.subscribe(s=>this.patient=s)}get resultItems$(){return this.resultSubject$}setItems(e){this.resultSubject$.next(e)}get attachedOnEdit(){return this.attachedEditSubject$}setAttachedOnEdit(e){this.attachedEditSubject$.next(e)}storeAttach(e){return this.http.post(`${_.N.API}documents`,e).pipe((0,m.U)(a=>{var o;return this.getAttacheds(null===(o=this.patient)||void 0===o?void 0:o.id,1,20,"","desc").pipe((0,T.q)(1)).subscribe(r=>{const s=r;this.patientService.patientOnEdit.pipe((0,T.q)(1)).subscribe(f=>{let x=Object.assign({},f);x.documents=s.data.data,this.patientService.setPatientOnEdit(x)})}),a.data}))}getAttached(e){return this.http.get(`${_.N.API}documents/${e}`).pipe((0,m.U)(a=>(this.setAttachedOnEdit(a.data),a.data)))}getAttacheds(e,a,o,r,s){var f;return void 0===e&&(e=null===(f=this.patient)||void 0===f?void 0:f.id),void 0===a&&(a=1),void 0===o&&(o=20),void 0===r&&(r=""),void 0===s&&(s="desc"),this.http.get(`${_.N.API}documents`,{params:(new A.LE).set("page",a.toString()).set("filter",r).set("sort",s).set("patient_id",null==e?void 0:e.toString()).set("per_page",o.toString())}).pipe((0,m.U)(x=>(this.setAttachedOnEdit(null),this.setItems(x),x)))}updateAttached(e){return this.http.put(`${_.N.API}documents/${e.id}`,e).pipe((0,m.U)(a=>{var o;return this.getAttacheds(null===(o=this.patient)||void 0===o?void 0:o.id,1,20,"","desc").pipe((0,T.q)(1)).subscribe(),this.openSnackBar("Actualizado correctamente","success-snack-bar"),a.data}))}deleteAttached(e){return this.http.delete(`${_.N.API}documents/${e}`).pipe((0,m.U)(a=>{var o;return this.getAttacheds(null===(o=this.patient)||void 0===o?void 0:o.id,1,20,"","desc").pipe((0,T.q)(1)).subscribe(r=>{const s=r;this.patientService.patientOnEdit.pipe((0,T.q)(1)).subscribe(f=>{let x=Object.assign({},f);x.documents=s.data.data,this.patientService.setPatientOnEdit(x)})}),this.openSnackBar("Eliminado correctamente","success-snack-bar"),a.data}))}download(e){return this.http.get(`${_.N.API}download_document/${e.id}`,{responseType:"blob"})}openSnackBar(e,a,o=""){this.snackBar.open(e,o,{duration:2e3,horizontalPosition:"center",verticalPosition:"top",panelClass:a})}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(A.eN),t.LFG(p.ux),t.LFG(y.$),t.LFG(U.F0))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var ot=l(3160);function Zi(i,n){1&i&&(t.TgZ(0,"p",14)(1,"mat-icon",15),t._uU(2,"warning_amber"),t.qZA(),t._uU(3," Consentimiento No Firmado "),t.qZA())}const Ti=function(){return[20,50,100]};let Ci=(()=>{class i{constructor(e,a){this.attachedService=e,this.dialog=a,this.columns=[{title:"Nombre",col:"name"},{title:"Consentimiento",col:"consentimiento",type:"consentimiento"},{title:"Fecha de carga",col:"created_at",pipe:"dd/MM/yyyy H:mm:ss"}],this.pageDefault=1,this.perPage=10,this.orden="desc",this.filter="",this.consentimiento=!1,this.files=new c.NI([null]),this.files_consentimiento=new c.NI([null]),this.result=this.attachedService.resultItems$}ngOnInit(){this.getAttacheds(this.patient.id,this.pageDefault,this.perPage,this.filter,this.orden)}ngOnChanges(){var e,a;if((null===(a=null===(e=this.patient)||void 0===e?void 0:e.documents)||void 0===a?void 0:a.length)>=1){const o=this.patient.documents.filter(r=>r.consentimiento);this.consentimiento=o.length>=1}else this.consentimiento=!1}paginatorChange(e){this.getAttacheds(this.patient.id,e.pageIndex+1,e.pageSize)}getAttacheds(e,a,o,r,s){this.subscroption=this.attachedService.getAttacheds(e,a,o,r,s).subscribe(f=>this.loadData())}loadData(){this.dataSource=this.result.pipe((0,m.U)(e=>e.data.data.map(o=>{var r,s;if((null===(s=null===(r=this.patient)||void 0===r?void 0:r.documents)||void 0===s?void 0:s.length)>=1){const f=this.patient.documents.filter(x=>x.consentimiento);this.consentimiento=f.length>=1}else this.consentimiento=!1;return{id:o.id,name:o.name,consentimiento:o.consentimiento,url_file:o.url_file,created_at:o.created_at}}))),this.totalResut=this.result.pipe((0,m.U)(e=>e.data.total))}search(e){this.getAttacheds(this.patient.id,this.pageDefault,this.perPage,e,this.orden)}deleteItem(e){return this.attachedService.deleteAttached(e)}itemAction(e){"delete"===e.action&&this.deleteItem(e.element.id).pipe((0,T.q)(1)).subscribe(),"edit"===e.action&&this.openDialog("Edita Documento",e.element),"preview"===e.action&&this.openDialogPreview(e.element.url_file),"download"===e.action&&this.downloadFile(e.element)}openDialog(e="Agrega Documento",a){const o={title:e,data:this.setFields(a)};return this.dialog.open(H.Q,{width:"550px",data:o}).afterClosed().subscribe(s=>{s&&s.id&&this.updateAttached(s)})}openDialogPreview(e){return this.dialog.open(xi,{width:"800px",height:"90vh",data:e}).afterClosed().subscribe(o=>{})}updateAttached(e){this.attachedService.updateAttached(e).pipe((0,T.q)(1)).subscribe()}setFields(e){return[{nameControl:"id",type:"hidden",value:null==e?void 0:e.id,label:"Id"},{nameControl:"name",type:"text",value:null==e?void 0:e.name,validators:[c.kI.required],label:"Nombre",class:"mvd-col1--1"}]}ngOnDestroy(){this.subscroption.unsubscribe()}upload(e,a=!1){const o=e.target.files;let r=new FormData;r.append("patient_id",this.patient.id.toString()),r.append("consentimiento",a?"1":"0");for(let s=0;s<o.length;s++)r.append("files[]",o[s]);this.attachedService.storeAttach(r).subscribe(s=>{var f,x;if((null===(x=null===(f=this.patient)||void 0===f?void 0:f.documents)||void 0===x?void 0:x.length)>=1){const I=this.patient.documents.filter(z=>z.consentimiento);this.consentimiento=I.length>=1}})}downloadFile(e){this.attachedService.download(e).subscribe(a=>{let o=new Blob([a]);window.URL.createObjectURL(o),vi.saveAs(o,e.name)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(bi),t.Y36(Z.uw))},i.\u0275cmp=t.Xpm({type:i,selectors:[["mvd-attached-files"]],viewQuery:function(e,a){if(1&e&&t.Gf(V.NW,7),2&e){let o;t.iGM(o=t.CRH())&&(a.paginator=o.first)}},inputs:{patient:"patient"},features:[t.TTD],decls:24,vars:15,consts:[["fxFlex","100","fxLayout","column"],["class","consentimiento-no-firmado",4,"ngIf"],["fxFlex","50","fxFlex.lt-md","100","fxLayout","row wrap","fxLayoutGap","6px","fxLayoutAlign","start center",1,"content-group-form"],["fxLayout","row","fxFlex","calc(33.3% - 6px)","fxFlex.lt-md","calc(100%-6px)"],["for","upload_input_consentimiento"],["mat-stroked-button","","color","accent","fxFlex","calc(33.3% - 6px)","fxFlex.lt-md","calc(50%-6px)",1,"btn"],["fontSet","material-icons-round"],["id","upload_input_consentimiento","type","file","hidden","","multiple","",3,"formControl","change"],["for","upload_input"],["mat-stroked-button","","color","primary","fxFlex","calc(33.3% - 6px)","fxFlex.lt-md","calc(50%-6px)",1,"btn"],["id","upload_input","type","file","hidden","","multiple","",3,"formControl","change"],["fxFlex","100","fxLayout","column",1,""],[3,"columns","dataSource","btnPreview","btnDownload","actionChange"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],[1,"consentimiento-no-firmado"],["color","warn","fontSet","material-icons-round"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t.YNc(1,Zi,4,0,"p",1),t.TgZ(2,"div",2)(3,"h3",3),t._uU(4,"Adjuntar archivos"),t.qZA(),t.TgZ(5,"span")(6,"label",4)(7,"a",5)(8,"mat-icon",6),t._uU(9,"upload_file"),t.qZA(),t._uU(10," Consentimiento "),t.qZA()(),t.TgZ(11,"input",7),t.NdJ("change",function(r){return a.upload(r,!0)}),t.qZA()(),t.TgZ(12,"span")(13,"label",8)(14,"a",9)(15,"mat-icon",6),t._uU(16,"backup"),t.qZA(),t._uU(17," Selecciona Archivo "),t.qZA()(),t.TgZ(18,"input",10),t.NdJ("change",function(r){return a.upload(r)}),t.qZA()()(),t.TgZ(19,"div",11)(20,"mvd-data-table",12),t.NdJ("actionChange",function(r){return a.itemAction(r)}),t.ALo(21,"async"),t.qZA(),t.TgZ(22,"mat-paginator",13),t.NdJ("page",function(r){return a.paginatorChange(r)}),t.ALo(23,"async"),t.qZA()()()),2&e&&(t.xp6(1),t.Q6J("ngIf",!a.consentimiento&&a.dataSource),t.xp6(10),t.Q6J("formControl",a.files_consentimiento),t.xp6(7),t.Q6J("formControl",a.files),t.xp6(2),t.Q6J("columns",a.columns)("dataSource",t.lcZ(21,10,a.dataSource))("btnPreview",!0)("btnDownload",!0),t.xp6(2),t.Q6J("length",t.lcZ(23,12,a.totalResut))("pageSize",a.perPage)("pageSizeOptions",t.DdM(14,Ti)))},directives:[d.yH,d.xw,u.O5,N.Hw,d.SQ,d.Wh,S.zs,c.Fj,c.JJ,c.oH,ot.Q,V.NW],pipes:[u.Ov],styles:["h3[_ngcontent-%COMP%]{font-weight:500}.bg-row[_ngcontent-%COMP%]{background-color:#e1f5fe;text-decoration:none}.btn[_ngcontent-%COMP%]{text-decoration:none}.full[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%}.consentimiento-no-firmado[_ngcontent-%COMP%]{display:flex;align-items:center;align-content:center;justify-items:center;justify-content:center;padding:2px 0;line-height:1;width:100%;border-radius:5px;color:var(--color-warn)!important;background-color:#d1121249}.consentimiento-no-firmado[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-right:5px}"]}),i})();var at=l(8929),B=l(7625);function yi(i,n){if(1&i&&(t.TgZ(0,"mat-option",6),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.code," ")}}function Ai(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",3)(1,"mat-label"),t._uU(2,"Seleccionar Familia"),t.qZA(),t.TgZ(3,"mat-select",4),t.NdJ("valueChange",function(o){return t.CHM(e),t.oxw(2).changeValue(o)}),t.YNc(4,yi,2,2,"mat-option",5),t.qZA()()}if(2&i){const e=t.oxw().ngIf,a=t.oxw();t.xp6(3),t.Q6J("formControl",a.changeFamily),t.xp6(1),t.Q6J("ngForOf",e)}}function Fi(i,n){if(1&i&&(t.ynx(0),t.YNc(1,Ai,5,2,"mat-form-field",2),t.BQk()),2&i){const e=n.ngIf;t.xp6(1),t.Q6J("ngIf",e.length>=1)}}let Si=(()=>{class i{constructor(e,a){this.patientService=e,this.familyService=a,this.subscriptions=[],this.destroy$=new at.xQ}ngOnInit(){this.getFamilies(),this.changeFamily=new c.NI(null),this.familyService.familyOnEdit.pipe((0,B.R)(this.destroy$)).subscribe(e=>{this.onEdit=e,e&&this.changeFamily.setValue(e)}),this.families$=this.familyService.resultItems$.pipe((0,m.U)(e=>{var a;const o=null===(a=null==e?void 0:e.data)||void 0===a?void 0:a.data;return this.onEdit||(null==o?void 0:o.length)>=1&&this.changeValue(o[0]),o}))}ngAfterViewInit(){}changeValue(e){this.familyService.setFamilyOnEdit(e),this.changeFamily.setValue(e)}getFamilies(){this.familyService.getFamilies(1,1e3,"","",this.patient.id.toString()).pipe((0,B.R)(this.destroy$)).subscribe()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(y.$),t.Y36(v.d))},i.\u0275cmp=t.Xpm({type:i,selectors:[["mvd-select-family"]],inputs:{patient:"patient"},decls:3,vars:3,consts:[["fxFlex","100","fxLayout","row wrap","fxLayoutGap","2rem","fxLayoutAlign","space-between center"],[4,"ngIf"],["fxFlex","100","fxFlex.lt-md","100","class","","appearance","outline",4,"ngIf"],["fxFlex","100","fxFlex.lt-md","100","appearance","outline",1,""],["placeholder","Seleccionar Familia",3,"formControl","valueChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t.YNc(1,Fi,2,1,"ng-container",1),t.ALo(2,"async"),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,a.families$)))},directives:[d.yH,d.xw,d.SQ,d.Wh,u.O5,g.KE,g.hX,W.gD,c.JJ,c.oH,u.sg,$.ey],pipes:[u.Ov],styles:[".content-column-checkbox[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{padding:10px 10px 27px}"]}),i})(),Ii=(()=>{class i{constructor(e,a){this.http=e,this.snackBar=a,this.dataOptionsForms$=new b.X(null),this.dgEditSubject$=new b.X(null),this.urlUtils="src/app/shared/utils/data/",this.resultSubject$=new b.X(null)}get optionsForms$(){return this.dataOptionsForms$}get resultItems$(){return this.resultSubject$}setItems(e){this.resultSubject$.next(e)}get dgOnEdit(){return this.dgEditSubject$}setDgOnEdit(e){this.dgEditSubject$.next(e)}storeDg(e){return this.http.post(`${_.N.API}dgs`,e).pipe((0,m.U)(a=>(this.setDgOnEdit(a.data),this.openSnackBar("Se cre\xf3 correctamente","success-snack-bar"),a.data)))}updateDg(e){const a=this.dgEditSubject$.value.id;return e._method="put",this.http.post(`${_.N.API}dgs/${a}`,e).pipe((0,m.U)(o=>(this.setDgOnEdit(o.data),this.openSnackBar("Actualizado correctamente","success-snack-bar"),o.data)))}deleteDg(e){return this.http.delete(`${_.N.API}dgs/${e}`).pipe((0,m.U)(a=>(this.getDgs(1,20,"","desc").pipe((0,T.q)(1)).subscribe(),this.openSnackBar("Eliminado correctamente","success-snack-bar"),a.data)))}getDg(e){return this.http.get(`${_.N.API}dgs/${e}`).pipe((0,m.U)(a=>(this.setDgOnEdit(a.data),a.data)))}getDgs(e=1,a=20,o="",r="desc"){return this.http.get(`${_.N.API}dgs`,{params:(new A.LE).set("page",e.toString()).set("filter",o).set("sort",r).set("per_page",a.toString())}).pipe((0,m.U)(s=>(this.setItems(s),this.setDgOnEdit(null),s)))}openSnackBar(e,a,o=""){this.snackBar.open(e,o,{duration:2e3,horizontalPosition:"center",verticalPosition:"top",panelClass:a})}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(A.eN),t.LFG(p.ux))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),qi=(()=>{class i{constructor(e,a){this.http=e,this.snackBar=a,this.dataOptionsForms$=new b.X(null),this.consultaCguEditSubject$=new b.X(null),this.urlUtils="src/app/shared/utils/data/",this.resultSubject$=new b.X(null)}get optionsForms$(){return this.dataOptionsForms$}get resultItems$(){return this.resultSubject$}setItems(e){this.resultSubject$.next(e)}get consultaCguOnEdit(){return this.consultaCguEditSubject$}setConsultaCguOnEdit(e){this.consultaCguEditSubject$.next(e)}storeConsultaCgu(e){return this.http.post(`${_.N.API}consulta_cgus`,e).pipe((0,m.U)(a=>(this.setConsultaCguOnEdit(a.data),this.openSnackBar("Se cre\xf3 correctamente","success-snack-bar"),a.data)))}updateConsultaCgu(e){const a=this.consultaCguEditSubject$.value.id;return e._method="put",this.http.post(`${_.N.API}consulta_cgus/${a}`,e).pipe((0,m.U)(o=>(this.setConsultaCguOnEdit(o.data),this.openSnackBar("Actualizado correctamente","success-snack-bar"),o.data)))}deleteConsultaCgu(e){return this.http.delete(`${_.N.API}consulta_cgus/${e}`).pipe((0,m.U)(a=>(this.getConsultaCgus(1,20,"","desc").pipe((0,T.q)(1)).subscribe(),this.openSnackBar("Eliminado correctamente","success-snack-bar"),a.data)))}getConsultaCgu(e){return this.http.get(`${_.N.API}consulta_cgus/${e}`).pipe((0,m.U)(a=>(this.setConsultaCguOnEdit(a.data),a.data)))}getConsultaCgus(e=1,a=20,o="",r="desc"){return this.http.get(`${_.N.API}consulta_cgus`,{params:(new A.LE).set("page",e.toString()).set("filter",o).set("sort",r).set("per_page",a.toString())}).pipe((0,m.U)(s=>(this.setItems(s),this.setConsultaCguOnEdit(null),s)))}openSnackBar(e,a,o=""){this.snackBar.open(e,o,{duration:2e3,horizontalPosition:"center",verticalPosition:"top",panelClass:a})}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(A.eN),t.LFG(p.ux))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Ni(i,n){if(1&i&&(t.TgZ(0,"mat-option",18),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.lnq(" (",e.code,") ",e.name," ",e.last_name," ")}}function Ui(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",12)(1,"mat-label"),t._uU(2,"Paciente"),t.qZA(),t._UZ(3,"input",13),t.TgZ(4,"mat-autocomplete",14,15),t.YNc(6,Ni,2,4,"mat-option",7),t.ALo(7,"async"),t.qZA(),t.TgZ(8,"button",16),t.NdJ("click",function(){return t.CHM(e),t.oxw().addPatient()}),t.TgZ(9,"mat-icon",17),t._uU(10,"add_circle"),t.qZA()(),t.TgZ(11,"mat-error"),t._UZ(12,"mvd-errors-messages",8),t.qZA()()}if(2&i){const e=t.MAs(5),a=t.oxw();t.xp6(3),t.Q6J("matAutocomplete",e),t.xp6(1),t.Q6J("displayWith",a.getNamePatient.bind(a)),t.xp6(2),t.Q6J("ngForOf",t.lcZ(7,5,a.patients$)),t.xp6(6),t.Q6J("campo",a.form.get("patient_id").errors)("name","Paciente")}}function wi(i,n){if(1&i&&(t.TgZ(0,"mat-option",18),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}let mt=(()=>{class i{constructor(e,a,o,r,s,f){this.dialogRef=e,this.data=a,this.fb=o,this.patientService=r,this.familyService=s,this.router=f,this.destroy$=new at.xQ,this.createForm()}ngOnInit(){var e;this.kinships$=this.familyService.getKinships(1,100).pipe((0,m.U)(a=>a.data.data)),(null===(e=this.data)||void 0===e?void 0:e.patient_id)?this.updateForm():this.form.get("patient_id").valueChanges.pipe((0,B.R)(this.destroy$),(0,Y.b)(500),(0,M.O)("")).subscribe(a=>{this.patients$=this.patientService.filterPatients(1,20,a).pipe((0,T.q)(1),(0,m.U)(o=>(this.patients=o.data.data,o.data.data)))})}updateForm(){this.form.get("patient_id").setValue(this.data.patient_id)}createForm(){this.form=this.fb.group({patient_id:[null,c.kI.required],kinship_id:[null,c.kI.required]})}onNoClick(){this.dialogRef.close()}submit(){this.dialogRef.close(this.form.value)}addPatient(){this.router.navigate(["/pacientes/paciente"]),this.dialogRef.close()}getNamePatient(e){if(e&&this.patients){const a=this.patients.find(o=>o.id===e);return`(${a.code}) ${a.name} ${a.last_name}`}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z.so),t.Y36(Z.WI),t.Y36(c.qu),t.Y36(y.$),t.Y36(v.d),t.Y36(U.F0))},i.\u0275cmp=t.Xpm({type:i,selectors:[["ng-component"]],decls:23,vars:8,consts:[["fxFlex","100",1,""],["mat-button","",1,"btn-close-modal",3,"click"],[3,"formGroup"],["fxFlex","100","fxLayout","row wrap","fxFlex.lt-md","100","fxLayoutAlign","space-between center"],["class","","appearance","outline","fxFlex","50","fxFlex.lt-md","100",4,"ngIf"],["fxFlex","40","fxFlex.lt-md","100","appearance","outline",1,""],["placeholder","Seleccionar parentesco","formControlName","kinship_id"],[3,"value",4,"ngFor","ngForOf"],[3,"campo","name"],["fxFlex","100","fxLayout","row","fxFlex.lt-md","100","fxLayoutAlign","between",1,"btn-actions","mvd-col1--1"],["fxFlex","33.3"],["fxFlex","33.3","mat-flat-button","","type","submit","color","primary",1,"",3,"disabled","click"],["appearance","outline","fxFlex","50","fxFlex.lt-md","100",1,""],["matInput","","aria-label","Paciente","placeholder","c\xf3digo, documento, nombre","formControlName","patient_id","type","text",3,"matAutocomplete"],[3,"displayWith"],["auto","matAutocomplete"],["type","button","matSuffix","","mat-icon-button","","aria-label","Add",1,"add-icon-input",3,"click"],["color","primary"],[3,"value"]],template:function(e,a){1&e&&(t.TgZ(0,"mat-card",0)(1,"button",1),t.NdJ("click",function(){return a.onNoClick()}),t.TgZ(2,"mat-icon"),t._uU(3,"close"),t.qZA()(),t.TgZ(4,"mat-card-header")(5,"h3"),t._uU(6,"Miembro de la familia"),t.qZA()(),t.TgZ(7,"form",2)(8,"div",3),t.YNc(9,Ui,13,7,"mat-form-field",4),t.TgZ(10,"mat-form-field",5)(11,"mat-label"),t._uU(12,"Seleccionar parentesco"),t.qZA(),t.TgZ(13,"mat-select",6),t.YNc(14,wi,2,2,"mat-option",7),t.ALo(15,"async"),t.qZA(),t.TgZ(16,"mat-error"),t._UZ(17,"mvd-errors-messages",8),t.qZA()(),t.TgZ(18,"div",9),t._UZ(19,"span",10)(20,"span",10),t.TgZ(21,"button",11),t.NdJ("click",function(){return a.submit()}),t._uU(22,"Guardar"),t.qZA()()()()()),2&e&&(t.xp6(7),t.Q6J("formGroup",a.form),t.xp6(2),t.Q6J("ngIf",!(null!=a.data&&a.data.patient_id)),t.xp6(5),t.Q6J("ngForOf",t.lcZ(15,6,a.kinships$)),t.xp6(3),t.Q6J("campo",a.form.get("kinship_id").errors)("name","Parentesco"),t.xp6(4),t.Q6J("disabled",!a.form.valid))},directives:[q.a8,d.yH,S.lW,N.Hw,q.dk,c._Y,c.JL,c.sg,d.xw,d.Wh,u.O5,g.KE,g.hX,k.Nt,c.Fj,D.ZL,c.JJ,c.u,D.XC,u.sg,$.ey,g.R9,g.TO,j.g,W.gD],pipes:[u.Ov],styles:[".mat-card[_ngcontent-%COMP%]{box-shadow:none!important;margin:0!important;padding-left:16px!important}form[_ngcontent-%COMP%]   .btn-actions[_ngcontent-%COMP%]{width:100%!important;grid-column:1/-1}form[_ngcontent-%COMP%]   .btn-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto}"]}),i})();function Ji(i,n){if(1&i&&(t.TgZ(0,"mat-option",5),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.code," ")}}let ki=(()=>{class i{constructor(e,a,o){this.familyService=e,this.patientService=a,this.dialog=o,this.destroy$=new at.xQ,this.family_id=new c.NI(null)}ngOnInit(){this.patientService.patientOnEdit.pipe((0,T.q)(1)).subscribe(e=>this.patient=e),this.family_id.valueChanges.pipe((0,B.R)(this.destroy$),(0,Y.b)(500),(0,M.O)("")).subscribe(e=>{console.log(e),this.families$=this.familyService.getFilterFamilies(1,20,e).pipe((0,T.q)(1),(0,m.U)(a=>(this.families=a.data.data,a.data.data)))})}getNameFamily(e){if(e&&this.families)return this.families.find(o=>o.id===e).code}selectFamily(e){this.openForm(e.option.value)}openForm(e){var a;const o={patient_id:null===(a=this.patient)||void 0===a?void 0:a.id};return this.dialog.open(mt,{width:"550px",data:o}).afterClosed().subscribe(s=>{s&&(s.id=e,this.familyService.addMember(s))})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(v.d),t.Y36(y.$),t.Y36(Z.uw))},i.\u0275cmp=t.Xpm({type:i,selectors:[["mvd-assign-family"]],decls:8,vars:6,consts:[["fxFlex","100","appearance","outline","fxFlex.lt-md","100",1,""],["matInput","","aria-label","Paciente","placeholder","c\xf3digo...","type","text",3,"matAutocomplete","formControl"],[3,"displayWith","optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,a){if(1&e&&(t.TgZ(0,"mat-form-field",0)(1,"mat-label"),t._uU(2,"Seleccionar Familia"),t.qZA(),t._UZ(3,"input",1),t.TgZ(4,"mat-autocomplete",2,3),t.NdJ("optionSelected",function(r){return a.selectFamily(r)}),t.YNc(6,Ji,2,2,"mat-option",4),t.ALo(7,"async"),t.qZA()()),2&e){const o=t.MAs(5);t.xp6(3),t.Q6J("matAutocomplete",o)("formControl",a.family_id),t.xp6(1),t.Q6J("displayWith",a.getNameFamily.bind(a)),t.xp6(2),t.Q6J("ngForOf",t.lcZ(7,4,a.families$))}},directives:[g.KE,d.yH,g.hX,k.Nt,D.ZL,c.Fj,c.JJ,c.oH,D.XC,u.sg,$.ey],pipes:[u.Ov],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),i})();function Qi(i,n){if(1&i&&(t.TgZ(0,"mat-option",18),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function Oi(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",5)(1,"mat-label"),t._uU(2,"DG"),t.qZA(),t._UZ(3,"input",12),t.TgZ(4,"mat-autocomplete",13,14),t.YNc(6,Qi,2,2,"mat-option",15),t.ALo(7,"async"),t.qZA(),t.TgZ(8,"button",16),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return o.addDg(o.form.get("dg_id"))}),t.TgZ(9,"mat-icon",17),t._uU(10,"add_circle"),t.qZA()(),t.TgZ(11,"mat-error"),t._UZ(12,"mvd-errors-messages",7),t.qZA()()}if(2&i){const e=t.MAs(5),a=t.oxw(2);t.xp6(3),t.Q6J("matAutocomplete",e)("readonly",!a.edit),t.xp6(1),t.Q6J("displayWith",a.getNameDg.bind(a)),t.xp6(2),t.Q6J("ngForOf",t.lcZ(7,6,a.filteredDgs$)),t.xp6(6),t.Q6J("campo",a.form.get("dg_id").errors)("name","DG")}}function Pi(i,n){if(1&i&&(t.TgZ(0,"mat-option",18),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.AsE(" ",e.name," ",e.last_name," ")}}function Mi(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",19)(1,"mat-label"),t._uU(2,"Consulta CGU"),t.qZA(),t._UZ(3,"input",20),t.TgZ(4,"mat-autocomplete",13,14),t.YNc(6,Pi,2,3,"mat-option",15),t.ALo(7,"async"),t.qZA(),t.TgZ(8,"button",16),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return o.addConsultaCgu(o.form.get("consulta_cgu_id"))}),t.TgZ(9,"mat-icon",17),t._uU(10,"add_circle"),t.qZA()(),t.TgZ(11,"mat-error"),t._UZ(12,"mvd-errors-messages",7),t.qZA()()}if(2&i){const e=t.MAs(5),a=t.oxw(2);t.xp6(3),t.Q6J("matAutocomplete",e)("readonly",!a.edit),t.xp6(1),t.Q6J("displayWith",a.getNameConsultaCgu.bind(a)),t.xp6(2),t.Q6J("ngForOf",t.lcZ(7,6,a.filteredConsultaCgus$)),t.xp6(6),t.Q6J("campo",a.form.get("consulta_cgu_id").errors)("name","Consulta CGU")}}function Yi(i,n){if(1&i&&(t.TgZ(0,"mat-form-field",5)(1,"mat-label"),t._uU(2,"Creada"),t.qZA(),t._UZ(3,"input",21),t.ALo(4,"date"),t.qZA()),2&i){const e=t.oxw(2);t.xp6(3),t.Q6J("value",t.xi3(4,1,e.form.get("created_at").value,"dd/MM/YYYY"))}}function Di(i,n){if(1&i&&(t.TgZ(0,"mat-form-field",5)(1,"mat-label"),t._uU(2,"Actualizada"),t.qZA(),t._UZ(3,"input",22),t.ALo(4,"date"),t.qZA()),2&i){const e=t.oxw(2);t.xp6(3),t.Q6J("value",t.xi3(4,1,e.form.get("updated_at").value,"dd/MM/YYYY"))}}function Li(i,n){1&i&&(t.TgZ(0,"div",23)(1,"div",24)(2,"mat-checkbox",25),t._uU(3,"Estudiada"),t.qZA()()())}function Ei(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",26)(1,"button",27),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).edit=!1}),t._uU(2,"Cancelar"),t.qZA()()}}function $i(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",26)(1,"button",28),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).submitFamily()}),t._uU(2,"Guardar"),t.qZA()()}}function Bi(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",23)(1,"button",28),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).edit=!0}),t._uU(2,"Editar"),t.qZA()()}}function Gi(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"form",2)(2,"fieldset",3)(3,"div",4)(4,"mat-form-field",5)(5,"mat-label"),t._uU(6,"C\xf3digo"),t.qZA(),t._UZ(7,"input",6),t.TgZ(8,"mat-error"),t._UZ(9,"mvd-errors-messages",7),t.qZA()(),t.YNc(10,Oi,13,8,"mat-form-field",8),t.YNc(11,Mi,13,8,"mat-form-field",9),t.YNc(12,Yi,5,4,"mat-form-field",8),t.YNc(13,Di,5,4,"mat-form-field",8),t.qZA(),t.YNc(14,Li,4,0,"div",10),t.qZA(),t.YNc(15,Ei,3,0,"div",11),t.YNc(16,$i,3,0,"div",11),t.YNc(17,Bi,3,0,"div",10),t.qZA(),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.form),t.xp6(1),t.Q6J("disabled",!e.edit),t.xp6(5),t.Q6J("readonly",!e.edit),t.xp6(2),t.Q6J("campo",e.form.get("code").errors)("name","C\xf3digo"),t.xp6(1),t.Q6J("ngIf",e.dgs),t.xp6(1),t.Q6J("ngIf",e.consultaCgus),t.xp6(1),t.Q6J("ngIf",e.family),t.xp6(1),t.Q6J("ngIf",e.family),t.xp6(1),t.Q6J("ngIf",e.family),t.xp6(1),t.Q6J("ngIf",e.edit),t.xp6(1),t.Q6J("ngIf",e.edit||!e.family),t.xp6(1),t.Q6J("ngIf",!e.edit&&e.family)}}function Hi(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",29)(1,"button",30),t.NdJ("click",function(){return t.CHM(e),t.oxw().addFamily()}),t.TgZ(2,"mat-icon",31),t._uU(3,"add"),t.qZA(),t.TgZ(4,"span"),t._uU(5,"Crear Familia"),t.qZA()(),t._UZ(6,"mvd-assign-family",32),t.qZA()}}let ji=(()=>{class i{constructor(e,a,o,r,s,f){this.fb=e,this.dgsServices=a,this.consultaCguService=o,this.familyService=r,this.dialog=s,this.patientService=f,this.destroy$=new at.xQ,this.add=!1,this.edit=!1,this.createForm()}ngOnInit(){this.loadData()}createForm(){var e;this.form=this.fb.group({id:[null],code:[null,c.kI.required],dg_id:[null,c.kI.required],consulta_cgu_id:[null,c.kI.required],studied:[!1],created_at:[null],updated_at:[null],patient_id:[null===(e=this.patient)||void 0===e?void 0:e.id]})}updateForm(e){var a;this.form.patchValue({id:null==e?void 0:e.id,code:null==e?void 0:e.code,dg_id:null==e?void 0:e.dg_id,consulta_cgu_id:null==e?void 0:e.consulta_cgu_id,studied:null==e?void 0:e.studied,created_at:null==e?void 0:e.created_at,updated_at:null==e?void 0:e.updated_at,patient_id:null===(a=this.patient)||void 0===a?void 0:a.id})}loadData(){this.patientService.patientOnEdit.pipe((0,B.R)(this.destroy$)).subscribe(e=>{var a;this.patient=e,this.form.get("patient_id").setValue(null===(a=this.patient)||void 0===a?void 0:a.id)}),this.dgs$=this.dgsServices.resultItems$.pipe((0,m.U)(e=>null==e?void 0:e.data.data)),this.consultaCgus$=this.consultaCguService.resultItems$.pipe((0,m.U)(e=>null==e?void 0:e.data.data)),this.familyService.familyOnEdit.pipe((0,B.R)(this.destroy$)).subscribe(e=>{e&&(this.family=e,this.updateForm(this.family))}),this.dgsServices.getDgs(1,1e3).pipe((0,B.R)(this.destroy$)).subscribe(e=>this.dgs=e.data.data),this.consultaCguService.getConsultaCgus(1,1e3).pipe((0,B.R)(this.destroy$)).subscribe(e=>this.consultaCgus=e.data.data),this.filteredDgs$=this.form.get("dg_id").valueChanges.pipe((0,M.O)(""),(0,m.U)(e=>e?this._filterDg(e):this.dgs)),this.filteredConsultaCgus$=this.form.get("consulta_cgu_id").valueChanges.pipe((0,M.O)(""),(0,m.U)(e=>e?this._filterConsultaCgu(e):this.consultaCgus))}_filterDg(e){const a="string"==typeof e?e.toLowerCase():"";if(this.dgs)return this.dgs.filter(o=>o.name.toLowerCase().includes(a))}getNameDg(e){if(e&&this.dgs)return`${this.dgs.find(o=>o.id===e).name}`}_filterConsultaCgu(e){const a="string"==typeof e?e.toLowerCase():"";if(this.consultaCgus)return this.consultaCgus.filter(o=>o.name.toLowerCase().includes(a)||o.last_name.toLowerCase().includes(a))}getNameConsultaCgu(e){if(e&&this.consultaCgus){const a=this.consultaCgus.find(o=>o.id===e);return`${a.name} ${a.last_name}`}}submitFamily(){console.log(this.form.value),this.family?this.familyService.updateFamily(this.form.value).subscribe(e=>{this.edit=!1}):this.familyService.storeFamily(this.form.value).subscribe(e=>{this.edit=!1})}addDg(e){const r={title:"Agrega DG",data:[{nameControl:"name",type:"text",value:"",validators:[c.kI.required],label:"Nombre",class:"mvd-col1--1"}]};setTimeout(()=>this.dialog.open(H.Q,{width:"300px",data:r}).afterClosed().subscribe(f=>{f&&this.dgsServices.storeDg(f).pipe((0,T.q)(1)).subscribe(x=>{this.dgs=[...this.dgs,x],e.setValue(x.id)})}),100)}addConsultaCgu(e){const r={title:"Agrega Consulta CGU",data:[{nameControl:"name",type:"text",value:"",validators:[c.kI.required],label:"Nombre",class:"mvd-col1--1"},{nameControl:"last_name",type:"text",value:"",validators:[c.kI.required],label:"Apellido",class:"mvd-col1--1"},{nameControl:"contact",type:"text",value:"",label:"Contacto",class:"mvd-col1--1"}]};setTimeout(()=>this.dialog.open(H.Q,{width:"300px",data:r}).afterClosed().subscribe(f=>{f&&this.consultaCguService.storeConsultaCgu(f).pipe((0,T.q)(1)).subscribe(x=>{this.consultaCgus=[...this.consultaCgus,x],e.setValue(x.id)})}),100)}addFamily(){this.add=!0,this.edit=!0}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(c.qu),t.Y36(Ii),t.Y36(qi),t.Y36(v.d),t.Y36(Z.uw),t.Y36(y.$))},i.\u0275cmp=t.Xpm({type:i,selectors:[["mvd-add-family"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["addBtn",""],["fxFlex","100","fxLayout","row wrap",3,"formGroup"],["fxFlex","100","fxLayout","row wrap",3,"disabled"],["fxFlex","100","fxLayout","row wrap","fxLayoutGap","10px","fxLayoutAlign","start stretch",1,"content-column-checkbox"],["appearance","outline","fxFlex","30","fxFlex.lt-md","100",1,""],["formControlName","code","matInput","","type","text","placeholder","C\xf3digo Paciente",3,"readonly"],[3,"campo","name"],["class","","appearance","outline","fxFlex","30","fxFlex.lt-md","100",4,"ngIf"],["class","","appearance","outline","fxFlex","33","fxFlex.lt-md","100",4,"ngIf"],["fxFlex","100","fxLayout","row wrap","class","content-column-checkbox","fxLayoutGap","1rem","fxLayoutAlign","start stretch",4,"ngIf"],["fxFlex","25","fxLayout","row wrap","class","content-column-checkbox","fxLayoutGap","1rem","fxLayoutAlign","start stretch",4,"ngIf"],["matInput","","aria-label","DG","formControlName","dg_id","type","text",3,"matAutocomplete","readonly"],[3,"displayWith"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["type","button","matSuffix","","mat-icon-button","","aria-label","Add",1,"add-icon-input",3,"click"],["color","primary"],[3,"value"],["appearance","outline","fxFlex","33","fxFlex.lt-md","100",1,""],["matInput","","aria-label","Consulta CGU","formControlName","consulta_cgu_id","type","text",3,"matAutocomplete","readonly"],["matInput","","type","text","placeholder","Creada","readonly","",3,"value"],["matInput","","type","text","placeholder","Actualizada","readonly","",3,"value"],["fxFlex","100","fxLayout","row wrap","fxLayoutGap","1rem","fxLayoutAlign","start stretch",1,"content-column-checkbox"],["appearance","outline","fxFlex","16","fxFlex.lt-md","100","fxLayoutAlign","none start",1,"checkbox"],["formControlName","studied"],["fxFlex","25","fxLayout","row wrap","fxLayoutGap","1rem","fxLayoutAlign","start stretch",1,"content-column-checkbox"],["mat-stroked-button","","color","primary",1,"btn",3,"click"],["mat-flat-button","","color","primary",1,"btn",3,"click"],["fxFlex","100","fxLayout","row wrap","fxLayoutGap","1rem"],["fxFlex","40","mat-flat-button","","color","primary",1,"btn",3,"click"],[1,"mat-18"],["fxFlex","50"]],template:function(e,a){if(1&e&&(t.YNc(0,Gi,18,13,"ng-container",0),t.YNc(1,Hi,7,0,"ng-template",null,1,t.W1O)),2&e){const o=t.MAs(2);t.Q6J("ngIf",a.family||a.add&&a.edit)("ngIfElse",o)}},directives:[u.O5,c._Y,c.JL,d.yH,d.xw,c.sg,d.SQ,d.Wh,g.KE,g.hX,c.Fj,k.Nt,c.JJ,c.u,g.TO,j.g,D.ZL,D.XC,u.sg,$.ey,S.lW,g.R9,N.Hw,R.oG,ki],pipes:[u.Ov,u.uU],styles:[".btn[_ngcontent-%COMP%]{height:34.5px!important;margin-top:4px;line-height:0}.checkbox[_ngcontent-%COMP%]{margin-bottom:1rem}fieldset[_ngcontent-%COMP%]{border:none}"]}),i})(),Ri=(()=>{class i{constructor(e,a,o){this.patientService=e,this.familyService=a,this.dialog=o}ngOnInit(){}openForm(e){return this.dialog.open(mt,{width:"550px",data:""}).afterClosed().subscribe(r=>{r&&(r.id?this.familyService.updateMember(r):this.familyService.addMember(r))})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(y.$),t.Y36(v.d),t.Y36(Z.uw))},i.\u0275cmp=t.Xpm({type:i,selectors:[["mvd-add-member"]],decls:4,vars:0,consts:[["fxFlex","100","fxLayout","row wrap","fxLayoutGap","1rem","fxLayoutAlign","start stretch",1,"content-column-checkbox"],["mat-flat-button","","color","primary",1,"btn",3,"click"],[1,"mat-18"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return a.openForm()}),t.TgZ(2,"mat-icon",2),t._uU(3,"add"),t.qZA()()())},directives:[d.yH,d.xw,d.SQ,d.Wh,S.lW,N.Hw],styles:[".btn[_ngcontent-%COMP%]{height:34.5px!important;margin-top:4px;line-height:0;margin-bottom:16px}"]}),i})();var P=l(6346),Vi=l(9214);function zi(i,n){1&i&&(t.TgZ(0,"th",11),t._uU(1,"C\xf3digo"),t.qZA())}function Wi(i,n){if(1&i&&(t.TgZ(0,"td",12),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.Oqu(e.patient_code)}}function Xi(i,n){1&i&&(t.TgZ(0,"th",11),t._uU(1,"Nombre"),t.qZA())}function Ki(i,n){if(1&i&&(t.TgZ(0,"td",12),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.Oqu(e.patient_name)}}function ta(i,n){1&i&&(t.TgZ(0,"th",11),t._uU(1,"Parentesco"),t.qZA())}function ea(i,n){if(1&i&&(t.TgZ(0,"td",12),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.Oqu(e.kinship_name)}}function ia(i,n){1&i&&(t.TgZ(0,"th",11),t._uU(1,"Edad"),t.qZA())}function aa(i,n){1&i&&(t.TgZ(0,"mat-icon",15),t._uU(1,"loyalty"),t.qZA())}function oa(i,n){if(1&i&&(t.TgZ(0,"td",12)(1,"span",13),t._uU(2),t.YNc(3,aa,2,0,"mat-icon",14),t.qZA()()),2&i){const e=n.$implicit;t.xp6(2),t.Oqu(e.patient_age),t.xp6(1),t.Q6J("ngIf",e.patient_dead)}}function na(i,n){1&i&&(t.TgZ(0,"th",11),t._uU(1," Acciones "),t.qZA())}function ra(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"td",12)(1,"button",16),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).deleteItem(r,"Ser\xe1 eliminado")}),t.TgZ(2,"mat-icon"),t._uU(3,"delete_outline"),t.qZA()()()}}function sa(i,n){1&i&&t._UZ(0,"tr",17)}function ca(i,n){1&i&&t._UZ(0,"tr",18)}function la(i,n){if(1&i&&(t.TgZ(0,"table",1),t.ynx(1,2),t.YNc(2,zi,2,0,"th",3),t.YNc(3,Wi,2,1,"td",4),t.BQk(),t.ynx(4,5),t.YNc(5,Xi,2,0,"th",3),t.YNc(6,Ki,2,1,"td",4),t.BQk(),t.ynx(7,6),t.YNc(8,ta,2,0,"th",3),t.YNc(9,ea,2,1,"td",4),t.BQk(),t.ynx(10,7),t.YNc(11,ia,2,0,"th",3),t.YNc(12,oa,4,2,"td",4),t.BQk(),t.ynx(13,8),t.YNc(14,na,2,0,"th",3),t.YNc(15,ra,4,0,"td",4),t.BQk(),t.YNc(16,sa,1,0,"tr",9),t.YNc(17,ca,1,0,"tr",10),t.qZA()),2&i){const e=t.oxw();t.Q6J("dataSource",e.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns)}}let ma=(()=>{class i{constructor(e,a){this.familyService=e,this.dialog=a,this.displayedColumns=["patient_code","patient_name","kinship_name","patient_age","actions"]}ngOnInit(){this.family$=this.familyService.familyOnEdit.pipe((0,m.U)(e=>(this.family_id=null==e?void 0:e.id,this.dataSource=null==e?void 0:e.patients.map((a,o)=>{var r,s;let x;return x=e.patients[o].dead?this.calculoEdad(e.patients[o].birth,e.patients[o].date_dead):this.calculoEdad(e.patients[o].birth),{patient_id:e.patients[o].id,patient_code:e.patients[o].code,patient_name:`${e.patients[o].name} ${e.patients[o].last_name}`,kinship_name:null===(s=null===(r=a.pivot)||void 0===r?void 0:r.kinship)||void 0===s?void 0:s.name,patient_age:x,patient_dead:e.patients[o].dead}}),e)))}calculoEdad(e,a){const o=O()(),r=O()(e);let s;return s=a?O()(a).diff(r,"years"):o.diff(r,"years"),s}deleteItem(e,a){this.openDialog(e,"DEL",a)}openDialog(e,a,o){let r;o||(o=""),r=(null==e?void 0:e.name)?e.name:e.title,this.dialog.open(Vi.X,{width:"350px",data:{name:r,message:o,value:!1}}).afterClosed().subscribe(f=>{(null==f?void 0:f.value)&&"DEL"===a&&this.removeMember(e)})}removeMember(e){this.familyService.removeMember({id:this.family_id,patient_id:e.patient_id}).pipe((0,T.q)(1)).subscribe()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(v.d),t.Y36(Z.uw))},i.\u0275cmp=t.Xpm({type:i,selectors:[["mvd-members"]],viewQuery:function(e,a){if(1&e&&t.Gf(P.BZ,5),2&e){let o;t.iGM(o=t.CRH())&&(a.table=o.first)}},decls:2,vars:3,consts:[["mat-table","","class","",3,"dataSource",4,"ngIf"],["mat-table","",1,"",3,"dataSource"],["matColumnDef","patient_code"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","patient_name"],["matColumnDef","kinship_name"],["matColumnDef","patient_age"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[2,"display","flex"],["fontSet","material-icons-round","color","warn","matTooltip","Fallecido",4,"ngIf"],["fontSet","material-icons-round","color","warn","matTooltip","Fallecido"],["mat-button","","matTooltip","Eliminar","matTooltipClass","tips",1,"buttons-actions",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,a){1&e&&(t.YNc(0,la,18,3,"table",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,a.family$))},directives:[u.O5,P.BZ,P.w1,P.fO,P.ge,P.Dz,P.ev,N.Hw,J.gM,S.lW,P.as,P.XQ,P.nj,P.Gk],pipes:[u.Ov],styles:[""]}),i})();function da(i,n){if(1&i&&t._UZ(0,"mvd-select-family",7),2&i){const e=t.oxw();t.Q6J("patient",e.patient)}}function pa(i,n){1&i&&(t.TgZ(0,"div",1)(1,"div",2)(2,"h3",3),t._uU(3,"Integrantes de la familia"),t.qZA(),t._UZ(4,"mvd-add-member",8),t.qZA(),t._UZ(5,"mvd-members",5),t.qZA())}let _a=(()=>{class i{constructor(e){this.familyService=e}ngOnInit(){this.families$=this.familyService.familyOnEdit}ngOnDestroy(){this.familyService.setFamilyOnEdit(null),this.familyService.setItems(null)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(v.d))},i.\u0275cmp=t.Xpm({type:i,selectors:[["mvd-family"]],inputs:{patient:"patient"},decls:9,vars:4,consts:[["fxFlex","100","fxLayout","row wrap","fxLayoutGap","1rem"],["fxFlex","49","fxLayout","row wrap","fxLayoutGap","6px",1,"content-group-form"],["fxLayout","row","fxFlex","100","fxLayout","row wrap","fxLayoutGap","6px","fxLayoutAlign","start strech"],["fxLayout","row","fxFlex","50"],["fxFlex","40",3,"patient",4,"ngIf"],["fxFlex","100"],["class","content-group-form","fxFlex","49","fxLayout","row wrap","fxLayoutGap","6px",4,"ngIf"],["fxFlex","40",3,"patient"],["fxFlex","40"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),t._uU(4,"Datos de la familia"),t.qZA(),t.YNc(5,da,1,1,"mvd-select-family",4),t.qZA(),t._UZ(6,"mvd-add-family",5),t.qZA(),t.YNc(7,pa,6,0,"div",6),t.ALo(8,"async"),t.qZA()),2&e&&(t.xp6(5),t.Q6J("ngIf",a.patient),t.xp6(2),t.Q6J("ngIf",t.lcZ(8,2,a.families$)))},directives:[d.yH,d.xw,d.SQ,d.Wh,u.O5,Si,ji,Ri,ma],pipes:[u.Ov],styles:[".content-column-checkbox[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{padding:10px 10px 27px}.content-groups[_ngcontent-%COMP%]{width:100%}mvd-add-family[_ngcontent-%COMP%]{margin-top:1rem}"]}),i})(),ua=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["mvd-family-patient"]],inputs:{patient:"patient"},decls:1,vars:1,consts:[[3,"patient"]],template:function(e,a){1&e&&t._UZ(0,"mvd-family",0),2&e&&t.Q6J("patient",a.patient)},directives:[_a],styles:[""]}),i})();var fa=l(6052);function ga(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",13)(1,"mat-label"),t._uU(2,"Fecha"),t.qZA(),t.TgZ(3,"input",14),t.NdJ("dateChange",function(o){return t.CHM(e),t.oxw(2).formatDate(o,"mas_uni_date")})("click",function(){return t.CHM(e),t.MAs(6).open()}),t.qZA(),t._UZ(4,"mat-datepicker-toggle",15)(5,"mat-datepicker",null,16),t.qZA()}if(2&i){const e=t.MAs(6);t.xp6(3),t.Q6J("matDatepicker",e),t.xp6(1),t.Q6J("for",e)}}function ha(i,n){if(1&i&&(t.TgZ(0,"mat-form-field",17)(1,"mat-label"),t._uU(2,"Observaciones"),t.qZA(),t._UZ(3,"input",18),t.TgZ(4,"mat-error"),t._UZ(5,"mvd-errors-messages",19),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(5),t.Q6J("campo",e.form.get("mas_uni_obs").errors)("name","Observaciones")}}function xa(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",13)(1,"mat-label"),t._uU(2,"Fecha"),t.qZA(),t.TgZ(3,"input",20),t.NdJ("dateChange",function(o){return t.CHM(e),t.oxw(2).formatDate(o,"mas_bi_date")})("click",function(){return t.CHM(e),t.MAs(6).open()}),t.qZA(),t._UZ(4,"mat-datepicker-toggle",15)(5,"mat-datepicker",null,16),t.qZA()}if(2&i){const e=t.MAs(6);t.xp6(3),t.Q6J("matDatepicker",e),t.xp6(1),t.Q6J("for",e)}}function va(i,n){if(1&i&&(t.TgZ(0,"mat-form-field",17)(1,"mat-label"),t._uU(2,"Observaciones"),t.qZA(),t._UZ(3,"input",21),t.TgZ(4,"mat-error"),t._UZ(5,"mvd-errors-messages",19),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(5),t.Q6J("campo",e.form.get("mas_bi_obs").errors)("name","Observaciones")}}function ba(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",13)(1,"mat-label"),t._uU(2,"Fecha"),t.qZA(),t.TgZ(3,"input",22),t.NdJ("dateChange",function(o){return t.CHM(e),t.oxw(2).formatDate(o,"oof_date")})("click",function(){return t.CHM(e),t.MAs(6).open()}),t.qZA(),t._UZ(4,"mat-datepicker-toggle",15)(5,"mat-datepicker",null,16),t.qZA()}if(2&i){const e=t.MAs(6);t.xp6(3),t.Q6J("matDatepicker",e),t.xp6(1),t.Q6J("for",e)}}function Za(i,n){if(1&i&&(t.TgZ(0,"mat-form-field",17)(1,"mat-label"),t._uU(2,"Observaciones"),t.qZA(),t._UZ(3,"input",23),t.TgZ(4,"mat-error"),t._UZ(5,"mvd-errors-messages",19),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(5),t.Q6J("campo",e.form.get("oof_obs").errors)("name","Observaciones")}}function Ta(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",13)(1,"mat-label"),t._uU(2,"Fecha"),t.qZA(),t.TgZ(3,"input",24),t.NdJ("dateChange",function(o){return t.CHM(e),t.oxw(2).formatDate(o,"hist_date")})("click",function(){return t.CHM(e),t.MAs(6).open()}),t.qZA(),t._UZ(4,"mat-datepicker-toggle",15)(5,"mat-datepicker",null,16),t.qZA()}if(2&i){const e=t.MAs(6);t.xp6(3),t.Q6J("matDatepicker",e),t.xp6(1),t.Q6J("for",e)}}function Ca(i,n){if(1&i&&(t.TgZ(0,"mat-form-field",17)(1,"mat-label"),t._uU(2,"Observaciones"),t.qZA(),t._UZ(3,"input",25),t.TgZ(4,"mat-error"),t._UZ(5,"mvd-errors-messages",19),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(5),t.Q6J("campo",e.form.get("hist_obs").errors)("name","Observaciones")}}function ya(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",13)(1,"mat-label"),t._uU(2,"Fecha"),t.qZA(),t.TgZ(3,"input",26),t.NdJ("dateChange",function(o){return t.CHM(e),t.oxw(2).formatDate(o,"gast_date")})("click",function(){return t.CHM(e),t.MAs(6).open()}),t.qZA(),t._UZ(4,"mat-datepicker-toggle",15)(5,"mat-datepicker",null,16),t.qZA()}if(2&i){const e=t.MAs(6);t.xp6(3),t.Q6J("matDatepicker",e),t.xp6(1),t.Q6J("for",e)}}function Aa(i,n){if(1&i&&(t.TgZ(0,"mat-form-field",17)(1,"mat-label"),t._uU(2,"Observaciones"),t.qZA(),t._UZ(3,"input",27),t.TgZ(4,"mat-error"),t._UZ(5,"mvd-errors-messages",19),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(5),t.Q6J("campo",e.form.get("gast_obs").errors)("name","Observaciones")}}function Fa(i,n){if(1&i&&(t.TgZ(0,"form",1)(1,"div",2)(2,"div",3)(3,"h3",4),t._uU(4,"Cirug\xedas Profil\xe1cticas"),t.qZA(),t.TgZ(5,"div",5)(6,"mat-checkbox",6),t._uU(7,"Mastectom\xeda Unilateral "),t.qZA(),t.YNc(8,ga,7,2,"mat-form-field",7),t.YNc(9,ha,6,2,"mat-form-field",8),t.qZA(),t.TgZ(10,"div",5)(11,"mat-checkbox",9),t._uU(12,"Mastectom\xeda Bilateral "),t.qZA(),t.YNc(13,xa,7,2,"mat-form-field",7),t.YNc(14,va,6,2,"mat-form-field",8),t.qZA(),t.TgZ(15,"div",5)(16,"mat-checkbox",10),t._uU(17,"Ooforectom\xeda "),t.qZA(),t.YNc(18,ba,7,2,"mat-form-field",7),t.YNc(19,Za,6,2,"mat-form-field",8),t.qZA(),t.TgZ(20,"div",5)(21,"mat-checkbox",11),t._uU(22,"Histerectom\xeda "),t.qZA(),t.YNc(23,Ta,7,2,"mat-form-field",7),t.YNc(24,Ca,6,2,"mat-form-field",8),t.qZA(),t.TgZ(25,"div",5)(26,"mat-checkbox",12),t._uU(27,"Gastrectom\xeda "),t.qZA(),t.YNc(28,ya,7,2,"mat-form-field",7),t.YNc(29,Aa,6,2,"mat-form-field",8),t.qZA()()()()),2&i){const e=t.oxw();t.Q6J("formGroup",e.form),t.xp6(8),t.Q6J("ngIf",e.form.get("mas_uni").value),t.xp6(1),t.Q6J("ngIf",e.form.get("mas_uni").value),t.xp6(4),t.Q6J("ngIf",e.form.get("mas_bi").value),t.xp6(1),t.Q6J("ngIf",e.form.get("mas_bi").value),t.xp6(4),t.Q6J("ngIf",e.form.get("oof").value),t.xp6(1),t.Q6J("ngIf",e.form.get("oof").value),t.xp6(4),t.Q6J("ngIf",e.form.get("hist").value),t.xp6(1),t.Q6J("ngIf",e.form.get("hist").value),t.xp6(4),t.Q6J("ngIf",e.form.get("gast").value),t.xp6(1),t.Q6J("ngIf",e.form.get("gast").value)}}let Sa=(()=>{class i{constructor(e,a){this.fb=e,this.tracingService=a,this.changeTracing=new t.vpe,this.subscriptions=new fa.w}ngOnInit(){}ngOnChanges(e){}ngAfterViewInit(){this.loadData(),this.createForm()}createForm(){this.form=this.fb.group({patient_id:[this.patient.id],id:[],mas_uni:[!1],mas_uni_date:[],mas_uni_obs:[],mas_bi:[!1],mas_bi_date:[],mas_bi_obs:[],oof:[!1],oof_date:[],oof_obs:[],hist:[!1],hist_date:[],hist_obs:[],gast:[!1],gast_date:[],gast_obs:[]}),this.subscriptions.add(this.form.valueChanges.pipe((0,Y.b)(500)).subscribe(e=>this.changeTracing.emit(e)))}updateForm(e){e&&this.form&&(this.form.patchValue({patient_id:this.patient.id,id:null==e?void 0:e.id,mas_uni:null==e?void 0:e.mas_uni,mas_uni_date:null==e?void 0:e.mas_uni_date,mas_uni_obs:null==e?void 0:e.mas_uni_obs,mas_bi:null==e?void 0:e.mas_bi,mas_bi_date:null==e?void 0:e.mas_bi_date,mas_bi_obs:null==e?void 0:e.mas_bi_obs,oof:null==e?void 0:e.oof,oof_date:null==e?void 0:e.oof_date,oof_obs:null==e?void 0:e.oof_obs,hist:null==e?void 0:e.hist,hist_date:null==e?void 0:e.hist_date,hist_obs:null==e?void 0:e.hist_obs,gast:null==e?void 0:e.gast,gast_date:null==e?void 0:e.gast_date,gast_obs:null==e?void 0:e.gast_obs}),this.changeTracing.emit(this.form.value))}formatDate(e,a){let o=e.value;this.form.get(a).setValue(O()(o).format("YYYY-MM-DD HH:mm:ss"))}loadData(){this.subscriptions.add(this.tracingService.tracePatientOnEdit(this.patient.id).subscribe(e=>this.updateForm(e)))}ngOnDestroy(){this.subscriptions.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(c.qu),t.Y36(F))},i.\u0275cmp=t.Xpm({type:i,selectors:[["mvd-tracing"]],inputs:{patient:"patient"},outputs:{changeTracing:"changeTracing"},features:[t.TTD],decls:1,vars:1,consts:[["fxFlex","100","fxLayoutGap","6px","fxLayout","row wrap","fxLayoutAlign","start center",3,"formGroup",4,"ngIf"],["fxFlex","100","fxLayoutGap","6px","fxLayout","row wrap","fxLayoutAlign","start center",3,"formGroup"],["fxFlex","100","fxLayout","column","fxLayoutGap","6px",1,"content-groups"],["fxFlex","100","fxLayout","row wrap","fxLayoutGap","6px",1,"content-group-form"],["fxLayout","row","fxFlex","100"],["fxFlex","100","fxLayout","row wrap","fxLayoutGap","2rem","fxLayoutAlign","start stretch",1,"content-column-checkbox"],["color","primary","formControlName","mas_uni","fxFlex","20",1,"checkbox"],["class","","appearance","outline","fxFlex","20","fxFlex.lt-md","100",4,"ngIf"],["class","","appearance","outline","fxFlex","30","fxFlex.lt-md","100",4,"ngIf"],["color","primary","formControlName","mas_bi","fxFlex","20",1,"checkbox"],["color","primary","formControlName","oof","fxFlex","20",1,"checkbox"],["color","primary","formControlName","hist","fxFlex","20",1,"checkbox"],["color","primary","formControlName","gast","fxFlex","20",1,"checkbox"],["appearance","outline","fxFlex","20","fxFlex.lt-md","100",1,""],["formControlName","mas_uni_date","matInput","","placeholder","Fecha","autocomplete","off",3,"matDatepicker","dateChange","click"],["matSuffix","",3,"for"],["picker",""],["appearance","outline","fxFlex","30","fxFlex.lt-md","100",1,""],["formControlName","mas_uni_obs","matInput","","type","text","placeholder","Observaciones"],[3,"campo","name"],["formControlName","mas_bi_date","matInput","","placeholder","Fecha","autocomplete","off",3,"matDatepicker","dateChange","click"],["formControlName","mas_bi_obs","matInput","","type","text","placeholder","Observaciones"],["formControlName","oof_date","matInput","","placeholder","Fecha","autocomplete","off",3,"matDatepicker","dateChange","click"],["formControlName","oof_obs","matInput","","type","text","placeholder","Observaciones"],["formControlName","hist_date","matInput","","placeholder","Fecha","autocomplete","off",3,"matDatepicker","dateChange","click"],["formControlName","hist_obs","matInput","","type","text","placeholder","Observaciones"],["formControlName","gast_date","matInput","","placeholder","Fecha","autocomplete","off",3,"matDatepicker","dateChange","click"],["formControlName","gast_obs","matInput","","type","text","placeholder","Observaciones"]],template:function(e,a){1&e&&t.YNc(0,Fa,30,11,"form",0),2&e&&t.Q6J("ngIf",a.form)},directives:[u.O5,c._Y,c.JL,d.yH,d.SQ,d.xw,d.Wh,c.sg,R.oG,c.JJ,c.u,g.KE,g.hX,c.Fj,k.Nt,C.hl,C.nW,g.R9,C.Mq,g.TO,j.g],styles:["h3[_ngcontent-%COMP%]{font-weight:500}.content-column-checkbox[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{padding:10px 10px 27px}.content-groups[_ngcontent-%COMP%]{width:100%}.bg-row[_ngcontent-%COMP%]{background-color:#e1f5fe}.chip-antecedentes[_ngcontent-%COMP%]{min-height:20px!important;font-weight:400;font-size:12px}"]}),i})(),Ia=(()=>{class i{constructor(e,a,o){this.http=e,this.patientService=a,this.snackBar=o}setPatient(e){this.patient=e}storeTumor(e){return this.http.post(`${_.N.API}new_tomors`,e).pipe((0,m.U)(a=>(console.log(this.patient.new_tumors),this.patient.new_tumors=[...this.patient.new_tumors,a.data],this.patientService.setPatientOnEdit(this.patient),this.openSnackBar("Se cre\xf3 correctamente","success-snack-bar"),a.data)))}removeTumor(e){return this.http.delete(`${_.N.API}new_tomors/${e}`).pipe((0,m.U)(a=>{const o=this.patient.new_tumors.filter(s=>s.id!==a.data.id);return this.patient.new_tumors=o,this.patientService.setPatientOnEdit(this.patient),a.data}))}openSnackBar(e,a,o=""){this.snackBar.open(e,o,{duration:2e3,horizontalPosition:"center",verticalPosition:"top",panelClass:a})}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(A.eN),t.LFG(y.$),t.LFG(p.ux))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const qa=["picker"];function Na(i,n){if(1&i&&(t.TgZ(0,"span",27),t._uU(1,"Observaciones: "),t.TgZ(2,"span",22),t._uU(3),t.qZA()()),2&i){const e=t.oxw().$implicit;t.xp6(3),t.Oqu(e.obs)}}function Ua(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"p",20)(1,"span",21),t._uU(2,"Topograf\xeda "),t.TgZ(3,"span",22),t._uU(4),t.qZA()(),t.TgZ(5,"span",16),t._uU(6,"A\xf1o "),t.TgZ(7,"span",22),t._uU(8),t.ALo(9,"date"),t.qZA()(),t.TgZ(10,"span",23),t._uU(11,"Tratamiento "),t.TgZ(12,"span",22),t._uU(13),t.qZA()(),t.YNc(14,Na,4,1,"span",24),t.TgZ(15,"span",25)(16,"button",26),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).removeAntecedent(r.id)}),t.TgZ(17,"mat-icon"),t._uU(18,"delete_outline"),t.qZA()()()()}if(2&i){const e=n.$implicit;t.xp6(4),t.Oqu(e.topography.name),t.xp6(4),t.Oqu(+t.xi3(9,4,e.date,"YYYY")+1),t.xp6(5),t.Oqu(null==e||null==e.treatment?null:e.treatment.name),t.xp6(1),t.Q6J("ngIf",e.obs)}}function wa(i,n){if(1&i&&(t.ynx(0),t.YNc(1,Ua,19,7,"p",19),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.patient.new_tumors)}}function Ja(i,n){if(1&i&&(t.TgZ(0,"mat-option",28),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}const ka={parse:{dateInput:"YYYY"},display:{dateInput:"YYYY",monthYearLabel:"YYYY",monthYearA11yLabel:"YYYY"}};let Qa=(()=>{class i{constructor(e,a,o,r){this.patientService=e,this.newTumorService=a,this.treatmentService=o,this.fb=r,this.options=[],this.treatments=[],this.subscriptions=new G.w,this.topography_id=new c.NI(""),this.topographies=this.patientService.getTopographies()}ngOnInit(){this.formatOptionsSelect(),this.newTumorService.setPatient(this.patient),this.createForm()}change(e){this.treatment_id.setValue(e),this.valueSelect=e}add(e){this.subscriptions.add(this.treatmentService.storeTreatments(e).subscribe())}ngOnChanges(){this.newTumorService.setPatient(this.patient)}createForm(){var e;this.form=this.fb.group({patient_id:null===(e=this.patient)||void 0===e?void 0:e.id,topography_id:[],treatment_id:new c.NI([]),date:[],obs:[]}),console.log()}get treatment_id(){return this.form.get("treatment_id")}removeAntecedent(e){this.subscriptions.add(this.newTumorService.removeTumor(e).subscribe())}submitAntecedent(){console.log(this.form.value),this.valueSelect="",this.subscriptions.add(this.newTumorService.storeTumor(this.form.value).subscribe()),this.form.reset(),this.form.patchValue({patient_id:this.patient.id}),this.form.reset()}ngOnDestroy(){this.subscriptions.unsubscribe()}chosenYearHandler(e,a){let{_d:o}=e;this.selectYear=o,console.log(e);let{_i:r}=e,s=new Date("1/1/"+r.year);console.log(s),this.formatDate(s,"date"),this.picker.close()}formatOptionsSelect(){this.subscriptions.add(this.treatmentService.studies$.subscribe(e=>{this.treatments=e,this.options=e.map(a=>({value:a.id,text:a.name}))}))}formatDate(e,a){let o=e;this.form.get(a).setValue(O()(o).format("YYYY-MM-DD HH:mm:ss"))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(y.$),t.Y36(Ia),t.Y36(ct),t.Y36(c.qu))},i.\u0275cmp=t.Xpm({type:i,selectors:[["mvd-new-tumor"]],viewQuery:function(e,a){if(1&e&&t.Gf(qa,5),2&e){let o;t.iGM(o=t.CRH())&&(a.picker=o.first)}},inputs:{patient:"patient"},features:[t._Bn([{provide:$.sG,useValue:ka}]),t.TTD],decls:28,vars:11,consts:[["fxLayout","row wrap","fxFlex","100","fxLayoutGap","1rem","fxLayoutAlign","start stretch",1,"card","pl-5",3,"formGroup"],["fxFlex","100","fxLayout","column","fxLayoutGap","6px",1,"content-groups"],["fxFlex","100","fxLayout","row wrap","fxLayoutGap","6px",1,"content-group-form"],["fxFlex","100"],[4,"ngIf"],["appearance","outline","fxFlex","28","fxFlex.lt-md","100",1,""],["placeholder","Seleccione...","formControlName","topography_id"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline","fxFlex","10","fxFlex.lt-md","100",1,""],["formControlName","date","matInput","","placeholder","Fecha","autocomplete","off",3,"ngModel","matDatepicker","ngModelChange","click"],["matSuffix","",3,"for"],["startView","multi-year",3,"yearSelected"],["picker",""],[3,"value","options","namePlaceholder","addOption","changeValue"],["appearance","outline","fxFlex","24","fxFlex.lt-md","100",1,""],["formControlName","obs","matInput","","type","text","placeholder","Observaciones"],["fxFlex","10"],["type","button","mat-icon-button","","aria-label","Add",1,"add-icon",3,"click"],["color","primary"],["class","antecedents-list","fxLayoutGap","16px","fxFlex","90",4,"ngFor","ngForOf"],["fxLayoutGap","16px","fxFlex","90",1,"antecedents-list"],["fxFlex","30",1,"text-list"],[1,"bold"],["fxFlex","20",1,"text-list"],["fxFlex","20",4,"ngIf"],["fxFlex","10",1,"btn-list"],["mat-icon-button","","type","button","matTooltip","Eliminar","matTooltipClass","tips",1,"buttons-actions",3,"click"],["fxFlex","20"],[3,"value"]],template:function(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"h3",3),t._uU(4,"Nuevos Tumores"),t.qZA(),t.YNc(5,wa,2,1,"ng-container",4),t.TgZ(6,"mat-form-field",5)(7,"mat-label"),t._uU(8,"Topograf\xeda"),t.qZA(),t.TgZ(9,"mat-select",6),t.YNc(10,Ja,2,2,"mat-option",7),t.ALo(11,"async"),t.qZA()(),t.TgZ(12,"mat-form-field",8)(13,"mat-label"),t._uU(14,"A\xf1o"),t.qZA(),t.TgZ(15,"input",9),t.NdJ("ngModelChange",function(s){return a.selectYear=s})("click",function(){return t.CHM(o),t.MAs(18).open()}),t.qZA(),t._UZ(16,"mat-datepicker-toggle",10),t.TgZ(17,"mat-datepicker",11,12),t.NdJ("yearSelected",function(s){t.CHM(o);const f=t.MAs(18);return a.chosenYearHandler(s,f)}),t.qZA()(),t.TgZ(19,"mvd-input-select-add-item",13),t.NdJ("addOption",function(s){return a.add(s)})("changeValue",function(s){return a.change(s)}),t.qZA(),t.TgZ(20,"mat-form-field",14)(21,"mat-label"),t._uU(22,"Observaciones"),t.qZA(),t._UZ(23,"input",15),t.qZA(),t.TgZ(24,"span",16)(25,"button",17),t.NdJ("click",function(){return a.submitAntecedent()}),t.TgZ(26,"mat-icon",18),t._uU(27,"add_circle"),t.qZA()()()()()()}if(2&e){const o=t.MAs(18);t.Q6J("formGroup",a.form),t.xp6(5),t.Q6J("ngIf",null==a.patient?null:a.patient.new_tumors),t.xp6(5),t.Q6J("ngForOf",t.lcZ(11,9,a.topographies)),t.xp6(5),t.Q6J("ngModel",a.selectYear)("matDatepicker",o),t.xp6(1),t.Q6J("for",o),t.xp6(3),t.Q6J("value",a.valueSelect)("options",a.options)("namePlaceholder","Tratamiento")}},directives:[c._Y,c.JL,d.xw,d.yH,d.SQ,d.Wh,c.sg,u.O5,u.sg,S.lW,J.gM,N.Hw,g.KE,g.hX,W.gD,c.JJ,c.u,$.ey,c.Fj,k.Nt,C.hl,C.nW,g.R9,C.Mq,K.F],pipes:[u.uU,u.Ov],styles:[".antecedents-list[_ngcontent-%COMP%]{height:25px;font-size:10pt;align-items:center}h3[_ngcontent-%COMP%]{font-weight:500}.content-column-checkbox[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{padding:10px 10px 27px}.content-groups[_ngcontent-%COMP%]{width:100%}.bg-row[_ngcontent-%COMP%]{background-color:#e1f5fe}.chip-antecedentes[_ngcontent-%COMP%]{min-height:20px!important;font-weight:400;font-size:12px}.bold[_ngcontent-%COMP%]{font-weight:700}.add-icon[_ngcontent-%COMP%]{margin-left:5px}"]}),i})(),Oa=(()=>{class i{constructor(e,a,o){this.http=e,this.patientService=a,this.snackBar=o}setPatient(e){this.patient=e}storeScore(e){return this.http.post(`${_.N.API}patient_scores`,e).pipe((0,m.U)(a=>(console.log(this.patient.patient_scores),this.patient.patient_scores=[...this.patient.patient_scores,a.data],this.patientService.setPatientOnEdit(this.patient),this.openSnackBar("Se cre\xf3 correctamente","success-snack-bar"),a.data)))}removeScore(e){return this.http.delete(`${_.N.API}patient_scores/${e}`).pipe((0,m.U)(a=>{const o=this.patient.patient_scores.filter(s=>s.id!==a.data.id);return this.patient.patient_scores=o,this.patientService.setPatientOnEdit(this.patient),a.data}))}openSnackBar(e,a,o=""){this.snackBar.open(e,o,{duration:2e3,horizontalPosition:"center",verticalPosition:"top",panelClass:a})}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(A.eN),t.LFG(y.$),t.LFG(p.ux))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Pa(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"p",14)(1,"span",15),t._uU(2),t.qZA(),t.TgZ(3,"span",16)(4,"button",17),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).removeAntecedent(r.id)}),t.TgZ(5,"mat-icon"),t._uU(6,"delete_outline"),t.qZA()()()()}if(2&i){const e=n.$implicit;t.xp6(2),t.AsE("Score ",e.score,", ",e.percentage,"% .")}}function Ma(i,n){if(1&i&&(t.ynx(0),t.YNc(1,Pa,7,2,"p",13),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.patient.patient_scores)}}let Ya=(()=>{class i{constructor(e,a,o){this.patientService=e,this.fb=a,this.scoreService=o,this.subscriptions=new G.w}ngOnInit(){this.scoreService.setPatient(this.patient),this.createForm()}createForm(){var e;this.form=this.fb.group({patient_id:null===(e=this.patient)||void 0===e?void 0:e.id,score:[null,c.kI.required],percentage:[0,[c.kI.required]]})}removeAntecedent(e){this.scoreService.removeScore(e).pipe((0,T.q)(1)).subscribe()}submitAntecedent(){this.subscriptions.add(this.scoreService.storeScore(this.form.value).pipe((0,T.q)(1)).subscribe()),this.form.reset(),this.form.patchValue({patient_id:this.patient.id})}ngOnDestroy(){this.subscriptions.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(y.$),t.Y36(c.qu),t.Y36(Oa))},i.\u0275cmp=t.Xpm({type:i,selectors:[["mvd-score-patient"]],inputs:{patient:"patient"},decls:20,vars:2,consts:[["fxLayout","row wrap","fxFlex","100","fxLayoutGap","1rem","fxLayoutAlign","start stretch",1,"card","pl-5",3,"formGroup"],["fxFlex","100","fxLayout","column","fxLayoutGap","6px",1,"content-groups"],["fxFlex","100","fxLayout","row wrap","fxLayoutGap","6px",1,"content-group-form"],["fxFlex","100"],[4,"ngIf"],["appearance","outline","fxFlex","30","fxFlex.lt-md","100",1,""],["formControlName","score","matInput","","type","text","placeholder","Score"],["appearance","outline","fxFlex","20","fxFlex.lt-md","100",1,""],["formControlName","percentage","matInput","","type","number","placeholder","Porcentage"],["matSuffix",""],["fxFlex","10"],["type","button","mat-icon-button","","aria-label","Add",1,"add-icon",3,"click"],["color","primary"],["class","antecedents-list","fxFlex","100","fxFlex.lt-md","100",4,"ngFor","ngForOf"],["fxFlex","100","fxFlex.lt-md","100",1,"antecedents-list"],["fxFlex","50","fxFlex.lt-md","100",1,"text-list"],[1,"btn-list"],["mat-icon-button","","type","button","matTooltip","Eliminar","matTooltipClass","tips",1,"buttons-actions",3,"click"]],template:function(e,a){1&e&&(t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"h3",3),t._uU(4,"Score de Riesgo"),t.qZA(),t.YNc(5,Ma,2,1,"ng-container",4),t.TgZ(6,"mat-form-field",5)(7,"mat-label"),t._uU(8,"Score"),t.qZA(),t._UZ(9,"input",6),t.qZA(),t.TgZ(10,"mat-form-field",7)(11,"mat-label"),t._uU(12,"Porcentage"),t.qZA(),t._UZ(13,"input",8),t.TgZ(14,"mat-icon",9),t._uU(15,"percent"),t.qZA()(),t.TgZ(16,"span",10)(17,"button",11),t.NdJ("click",function(){return a.submitAntecedent()}),t.TgZ(18,"mat-icon",12),t._uU(19,"add_circle"),t.qZA()()()()()()),2&e&&(t.Q6J("formGroup",a.form),t.xp6(5),t.Q6J("ngIf",null==a.patient?null:a.patient.new_tumors))},directives:[c._Y,c.JL,d.xw,d.yH,d.SQ,d.Wh,c.sg,u.O5,u.sg,S.lW,J.gM,N.Hw,g.KE,g.hX,c.Fj,k.Nt,c.JJ,c.u,c.wV,g.R9],styles:[".antecedents-list[_ngcontent-%COMP%]{height:25px;font-size:10pt;align-items:center;display:flex}.antecedents-list[_ngcontent-%COMP%]   .text-list-antecedente[_ngcontent-%COMP%]{width:250px}.antecedents-list[_ngcontent-%COMP%]   .btn-list[_ngcontent-%COMP%]{width:10%}h3[_ngcontent-%COMP%]{font-weight:500}.content-column-checkbox[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{padding:10px 10px 27px}.content-groups[_ngcontent-%COMP%]{width:100%}.bg-row[_ngcontent-%COMP%]{background-color:#e1f5fe}.chip-antecedentes[_ngcontent-%COMP%]{min-height:20px!important;font-weight:400;font-size:12px}"]}),i})();function Da(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",9)(1,"mat-label"),t._uU(2,"Fecha"),t.qZA(),t.TgZ(3,"input",10),t.NdJ("dateChange",function(o){return t.CHM(e),t.oxw(2).formatDate(o,"qui_date")})("click",function(){return t.CHM(e),t.MAs(6).open()}),t.qZA(),t._UZ(4,"mat-datepicker-toggle",11)(5,"mat-datepicker",null,12),t.qZA()}if(2&i){const e=t.MAs(6);t.xp6(3),t.Q6J("matDatepicker",e),t.xp6(1),t.Q6J("for",e)}}function La(i,n){if(1&i&&(t.TgZ(0,"mat-form-field",13)(1,"mat-label"),t._uU(2,"Observaciones"),t.qZA(),t._UZ(3,"input",14),t.TgZ(4,"mat-error"),t._UZ(5,"mvd-errors-messages",15),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(5),t.Q6J("campo",e.form.get("qui_obs").errors)("name","Observaciones")}}function Ea(i,n){if(1&i&&(t.TgZ(0,"form",1)(1,"div",2)(2,"div",3)(3,"h3",4),t._uU(4,"Quimioprofilaxis"),t.qZA(),t.TgZ(5,"div",5)(6,"mat-checkbox",6),t._uU(7,"Quimioprofilaxis "),t.qZA(),t.YNc(8,Da,7,2,"mat-form-field",7),t.YNc(9,La,6,2,"mat-form-field",8),t.qZA()()()()),2&i){const e=t.oxw();t.Q6J("formGroup",e.form),t.xp6(8),t.Q6J("ngIf",e.form.get("qui").value),t.xp6(1),t.Q6J("ngIf",e.form.get("qui").value)}}let $a=(()=>{class i{constructor(e,a){this.fb=e,this.tracingService=a,this.changeTracing=new t.vpe,this.subscriptions=new G.w}ngOnInit(){this.loadData(),this.createForm()}ngOnChanges(){}createForm(){this.form=this.fb.group({id:[],patient_id:[this.patient.id],qui:[!1],qui_date:[],qui_obs:[]}),this.subscriptions.add(this.form.valueChanges.pipe((0,Y.b)(500)).subscribe(e=>this.changeTracing.emit(e)))}updateForm(e){e&&this.form&&(this.form.patchValue({patient_id:this.patient.id,id:null==e?void 0:e.id,qui:null==e?void 0:e.qui,qui_date:null==e?void 0:e.qui_date,qui_obs:null==e?void 0:e.qui_obs}),this.changeTracing.emit(this.form.value))}formatDate(e,a){let o=e.value;this.form.get(a).setValue(O()(o).format("YYYY-MM-DD HH:mm:ss"))}loadData(){this.subscriptions.add(this.tracingService.tracePatientOnEdit(this.patient.id).subscribe(e=>this.updateForm(e)))}ngOnDestroy(){this.subscriptions.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(c.qu),t.Y36(F))},i.\u0275cmp=t.Xpm({type:i,selectors:[["mvd-tracing-quimioprofilaxis"]],inputs:{patient:"patient"},outputs:{changeTracing:"changeTracing"},features:[t.TTD],decls:1,vars:1,consts:[["fxFlex","100","fxLayoutGap","6px","fxLayout","row wrap","fxLayoutAlign","start center",3,"formGroup",4,"ngIf"],["fxFlex","100","fxLayoutGap","6px","fxLayout","row wrap","fxLayoutAlign","start center",3,"formGroup"],["fxFlex","100","fxLayout","column","fxLayoutGap","6px",1,"content-groups"],["fxFlex","100","fxLayout","row wrap","fxLayoutGap","6px",1,"content-group-form"],["fxLayout","row","fxFlex","100"],["fxFlex","100","fxLayout","row wrap","fxLayoutGap","2rem","fxLayoutAlign","start stretch",1,"content-column-checkbox"],["color","primary","formControlName","qui","fxFlex","20",1,"checkbox"],["class","","appearance","outline","fxFlex","20","fxFlex.lt-md","100",4,"ngIf"],["class","","appearance","outline","fxFlex","30","fxFlex.lt-md","100",4,"ngIf"],["appearance","outline","fxFlex","20","fxFlex.lt-md","100",1,""],["formControlName","qui_date","matInput","","placeholder","Fecha","autocomplete","off",3,"matDatepicker","dateChange","click"],["matSuffix","",3,"for"],["picker",""],["appearance","outline","fxFlex","30","fxFlex.lt-md","100",1,""],["formControlName","qui_obs","matInput","","type","text","placeholder","Observaciones"],[3,"campo","name"]],template:function(e,a){1&e&&t.YNc(0,Ea,10,3,"form",0),2&e&&t.Q6J("ngIf",a.form)},directives:[u.O5,c._Y,c.JL,d.yH,d.SQ,d.xw,d.Wh,c.sg,R.oG,c.JJ,c.u,g.KE,g.hX,c.Fj,k.Nt,C.hl,C.nW,g.R9,C.Mq,g.TO,j.g],styles:[""]}),i})();function Ba(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",9)(1,"mat-label"),t._uU(2,"Fecha"),t.qZA(),t.TgZ(3,"input",10),t.NdJ("dateChange",function(o){return t.CHM(e),t.oxw(2).formatDate(o,"onc_date")})("click",function(){return t.CHM(e),t.MAs(6).open()}),t.qZA(),t._UZ(4,"mat-datepicker-toggle",11)(5,"mat-datepicker",null,12),t.qZA()}if(2&i){const e=t.MAs(6);t.xp6(3),t.Q6J("matDatepicker",e),t.xp6(1),t.Q6J("for",e)}}function Ga(i,n){if(1&i&&(t.TgZ(0,"mat-form-field",13)(1,"mat-label"),t._uU(2,"Observaciones"),t.qZA(),t._UZ(3,"input",14),t.TgZ(4,"mat-error"),t._UZ(5,"mvd-errors-messages",15),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(5),t.Q6J("campo",e.form.get("onc_obs").errors)("name","Observaciones")}}function Ha(i,n){if(1&i&&(t.TgZ(0,"form",1)(1,"div",2)(2,"div",3)(3,"h3",4),t._uU(4,"Oncofertilidad"),t.qZA(),t.TgZ(5,"div",5)(6,"mat-checkbox",6),t._uU(7,"Oncofertilidad "),t.qZA(),t.YNc(8,Ba,7,2,"mat-form-field",7),t.YNc(9,Ga,6,2,"mat-form-field",8),t.qZA()()()()),2&i){const e=t.oxw();t.Q6J("formGroup",e.form),t.xp6(8),t.Q6J("ngIf",e.form.get("onc").value),t.xp6(1),t.Q6J("ngIf",e.form.get("onc").value)}}let ja=(()=>{class i{constructor(e,a){this.fb=e,this.tracingService=a,this.changeTracing=new t.vpe,this.subscriptions=new G.w}ngOnInit(){this.createForm(),this.loadData()}createForm(){this.form=this.fb.group({id:[],patient_id:[this.patient.id],onc:[!1],onc_date:[],onc_obs:[]}),this.subscriptions.add(this.form.valueChanges.pipe((0,Y.b)(500)).subscribe(e=>this.changeTracing.emit(e)))}updateForm(e){e&&this.form&&(this.form.patchValue({patient_id:this.patient.id,id:null==e?void 0:e.id,onc:null==e?void 0:e.onc,onc_date:null==e?void 0:e.onc_date,onc_obs:null==e?void 0:e.onc_obs}),this.changeTracing.emit(this.form.value))}formatDate(e,a){let o=e.value;this.form.get(a).setValue(O()(o).format("YYYY-MM-DD HH:mm:ss"))}loadData(){this.subscriptions.add(this.tracingService.tracePatientOnEdit(this.patient.id).subscribe(e=>this.updateForm(e)))}ngOnDestroy(){this.subscriptions.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(c.qu),t.Y36(F))},i.\u0275cmp=t.Xpm({type:i,selectors:[["mvd-tracing-oncofertilidad"]],inputs:{patient:"patient"},outputs:{changeTracing:"changeTracing"},decls:1,vars:1,consts:[["fxFlex","100","fxLayoutGap","6px","fxLayout","row wrap","fxLayoutAlign","start center",3,"formGroup",4,"ngIf"],["fxFlex","100","fxLayoutGap","6px","fxLayout","row wrap","fxLayoutAlign","start center",3,"formGroup"],["fxFlex","100","fxLayout","column","fxLayoutGap","6px",1,"content-groups"],["fxFlex","100","fxLayout","row wrap","fxLayoutGap","6px",1,"content-group-form"],["fxLayout","row","fxFlex","100"],["fxFlex","100","fxLayout","row wrap","fxLayoutGap","2rem","fxLayoutAlign","start stretch",1,"content-column-checkbox"],["color","primary","formControlName","onc","fxFlex","20",1,"checkbox"],["class","","appearance","outline","fxFlex","20","fxFlex.lt-md","100",4,"ngIf"],["class","","appearance","outline","fxFlex","30","fxFlex.lt-md","100",4,"ngIf"],["appearance","outline","fxFlex","20","fxFlex.lt-md","100",1,""],["formControlName","onc_date","matInput","","placeholder","Fecha","autocomplete","off",3,"matDatepicker","dateChange","click"],["matSuffix","",3,"for"],["picker",""],["appearance","outline","fxFlex","30","fxFlex.lt-md","100",1,""],["formControlName","onc_obs","matInput","","type","text","placeholder","Observaciones"],[3,"campo","name"]],template:function(e,a){1&e&&t.YNc(0,Ha,10,3,"form",0),2&e&&t.Q6J("ngIf",a.form)},directives:[u.O5,c._Y,c.JL,d.yH,d.SQ,d.xw,d.Wh,c.sg,R.oG,c.JJ,c.u,g.KE,g.hX,c.Fj,k.Nt,C.hl,C.nW,g.R9,C.Mq,g.TO,j.g],styles:[""]}),i})(),Ra=(()=>{class i{constructor(e,a,o){this.http=e,this.patientService=a,this.snackBar=o,this.bdInternationalsSubject$=new b.X([])}setPatient(e){this.patient=e}setInternationalsBds(e){this.bdInternationalsSubject$.next(e)}get internationalsBds$(){return this.bdInternationalsSubject$.value.length||this.getBdsInternationals().subscribe(),this.bdInternationalsSubject$.asObservable()}storeTracingBdInternational(e){return this.http.post(`${_.N.API}patient_international_bds`,e).pipe((0,m.U)(a=>(this.patient.international_bds=a.data,this.patientService.setPatientOnEdit(this.patient),this.openSnackBar("Se cre\xf3 correctamente","success-snack-bar"),a.data)))}removeTracingBdInternational(e){return this.http.post(`${_.N.API}patient_international_bds/${e}`,{patient_id:this.patient.id}).pipe((0,m.U)(o=>(this.patient.international_bds=o.data,this.patientService.setPatientOnEdit(this.patient),this.openSnackBar("Se elimin\xf3 correctamente","success-snack-bar"),o.data)))}storeBdInternational(e){return this.http.post(`${_.N.API}international_bds`,e).pipe((0,m.U)(a=>{let o=this.bdInternationalsSubject$.getValue();return a.data&&(o=[...o,a.data]),this.setInternationalsBds(o),this.openSnackBar("Se cre\xf3 correctamente","success-snack-bar"),a.data}))}getBdsInternationals(){return this.http.get(`${_.N.API}international_bds`,{params:(new A.LE).set("page",1).set("sort","asc").set("per_page",1e3)}).pipe((0,m.U)(e=>(this.setInternationalsBds(e.data.data.length?e.data.data:[]),console.log(e),e.data.data)))}openSnackBar(e,a,o=""){this.snackBar.open(e,o,{duration:2e3,horizontalPosition:"center",verticalPosition:"top",panelClass:a})}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(A.eN),t.LFG(y.$),t.LFG(p.ux))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Va(i,n){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij("Observaciones: ",null==e.pivot?null:e.pivot.obs," ")}}function za(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"p",16)(1,"span",17),t._uU(2),t.ALo(3,"date"),t.qZA(),t.YNc(4,Va,2,1,"span",4),t.TgZ(5,"span",18)(6,"button",19),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).removeTrace(null==r.pivot?null:r.pivot.id)}),t.TgZ(7,"mat-icon"),t._uU(8,"delete_outline"),t.qZA()()()()}if(2&i){const e=n.$implicit;t.xp6(2),t.AsE("Base de datos ",e.name,", Ingresado ",t.xi3(3,3,null==e.pivot?null:e.pivot.date,"dd/MM/YYYY")," ."),t.xp6(2),t.Q6J("ngIf",null==e.pivot?null:e.pivot.obs)}}function Wa(i,n){if(1&i&&(t.ynx(0),t.YNc(1,za,9,6,"p",15),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.patient.international_bds)}}let Xa=(()=>{class i{constructor(e,a){this.tracingBdInterService=e,this.fb=a,this.options=[],this.subscriptions=new G.w}ngOnInit(){this.formatOptionsSelect(),this.tracingBdInterService.setPatient(this.patient),this.createForm()}createForm(){var e;this.form=this.fb.group({patient_id:[null===(e=this.patient)||void 0===e?void 0:e.id],international_bd_id:[],date:[],obs:[]})}submitTrace(){this.subscriptions.add(this.tracingBdInterService.storeTracingBdInternational(this.form.value).subscribe()),this.form.reset(),this.valueSelect="",this.form.patchValue({patient_id:this.patient.id})}removeTrace(e){this.tracingBdInterService.removeTracingBdInternational(e).pipe((0,T.q)(1)).subscribe()}ngOnDestroy(){this.subscriptions.unsubscribe()}formatDate(e,a){let o=e.value;this.form.get(a).setValue(O()(o).format("YYYY-MM-DD HH:mm:ss"))}formatOptionsSelect(){this.subscriptions.add(this.tracingBdInterService.internationalsBds$.subscribe(e=>{this.bds=e,this.options=e.map(a=>({value:a.id,text:a.name}))}))}addBd(e){this.subscriptions.add(this.tracingBdInterService.storeBdInternational(e).subscribe())}changeBd(e){this.form.get("international_bd_id").setValue(e),this.valueSelect=e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Ra),t.Y36(c.qu))},i.\u0275cmp=t.Xpm({type:i,selectors:[["mvd-tracing-bd-international"]],inputs:{patient:"patient"},decls:22,vars:7,consts:[["fxLayout","row wrap","fxFlex","100","fxLayoutGap","1rem","fxLayoutAlign","start stretch",1,"card","pl-5",3,"formGroup"],["fxFlex","100","fxLayout","column","fxLayoutGap","6px",1,"content-groups"],["fxFlex","100","fxLayout","row wrap","fxLayoutGap","6px",1,"content-group-form"],["fxFlex","100"],[4,"ngIf"],[3,"value","options","namePlaceholder","addOption","changeValue"],["appearance","outline","fxFlex","20","fxFlex.lt-md","100",1,""],["formControlName","date","matInput","","placeholder","Fecha","autocomplete","off",3,"matDatepicker","dateChange","click"],["matSuffix","",3,"for"],["picker",""],["appearance","outline","fxFlex","30","fxFlex.lt-md","100",1,""],["formControlName","obs","matInput","","type","text","placeholder","Observaciones"],["fxFlex","10"],["type","button","mat-icon-button","","aria-label","Add",1,"add-icon",3,"click"],["color","primary"],["class","antecedents-list","fxFlex","100",4,"ngFor","ngForOf"],["fxFlex","100",1,"antecedents-list"],[1,"text-list"],[1,"btn-list"],["mat-icon-button","","type","button","matTooltip","Eliminar","matTooltipClass","tips",1,"buttons-actions",3,"click"]],template:function(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"h3",3),t._uU(4,"Base de Datos Internacionales"),t.qZA(),t.YNc(5,Wa,2,1,"ng-container",4),t.TgZ(6,"mvd-input-select-add-item",5),t.NdJ("addOption",function(s){return a.addBd(s)})("changeValue",function(s){return a.changeBd(s)}),t.qZA(),t.TgZ(7,"mat-form-field",6)(8,"mat-label"),t._uU(9,"Fecha"),t.qZA(),t.TgZ(10,"input",7),t.NdJ("dateChange",function(s){return a.formatDate(s,"date")})("click",function(){return t.CHM(o),t.MAs(13).open()}),t.qZA(),t._UZ(11,"mat-datepicker-toggle",8)(12,"mat-datepicker",null,9),t.qZA(),t.TgZ(14,"mat-form-field",10)(15,"mat-label"),t._uU(16,"Observaciones"),t.qZA(),t._UZ(17,"input",11),t.qZA(),t.TgZ(18,"span",12)(19,"button",13),t.NdJ("click",function(){return a.submitTrace()}),t.TgZ(20,"mat-icon",14),t._uU(21,"add_circle"),t.qZA()()()()()()}if(2&e){const o=t.MAs(13);t.Q6J("formGroup",a.form),t.xp6(5),t.Q6J("ngIf",null==a.patient||null==a.patient.international_bds?null:a.patient.international_bds.length),t.xp6(1),t.Q6J("value",a.valueSelect)("options",a.options)("namePlaceholder","BD Internacionales"),t.xp6(4),t.Q6J("matDatepicker",o),t.xp6(1),t.Q6J("for",o)}},directives:[c._Y,c.JL,d.xw,d.yH,d.SQ,d.Wh,c.sg,u.O5,u.sg,S.lW,J.gM,N.Hw,K.F,g.KE,g.hX,c.Fj,k.Nt,C.hl,c.JJ,c.u,C.nW,g.R9,C.Mq],pipes:[u.uU],styles:[""]}),i})(),Ka=(()=>{class i{constructor(e,a,o){this.http=e,this.patientService=a,this.snackBar=o,this.studiesSubject$=new b.X([])}setPatient(e){this.patient=e}setStudies(e){this.studiesSubject$.next(e)}get studies$(){return this.studiesSubject$.value.length||this.getStudies().subscribe(),this.studiesSubject$.asObservable()}storeTracingStudy(e){return this.http.post(`${_.N.API}patient_study`,e).pipe((0,m.U)(a=>(this.patient.studies=a.data,this.patientService.setPatientOnEdit(this.patient),this.openSnackBar("Se cre\xf3 correctamente","success-snack-bar"),a.data)))}removeTracingStudy(e){return this.http.post(`${_.N.API}patient_study/${e}`,{patient_id:this.patient.id}).pipe((0,m.U)(o=>(this.patient.studies=o.data,this.patientService.setPatientOnEdit(this.patient),this.openSnackBar("Se elimin\xf3 correctamente","success-snack-bar"),o.data)))}storeStudy(e){return this.http.post(`${_.N.API}studies`,e).pipe((0,m.U)(a=>{let o=this.studiesSubject$.getValue();return a.data&&(o=[...o,a.data]),this.setStudies(o),this.openSnackBar("Se cre\xf3 correctamente","success-snack-bar"),a.data}))}getStudies(){return this.http.get(`${_.N.API}studies`,{params:(new A.LE).set("page",1).set("sort","asc").set("per_page",1e3)}).pipe((0,m.U)(e=>(this.setStudies(e.data.data.length?e.data.data:[]),console.log(e),e.data.data)))}openSnackBar(e,a,o=""){this.snackBar.open(e,o,{duration:2e3,horizontalPosition:"center",verticalPosition:"top",panelClass:a})}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(A.eN),t.LFG(y.$),t.LFG(p.ux))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function to(i,n){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij("Observaciones: ",null==e.pivot?null:e.pivot.obs," ")}}function eo(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"p",16)(1,"span",17),t._uU(2),t.ALo(3,"date"),t.qZA(),t.YNc(4,to,2,1,"span",4),t.TgZ(5,"span",18)(6,"button",19),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).removeTrace(null==r.pivot?null:r.pivot.id)}),t.TgZ(7,"mat-icon"),t._uU(8,"delete_outline"),t.qZA()()()()}if(2&i){const e=n.$implicit;t.xp6(2),t.AsE("Estudio ",e.name,", Ingresado ",t.xi3(3,3,null==e.pivot?null:e.pivot.date,"dd/MM/YYYY")," ."),t.xp6(2),t.Q6J("ngIf",null==e.pivot?null:e.pivot.obs)}}function io(i,n){if(1&i&&(t.ynx(0),t.YNc(1,eo,9,6,"p",15),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.patient.studies)}}let ao=(()=>{class i{constructor(e,a){this.tracingStudiesService=e,this.fb=a,this.options=[],this.subscriptions=new G.w}ngOnInit(){this.formatOptionsSelect(),this.tracingStudiesService.setPatient(this.patient),this.createForm()}createForm(){var e;this.form=this.fb.group({patient_id:[null===(e=this.patient)||void 0===e?void 0:e.id],study_id:[],date:[],obs:[]})}submitTrace(){this.subscriptions.add(this.tracingStudiesService.storeTracingStudy(this.form.value).subscribe()),this.form.reset(),this.valueSelect="",this.form.patchValue({patient_id:this.patient.id})}removeTrace(e){this.subscriptions.add(this.tracingStudiesService.removeTracingStudy(e).subscribe())}ngOnDestroy(){this.subscriptions.unsubscribe()}formatDate(e,a){let o=e.value;this.form.get(a).setValue(O()(o).format("YYYY-MM-DD HH:mm:ss"))}formatOptionsSelect(){this.subscriptions.add(this.tracingStudiesService.studies$.subscribe(e=>{this.studies=e,this.options=e.map(a=>({value:a.id,text:a.name}))}))}add(e){this.subscriptions.add(this.tracingStudiesService.storeStudy(e).subscribe())}change(e){this.form.get("study_id").setValue(e),this.valueSelect=e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Ka),t.Y36(c.qu))},i.\u0275cmp=t.Xpm({type:i,selectors:[["mvd-tracing-studies"]],inputs:{patient:"patient"},decls:22,vars:7,consts:[["fxLayout","row wrap","fxFlex","100","fxLayoutGap","1rem","fxLayoutAlign","start stretch",1,"card","pl-5",3,"formGroup"],["fxFlex","100","fxLayout","column","fxLayoutGap","6px",1,"content-groups"],["fxFlex","100","fxLayout","row wrap","fxLayoutGap","6px",1,"content-group-form"],["fxFlex","100"],[4,"ngIf"],[3,"value","options","namePlaceholder","addOption","changeValue"],["appearance","outline","fxFlex","20","fxFlex.lt-md","100",1,""],["formControlName","date","matInput","","placeholder","Fecha","autocomplete","off",3,"matDatepicker","dateChange","click"],["matSuffix","",3,"for"],["picker",""],["appearance","outline","fxFlex","30","fxFlex.lt-md","100",1,""],["formControlName","obs","matInput","","type","text","placeholder","Observaciones"],["fxFlex","10"],["type","button","mat-icon-button","","aria-label","Add",1,"add-icon",3,"click"],["color","primary"],["class","antecedents-list","fxFlex","100",4,"ngFor","ngForOf"],["fxFlex","100",1,"antecedents-list"],[1,"text-list"],[1,"btn-list"],["mat-icon-button","","type","button","matTooltip","Eliminar","matTooltipClass","tips",1,"buttons-actions",3,"click"]],template:function(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"h3",3),t._uU(4,"Estudios que participa"),t.qZA(),t.YNc(5,io,2,1,"ng-container",4),t.TgZ(6,"mvd-input-select-add-item",5),t.NdJ("addOption",function(s){return a.add(s)})("changeValue",function(s){return a.change(s)}),t.qZA(),t.TgZ(7,"mat-form-field",6)(8,"mat-label"),t._uU(9,"Fecha"),t.qZA(),t.TgZ(10,"input",7),t.NdJ("dateChange",function(s){return a.formatDate(s,"date")})("click",function(){return t.CHM(o),t.MAs(13).open()}),t.qZA(),t._UZ(11,"mat-datepicker-toggle",8)(12,"mat-datepicker",null,9),t.qZA(),t.TgZ(14,"mat-form-field",10)(15,"mat-label"),t._uU(16,"Observaciones"),t.qZA(),t._UZ(17,"input",11),t.qZA(),t.TgZ(18,"span",12)(19,"button",13),t.NdJ("click",function(){return a.submitTrace()}),t.TgZ(20,"mat-icon",14),t._uU(21,"add_circle"),t.qZA()()()()()()}if(2&e){const o=t.MAs(13);t.Q6J("formGroup",a.form),t.xp6(5),t.Q6J("ngIf",null==a.patient||null==a.patient.studies?null:a.patient.studies.length),t.xp6(1),t.Q6J("value",a.valueSelect)("options",a.options)("namePlaceholder","Estudio"),t.xp6(4),t.Q6J("matDatepicker",o),t.xp6(1),t.Q6J("for",o)}},directives:[c._Y,c.JL,d.xw,d.yH,d.SQ,d.Wh,c.sg,u.O5,u.sg,S.lW,J.gM,N.Hw,K.F,g.KE,g.hX,c.Fj,k.Nt,C.hl,c.JJ,c.u,C.nW,g.R9,C.Mq],pipes:[u.uU],styles:[""]}),i})(),oo=(()=>{class i{constructor(e,a,o){this.http=e,this.patientService=a,this.snackBar=o,this.questionariesSubject$=new b.X([])}setPatient(e){this.patient=e}setQuestionaries(e){this.questionariesSubject$.next(e)}get questionaries$(){return this.questionariesSubject$.value.length||this.getQuestionaries().subscribe(),this.questionariesSubject$.asObservable()}storeTracingQuestionary(e){return this.http.post(`${_.N.API}patient_questionary`,e).pipe((0,m.U)(a=>(this.patient.questionnaires=a.data,this.patientService.setPatientOnEdit(this.patient),this.openSnackBar("Se cre\xf3 correctamente","success-snack-bar"),a.data)))}removeTracingQuestionary(e){return this.http.post(`${_.N.API}patient_questionary/${e}`,{patient_id:this.patient.id}).pipe((0,m.U)(o=>(this.patient.questionnaires=o.data,this.patientService.setPatientOnEdit(this.patient),this.openSnackBar("Se elimin\xf3 correctamente","success-snack-bar"),o.data)))}storeQuestionary(e){return this.http.post(`${_.N.API}questionnaires`,e).pipe((0,m.U)(a=>{let o=this.questionariesSubject$.getValue();return a.data&&(o=[...o,a.data]),this.setQuestionaries(o),this.openSnackBar("Se cre\xf3 correctamente","success-snack-bar"),a.data}))}getQuestionaries(){return this.http.get(`${_.N.API}questionnaires`,{params:(new A.LE).set("page",1).set("sort","asc").set("per_page",1e3)}).pipe((0,m.U)(e=>(this.setQuestionaries(e.data.data.length?e.data.data:[]),console.log(e),e.data.data)))}openSnackBar(e,a,o=""){this.snackBar.open(e,o,{duration:2e3,horizontalPosition:"center",verticalPosition:"top",panelClass:a})}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(A.eN),t.LFG(y.$),t.LFG(p.ux))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function no(i,n){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij("Observaciones: ",null==e.pivot?null:e.pivot.obs," ")}}function ro(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"p",16)(1,"span",17),t._uU(2),t.ALo(3,"date"),t.qZA(),t.YNc(4,no,2,1,"span",4),t.TgZ(5,"span",18)(6,"button",19),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).removeTrace(null==r.pivot?null:r.pivot.id)}),t.TgZ(7,"mat-icon"),t._uU(8,"delete_outline"),t.qZA()()()()}if(2&i){const e=n.$implicit;t.xp6(2),t.AsE("Cuestionario ",e.name,", Ingresado ",t.xi3(3,3,null==e.pivot?null:e.pivot.date,"dd/MM/YYYY")," ."),t.xp6(2),t.Q6J("ngIf",null==e.pivot?null:e.pivot.obs)}}function so(i,n){if(1&i&&(t.ynx(0),t.YNc(1,ro,9,6,"p",15),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.patient.questionnaires)}}let co=(()=>{class i{constructor(e,a){this.tracingQuestionariesService=e,this.fb=a,this.options=[],this.subscriptions=[],this.valueSelect=null}ngOnInit(){this.formatOptionsSelect(),this.tracingQuestionariesService.setPatient(this.patient),this.createForm()}createForm(){var e;this.form=this.fb.group({patient_id:[null===(e=this.patient)||void 0===e?void 0:e.id],questionnaire_id:[],date:[],obs:[]})}submitTrace(){this.subscriptions.push(this.tracingQuestionariesService.storeTracingQuestionary(this.form.value).pipe((0,T.q)(1)).subscribe()),this.form.reset(),this.valueSelect="",this.form.patchValue({patient_id:this.patient.id})}removeTrace(e){this.tracingQuestionariesService.removeTracingQuestionary(e).pipe((0,T.q)(1)).subscribe()}ngOnDestroy(){this.subscriptions.map(e=>e.unsubscribe())}formatDate(e,a){let o=e.value;this.form.get(a).setValue(O()(o).format("YYYY-MM-DD HH:mm:ss"))}formatOptionsSelect(){this.tracingQuestionariesService.questionaries$.subscribe(e=>{this.questionaries=e,this.options=e.map(a=>({value:a.id,text:a.name}))})}add(e){this.tracingQuestionariesService.storeQuestionary(e).subscribe()}change(e){this.form.get("questionnaire_id").setValue(e),this.valueSelect=e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(oo),t.Y36(c.qu))},i.\u0275cmp=t.Xpm({type:i,selectors:[["mvd-tracing-questionary"]],inputs:{patient:"patient"},decls:22,vars:7,consts:[["fxLayout","row wrap","fxFlex","100","fxLayoutGap","1rem","fxLayoutAlign","start stretch",1,"card","pl-5",3,"formGroup"],["fxFlex","100","fxLayout","column","fxLayoutGap","6px",1,"content-groups"],["fxFlex","100","fxLayout","row wrap","fxLayoutGap","6px",1,"content-group-form"],["fxFlex","100"],[4,"ngIf"],[3,"options","value","namePlaceholder","addOption","changeValue"],["appearance","outline","fxFlex","20","fxFlex.lt-md","100",1,""],["formControlName","date","matInput","","placeholder","Fecha","autocomplete","off",3,"matDatepicker","dateChange","click"],["matSuffix","",3,"for"],["picker",""],["appearance","outline","fxFlex","30","fxFlex.lt-md","100",1,""],["formControlName","obs","matInput","","type","text","placeholder","Observaciones"],["fxFlex","10"],["type","button","mat-icon-button","","aria-label","Add",1,"add-icon",3,"click"],["color","primary"],["class","antecedents-list","fxFlex","100",4,"ngFor","ngForOf"],["fxFlex","100",1,"antecedents-list"],[1,"text-list"],[1,"btn-list"],["mat-icon-button","","type","button","matTooltip","Eliminar","matTooltipClass","tips",1,"buttons-actions",3,"click"]],template:function(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"h3",3),t._uU(4,"Cuestionarios que participa"),t.qZA(),t.YNc(5,so,2,1,"ng-container",4),t.TgZ(6,"mvd-input-select-add-item",5),t.NdJ("addOption",function(s){return a.add(s)})("changeValue",function(s){return a.change(s)}),t.qZA(),t.TgZ(7,"mat-form-field",6)(8,"mat-label"),t._uU(9,"Fecha"),t.qZA(),t.TgZ(10,"input",7),t.NdJ("dateChange",function(s){return a.formatDate(s,"date")})("click",function(){return t.CHM(o),t.MAs(13).open()}),t.qZA(),t._UZ(11,"mat-datepicker-toggle",8)(12,"mat-datepicker",null,9),t.qZA(),t.TgZ(14,"mat-form-field",10)(15,"mat-label"),t._uU(16,"Observaciones"),t.qZA(),t._UZ(17,"input",11),t.qZA(),t.TgZ(18,"span",12)(19,"button",13),t.NdJ("click",function(){return a.submitTrace()}),t.TgZ(20,"mat-icon",14),t._uU(21,"add_circle"),t.qZA()()()()()()}if(2&e){const o=t.MAs(13);t.Q6J("formGroup",a.form),t.xp6(5),t.Q6J("ngIf",null==a.patient||null==a.patient.questionnaires?null:a.patient.questionnaires.length),t.xp6(1),t.Q6J("options",a.options)("value",a.valueSelect)("namePlaceholder","Cuestionario"),t.xp6(4),t.Q6J("matDatepicker",o),t.xp6(1),t.Q6J("for",o)}},directives:[c._Y,c.JL,d.xw,d.yH,d.SQ,d.Wh,c.sg,u.O5,u.sg,S.lW,J.gM,N.Hw,K.F,g.KE,g.hX,c.Fj,k.Nt,C.hl,c.JJ,c.u,C.nW,g.R9,C.Mq],pipes:[u.uU],styles:[""]}),i})();var lo=l(1338),mo=l(6621),po=l(384),dt=l(953);const _o=function(){return[20,50,100]};let uo=(()=>{class i{constructor(e,a,o,r,s){this.tracePatientService=e,this.dialog=a,this.evolutionsServices=o,this.usersServices=r,this.authService=s,this.columns=[{title:"Fecha",col:"created_at",pipe:"dd/MM/yyyy H:mm:ss",class:"w-15-100"},{title:"T\xe9cnico/Profesional",col:"user_name",class:"w-15-100"},{title:"Evento/Evoluci\xf3n",col:"evolution_name",class:"w-20-100"},{title:"Observaciones",col:"obs",class:"w-30-100",type:"longText"},{title:"Vencimiento",col:"date_limit",pipe:"dd/MM/yyyy",class:"w-10-100"},{title:"Fin",col:"end",type:"boolean",class:"w-5-100"}],this.pageDefault=1,this.perPage=10,this.orden="desc",this.filter="",this.result=this.tracePatientService.resultItems$}ngOnInit(){var e;this.getTraces(null===(e=this.patient)||void 0===e?void 0:e.id,this.pageDefault,this.perPage,this.filter,this.orden),this.getEvolutions(),this.getUsers(),console.log(this.patient)}paginatorChange(e){var a;this.getTraces(null===(a=this.patient)||void 0===a?void 0:a.id,e.pageIndex+1,e.pageSize)}getTraces(e,a,o,r,s){this.subscroption=this.tracePatientService.getTraces(a,o,r,s,e).subscribe(f=>this.loadData())}getEvolutions(){this.evolutionsServices.getEvolutions(1,1e3).pipe((0,m.U)(e=>e.data.data.map(o=>({name:o.name,value:o.id})))).subscribe(e=>this.evolutionsOptions=e),console.log(this.evolutionsOptions)}getUsers(){this.usersServices.getUsers(1,1e3).pipe((0,m.U)(e=>(this.users=e.data.data,e.data.data.map(o=>({name:`${o.name} ${o.last_name}`,value:o.id}))))).subscribe(e=>this.userOptions=e)}loadData(){this.dataSource=this.result.pipe((0,m.U)(e=>e.data.data.map(o=>{var r,s;return{id:o.id,patient_id:o.patient_id,evolution_id:o.evolution_id,evolution_name:null===(r=o.evolution)||void 0===r?void 0:r.name,end:null===(s=o.evolution)||void 0===s?void 0:s.end,user_name:o.user_name,user_id:o.user_id,obs:o.obs,date_limit:o.date_limit,created_at:o.created_at}}))),this.totalResut=this.result.pipe((0,m.U)(e=>e.data.total))}search(e){var a;this.getTraces(null===(a=this.patient)||void 0===a?void 0:a.id,this.pageDefault,this.perPage,e,this.orden)}itemAction(e){"edit"===e.action&&this.openDialog("Edita Traza",e.element)}openDialog(e="Agrega Traza",a){console.log(this.patient),this.user=this.authService.currentUser.value;const o={title:e,data:this.setFields(a)};return this.dialog.open(H.Q,{width:"500px",data:o}).afterClosed().subscribe(s=>{s&&(s.id?this.updateTrace(s):this.storeTracePatient(s))})}updateTrace(e){const a=this.users.filter(o=>o.id===e.user_id)[0];e.user_name=a?`${a.name} ${a.last_name}`:e.user_name,this.tracePatientService.updateTrace(e).pipe((0,T.q)(1)).subscribe(o=>{var r;this.getTraces(null===(r=this.patient)||void 0===r?void 0:r.id,this.pageDefault,this.perPage,this.filter,this.orden)})}storeTracePatient(e){const a=this.users.filter(o=>o.id===e.user_id)[0];e.user_name=a?`${a.name} ${a.last_name}`:e.user_name,this.tracePatientService.storeTracePatient(e).pipe((0,T.q)(1)).subscribe(o=>{var r;this.getTraces(null===(r=this.patient)||void 0===r?void 0:r.id,this.pageDefault,this.perPage,this.filter,this.orden)})}setFields(e){var a,o;return[{nameControl:"id",type:"hidden",value:null==e?void 0:e.id,label:"Id"},{nameControl:"patient_id",type:"hidden",value:(null==e?void 0:e.patient_id)||(null===(a=this.patient)||void 0===a?void 0:a.id),label:"Id"},{nameControl:"user_name",type:"hidden",value:null==e?void 0:e.user_name,label:"T\xe9cnico/Profesional",class:"mvd-col1--1"},{nameControl:"user_id",type:"select",value:(null==e?void 0:e.user_id)||(null===(o=this.user)||void 0===o?void 0:o.id),options:this.userOptions,label:"T\xe9cnico/Profesional",class:"mvd-col1--1"},{nameControl:"evolution_id",type:"select",value:null==e?void 0:e.evolution_id,options:this.evolutionsOptions,label:"Evoluci\xf3n",class:"mvd-col1--1"},{nameControl:"date_limit",type:"date",value:null==e?void 0:e.date_limit,label:"Fecha l\xedmite"},{nameControl:"obs",type:"textarea",value:null==e?void 0:e.obs,label:"Comentarios / Observaciones",class:"mvd-col1--1"}]}ngOnDestroy(){this.subscroption.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(h),t.Y36(Z.uw),t.Y36(lo.g),t.Y36(mo.f),t.Y36(po.e))},i.\u0275cmp=t.Xpm({type:i,selectors:[["mvd-traces"]],viewQuery:function(e,a){if(1&e&&t.Gf(V.NW,7),2&e){let o;t.iGM(o=t.CRH())&&(a.paginator=o.first)}},inputs:{patient:"patient"},decls:16,vars:13,consts:[["fxFlex","100","fxLayout","column","fxLayoutGap","6px",1,"content-groups"],["fxFlex","100","fxLayout","column","fxLayoutGap","6px",1,"content-group-form"],["fxFlex","100"],[1,"header-table"],["fxLayout","row","fxFlex","50",3,"noteFilterBy","changeSearch"],[1,"actions"],["mat-flat-button","","color","primary",3,"click"],[1,"material-icons-round"],[3,"columns","dataSource","btnDelete","widthActions","actionChange"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),t._uU(3,"Evoluciones del paciente"),t.qZA(),t.TgZ(4,"div",3)(5,"mvd-input-search",4),t.NdJ("changeSearch",function(r){return a.search(r)}),t.qZA(),t.TgZ(6,"div",5)(7,"button",6),t.NdJ("click",function(){return a.openDialog()}),t.TgZ(8,"mat-icon",7),t._uU(9,"add"),t.qZA(),t.TgZ(10,"span"),t._uU(11,"Crear"),t.qZA()()()(),t.TgZ(12,"mvd-data-table",8),t.NdJ("actionChange",function(r){return a.itemAction(r)}),t.ALo(13,"async"),t.qZA(),t.TgZ(14,"mat-paginator",9),t.NdJ("page",function(r){return a.paginatorChange(r)}),t.ALo(15,"async"),t.qZA()()()),2&e&&(t.xp6(5),t.Q6J("noteFilterBy","Filtra fecha, usuario, evoluci\xf3n, observaciones, etc."),t.xp6(7),t.Q6J("columns",a.columns)("dataSource",t.lcZ(13,8,a.dataSource))("btnDelete",!1)("widthActions","w-5-100"),t.xp6(2),t.Q6J("length",t.lcZ(15,10,a.totalResut))("pageSize",a.perPage)("pageSizeOptions",t.DdM(12,_o)))},directives:[d.yH,d.xw,d.SQ,dt.V,S.lW,N.Hw,ot.Q,V.NW],pipes:[u.Ov],styles:[""]}),i})();var fo=l(959);function go(i,n){1&i&&(t.TgZ(0,"mat-icon",22),t._uU(1,"loyalty"),t.qZA())}function ho(i,n){1&i&&(t.ynx(0),t.TgZ(1,"p",23)(2,"mat-icon",24),t._uU(3,"task"),t.qZA(),t._uU(4," Consentimiento Firmado "),t.qZA(),t.BQk())}function xo(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"h3"),t._uU(2),t.YNc(3,go,2,0,"mat-icon",21),t.qZA(),t.YNc(4,ho,5,0,"ng-container",1),t.BQk()),2&i){const e=n.ngIf,a=t.oxw();t.xp6(2),t.lnq("",e.code," - ",e.name," ",e.last_name," "),t.xp6(1),t.Q6J("ngIf",e.dead),t.xp6(1),t.Q6J("ngIf",a.consentimiento)}}function vo(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){return t.CHM(e),t.oxw().onSubmit()}),t._uU(1,"Guardar"),t.qZA()}}function bo(i,n){if(1&i&&(t._UZ(0,"mvd-patient-samples",26),t.ALo(1,"async")),2&i){const e=t.oxw();t.Q6J("patient",t.lcZ(1,1,e.patientEdit))}}function Zo(i,n){if(1&i&&t._UZ(0,"mvd-study-requests",27),2&i){const e=t.oxw();t.Q6J("typeTab",!0)("patient_id",null==e.patient?null:e.patient.id)}}function To(i,n){1&i&&t._UZ(0,"span",29)}function Co(i,n){if(1&i&&(t.YNc(0,To,1,0,"span",28),t.ALo(1,"async"),t.TgZ(2,"span"),t._uU(3,"Documentos Adjuntos"),t.qZA()),2&i){const e=t.oxw();t.Q6J("ngIf",t.lcZ(1,1,!e.consentimiento&&e.patientEdit))}}function yo(i,n){1&i&&t._UZ(0,"mvd-attached-files",26),2&i&&t.Q6J("patient",n.ngIf)}function Ao(i,n){if(1&i&&(t.YNc(0,yo,1,1,"mvd-attached-files",30),t.ALo(1,"async")),2&i){const e=t.oxw();t.Q6J("ngIf",t.lcZ(1,1,e.patientEdit))}}function Fo(i,n){1&i&&t._UZ(0,"mvd-family-patient",26),2&i&&t.Q6J("patient",n.ngIf)}function So(i,n){if(1&i&&(t.YNc(0,Fo,1,1,"mvd-family-patient",30),t.ALo(1,"async")),2&i){const e=t.oxw();t.Q6J("ngIf",t.lcZ(1,1,e.patientEdit))}}function Io(i,n){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"mvd-tracing",31),t.NdJ("changeTracing",function(o){return t.CHM(e),t.oxw(2).changeTracing(o)}),t.qZA(),t._UZ(2,"mvd-new-tumor",32)(3,"mvd-score-patient",32),t.TgZ(4,"mvd-tracing-quimioprofilaxis",31),t.NdJ("changeTracing",function(o){return t.CHM(e),t.oxw(2).changeTracing(o)}),t.qZA(),t.TgZ(5,"mvd-tracing-oncofertilidad",31),t.NdJ("changeTracing",function(o){return t.CHM(e),t.oxw(2).changeTracing(o)}),t.qZA(),t._UZ(6,"mvd-tracing-bd-international",32)(7,"mvd-tracing-studies",32)(8,"mvd-tracing-questionary",32)(9,"mvd-traces",32),t.BQk()}if(2&i){const e=n.ngIf;t.xp6(1),t.Q6J("patient",e),t.xp6(1),t.Q6J("patient",e),t.xp6(1),t.Q6J("patient",e),t.xp6(1),t.Q6J("patient",e),t.xp6(1),t.Q6J("patient",e),t.xp6(1),t.Q6J("patient",e),t.xp6(1),t.Q6J("patient",e),t.xp6(1),t.Q6J("patient",e),t.xp6(1),t.Q6J("patient",e)}}function qo(i,n){if(1&i&&(t.YNc(0,Io,10,9,"ng-container",1),t.ALo(1,"async")),2&i){const e=t.oxw();t.Q6J("ngIf",t.lcZ(1,1,e.patientEdit))}}function No(i,n){1&i&&t._UZ(0,"mvd-results")}function Uo(i,n){1&i&&(t.TgZ(0,"div",33)(1,"div",34),t._UZ(2,"div")(3,"div")(4,"div"),t.qZA()())}const wo=function(){return["patient.update","patient.create"]};let pt=(()=>{class i{constructor(e,a,o,r,s,f,x){this.patientService=e,this.activatedRoute=a,this.tracesPatientService=o,this.tracingService=r,this.familyService=s,this.router=f,this.dialog=x,this.countChanges=0,this.subscriptions=[],this.hidden=!1,this.subscriptions.push(this.patientService.patientOnEdit.subscribe(I=>{var z;if((null===(z=null==I?void 0:I.documents)||void 0===z?void 0:z.length)>=1){const tt=I.documents.filter(et=>et.consentimiento);this.consentimiento=tt.length>=1}else this.consentimiento=!1;I&&(this.patient=I,this.patientId=I.id,this.subscriptions.push(this.tracesPatientService.resultItems$.subscribe(tt=>{var et,nt,rt;this.statusEvolution=null===(rt=null===(nt=null===(et=null==tt?void 0:tt.data)||void 0===et?void 0:et.data[0])||void 0===nt?void 0:nt.evolution)||void 0===rt?void 0:rt.name}),this.tracesPatientService.getTraces(1,1,"","desc",this.patientId).subscribe()))}))}toggleBadgeVisibility(){this.hidden=!this.hidden}ngOnInit(){this.patientEdit=this.patientService.patientOnEdit,this.activatedRoute.paramMap.subscribe(e=>{e.params.id&&this.subscriptions.push(this.patientService.getPatient(e.params.id).subscribe(a=>{})),e.params.id||(this.patientService.setPatientOnEdit(null),this.familyService.setFamilyOnEdit(null))})}ngOnChanges(){}back(){this.countChanges>=2?this.confirmBack():this.router.navigate(["/pacientes"])}confirmBack(){return this.dialog.open(E.c,{width:"250px",data:{}}).afterClosed().subscribe(a=>{a&&a.value&&this.router.navigate(["/pacientes"])})}onSubmit(){var e,a;if(null===(e=this.dataFormIdentification)||void 0===e?void 0:e.value){let o=Object.assign({},this.dataFormIdentification.value);if(this.dataBasicForm){const r=this.dataBasicForm.value;r.antecedente_directo_tipo=Array.isArray(null==r?void 0:r.antecedente_directo_tipo)?null===(a=null==r?void 0:r.antecedente_directo_tipo)||void 0===a?void 0:a.join(","):"",o.patient_data=r}this.subscriptions.push(this.patientEdit.subscribe(r=>{r?this.dataFormIdentification.valid?this.patientService.updatePatient(o).subscribe(s=>{var f,x;(null===(f=this.tracingData)||void 0===f?void 0:f.patient_id)&&((null===(x=this.tracingData)||void 0===x?void 0:x.id)?this.tracingService.updateTracingPatient(this.tracingData):this.tracingService.storeTracingPatient(this.tracingData)),this.countChanges=0}):this.dataFormIdentification.markAllAsTouched():this.dataFormIdentification.valid?this.patientService.storePatient(o).subscribe(s=>{var f;(null===(f=this.tracingData)||void 0===f?void 0:f.patient_id)&&this.tracingService.storeTracingPatient(this.tracingData),this.router.navigate(["/pacientes/paciente",s.id]),this.countChanges=0}):this.dataFormIdentification.markAllAsTouched()}))}}changeTracing(e){this.tracingData=Object.assign(Object.assign({},this.tracingData),e)}dataIdentification(e){this.dataFormIdentification=e,this.countChanges++}dataBasic(e){this.dataBasicForm=e,this.countChanges++}ngOnDestroy(){this.subscriptions.map(e=>e.unsubscribe())}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(y.$),t.Y36(U.gz),t.Y36(h),t.Y36(F),t.Y36(v.d),t.Y36(U.F0),t.Y36(Z.uw))},i.\u0275cmp=t.Xpm({type:i,selectors:[["mvd-patient"]],features:[t.TTD],decls:39,vars:24,consts:[["fxLayout","column","fxFlex","100",1,"card","mat-elevation-z2","animate__animated","animate__slideInRight"],[4,"ngIf"],["fxLayoutAlign","end center"],["mat-stroked-button","","color","primary",1,"btn-submit",3,"click"],["class","btn-submit","mat-flat-button","","color","primary",3,"click",4,"mvdPermissions"],["fxLayout","row wrap","fxFlex","100"],[1,"tabs-content"],["label","Datos de Identificaci\xf3n"],[3,"dataIdentification"],["label","Datos Cl\xednicos",3,"disabled"],[3,"dataBasic"],["label","Muestras",3,"disabled"],["matTabContent",""],["label","Solicitudes",3,"disabled"],[3,"disabled"],["mat-tab-label",""],["label","Familia",3,"disabled"],["label","Seguimiento",3,"disabled"],["label","Resultados",3,"disabled"],[1,"border"],["loading",""],["fontSet","material-icons-round","color","warn","matTooltip","Fallecido",4,"ngIf"],["fontSet","material-icons-round","color","warn","matTooltip","Fallecido"],[1,"consentimiento-firmado"],["color","accent","fontSet","material-icons-round"],["mat-flat-button","","color","primary",1,"btn-submit",3,"click"],[3,"patient"],[3,"typeTab","patient_id"],["matTooltip","Sin concentimiento","matBadge","1","matBadgeColor","warn","class","notification",4,"ngIf"],["matTooltip","Sin concentimiento","matBadge","1","matBadgeColor","warn",1,"notification"],[3,"patient",4,"ngIf"],[1,"traces-item",3,"patient","changeTracing"],[1,"traces-item",3,"patient"],[1,"div-content"],[1,"loading"]],template:function(e,a){1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),t._uU(3,"Ficha Paciente"),t.qZA(),t.TgZ(4,"mat-card-subtitle"),t.YNc(5,xo,5,5,"ng-container",1),t.ALo(6,"async"),t.qZA(),t.TgZ(7,"div",2)(8,"button",3),t.NdJ("click",function(){return a.back()}),t._uU(9,"Volver"),t.qZA(),t.YNc(10,vo,2,0,"button",4),t.qZA()(),t.TgZ(11,"mat-card-content",5)(12,"mat-tab-group",6)(13,"mat-tab",7)(14,"mvd-patient-identification",8),t.NdJ("dataIdentification",function(r){return a.dataIdentification(r)}),t.qZA()(),t.TgZ(15,"mat-tab",9),t.ALo(16,"async"),t.TgZ(17,"mvd-basic-data",10),t.NdJ("dataBasic",function(r){return a.dataBasic(r)}),t.qZA()(),t.TgZ(18,"mat-tab",11),t.ALo(19,"async"),t.YNc(20,bo,2,3,"ng-template",12),t.qZA(),t.TgZ(21,"mat-tab",13),t.ALo(22,"async"),t.YNc(23,Zo,1,2,"ng-template",12),t.qZA(),t.TgZ(24,"mat-tab",14),t.ALo(25,"async"),t.YNc(26,Co,4,3,"ng-template",15),t.YNc(27,Ao,2,3,"ng-template",12),t.qZA(),t.TgZ(28,"mat-tab",16),t.ALo(29,"async"),t.YNc(30,So,2,3,"ng-template",12),t.qZA(),t.TgZ(31,"mat-tab",17),t.ALo(32,"async"),t.YNc(33,qo,2,3,"ng-template",12),t.qZA(),t.TgZ(34,"mat-tab",18),t.YNc(35,No,1,0,"ng-template",12),t.qZA()()(),t._UZ(36,"span",19),t.qZA(),t.YNc(37,Uo,5,0,"ng-template",null,20,t.W1O)),2&e&&(t.xp6(5),t.Q6J("ngIf",t.lcZ(6,9,a.patientEdit)),t.xp6(5),t.Q6J("mvdPermissions",t.DdM(23,wo)),t.xp6(5),t.Q6J("disabled",!t.lcZ(16,11,a.patientEdit)),t.xp6(3),t.Q6J("disabled",!t.lcZ(19,13,a.patientEdit)),t.xp6(3),t.Q6J("disabled",!t.lcZ(22,15,a.patientEdit)),t.xp6(3),t.Q6J("disabled",!t.lcZ(25,17,a.patientEdit)),t.xp6(4),t.Q6J("disabled",!t.lcZ(29,19,a.patientEdit)),t.xp6(3),t.Q6J("disabled",!t.lcZ(32,21,a.patientEdit)),t.xp6(3),t.Q6J("disabled",!a.patientEdit))},directives:[q.a8,d.xw,d.yH,q.dk,q.n5,q.$j,u.O5,N.Hw,J.gM,d.Wh,S.lW,Q.$,q.dn,it.SP,it.uX,Gt,di,it.Vc,_i,ui.R,it.uD,fi.k,Ci,ua,Sa,Qa,Ya,$a,ja,Xa,ao,co,uo,fo.b],pipes:[u.Ov],styles:[".tabs-content[_ngcontent-%COMP%]{margin-top:1rem}h3[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.notification[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem}.notification[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:1rem;height:1rem;font-size:10px!important;font-weight:500}.mat-card-actions[_ngcontent-%COMP%]{padding-right:1.5rem}.btn-submit[_ngcontent-%COMP%]{width:100px;line-height:2.2;margin:1rem}.mat-card-subtitle[_ngcontent-%COMP%]{padding-left:1rem!important;display:block!important;height:120px!important;width:100%!important}.consentimiento-firmado[_ngcontent-%COMP%]{display:flex;align-items:center;justify-items:center;justify-content:center;width:190px;padding:5px 10px;border-radius:5px;color:var(--color-accent)!important;background-color:#20db2942}.consentimiento-no-firmado[_ngcontent-%COMP%]{display:flex;align-items:center;justify-items:center;justify-content:center;padding:5px 10px;width:220px;border-radius:5px;color:var(--color-warn)!important;background-color:#d1121249}.consentimiento-no-firmado[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-right:5px}.traces-item[_ngcontent-%COMP%]{margin-bottom:2rem}"]}),i})();const Jo=function(){return["/pacientes/paciente"]};function ko(i,n){1&i&&(t.TgZ(0,"button",8)(1,"mat-icon",9),t._uU(2,"add"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Crear"),t.qZA()()),2&i&&t.Q6J("routerLink",t.DdM(1,Jo))}const Qo=function(){return["patient.create"]},Oo=function(){return[20,50,100]},Po=[{path:"",component:(()=>{class i{constructor(e,a){this.patientService=e,this.router=a,this.columns=[{title:"C\xf3digo",col:"code"},{title:"Nombre",col:"name"},{title:"Tipo de Paciente ",col:"type_patient"},{title:"Doc. de Identidad",col:"n_doc"}],this.pageDefault=1,this.perPage=10,this.orden="desc",this.filter="",this.result=this.patientService.resultItems$}paginatorChange(e){this.getPatients(e.pageIndex+1,e.pageSize)}ngOnInit(){this.getPatients(this.pageDefault,this.perPage,this.filter,this.orden)}getPatients(e,a,o,r){this.subscroption=this.patientService.getPatients(e,a,o,r).subscribe(s=>this.loadData())}loadData(){this.dataSource=this.result.pipe((0,m.U)(e=>e.data.data.map(o=>({id:o.id,code:o.code,name:`${o.name} ${o.last_name}`,type_patient:o.type_patient,n_doc:o.n_doc})))),this.totalResut=this.result.pipe((0,m.U)(e=>e.data.total))}search(e){this.getPatients(this.pageDefault,this.perPage,e,this.orden)}deleteItem(e){return this.patientService.deletePatient(e)}onClickRow(e){console.log("Onclick row",e),this.router.navigate(["/pacientes/paciente",e.id])}itemAction(e){"delete"===e.action&&this.deleteItem(e.element.id).pipe((0,T.q)(1)).subscribe(),"edit"===e.action&&this.router.navigate(["/pacientes/paciente",e.element.id])}ngOnDestroy(){this.subscroption.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(y.$),t.Y36(U.F0))},i.\u0275cmp=t.Xpm({type:i,selectors:[["mvd-patients"]],viewQuery:function(e,a){if(1&e&&t.Gf(V.NW,7),2&e){let o;t.iGM(o=t.CRH())&&(a.paginator=o.first)}},decls:16,vars:14,consts:[[1,"card","mat-elevation-z16","animate__animated","animate__slideInRight"],[1,"header-table"],[3,"noteFilterBy","changeSearch"],[1,"actions"],["mat-flat-button","","color","primary",3,"routerLink",4,"mvdPermissions"],[3,"onClickRow","columns","dataSource","actionChange"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],[1,"border"],["mat-flat-button","","color","primary",3,"routerLink"],[1,"material-icons-round"]],template:function(e,a){1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),t._uU(3,"Pacientes"),t.qZA(),t.TgZ(4,"mat-card-subtitle"),t._uU(5,"Administrar pacientes"),t.qZA()(),t.TgZ(6,"div",1)(7,"mvd-input-search",2),t.NdJ("changeSearch",function(r){return a.search(r)}),t.qZA(),t.TgZ(8,"div",3),t.YNc(9,ko,5,2,"button",4),t.qZA()(),t.TgZ(10,"mat-card-content")(11,"mvd-data-table",5),t.NdJ("actionChange",function(r){return a.itemAction(r)}),t.ALo(12,"async"),t.qZA(),t.TgZ(13,"mat-paginator",6),t.NdJ("page",function(r){return a.paginatorChange(r)}),t.ALo(14,"async"),t.qZA()(),t._UZ(15,"span",7),t.qZA()),2&e&&(t.xp6(7),t.Q6J("noteFilterBy","Filtro multi criterios, solo deje un espacio en blanco entre palabras o fragmentos y podr\xe1 mezclar criterios de distintas columnas o incluso datos que no se encuantran visibles como por ej instituci\xf3n m\xe9dica, tel\xe9fono, email, etc. "),t.xp6(2),t.Q6J("mvdPermissions",t.DdM(12,Qo)),t.xp6(2),t.Q6J("onClickRow",a.onClickRow)("columns",a.columns)("dataSource",t.lcZ(12,8,a.dataSource)),t.xp6(2),t.Q6J("length",t.lcZ(14,10,a.totalResut))("pageSize",a.perPage)("pageSizeOptions",t.DdM(13,Oo)))},directives:[q.a8,q.dk,q.n5,q.$j,dt.V,Q.$,S.lW,U.rH,N.Hw,q.dn,ot.Q,V.NW],pipes:[u.Ov],styles:[".header-table[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr;grid-gap:1rem;gap:1rem}.header-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);justify-content:space-around!important;justify-items:right;grid-column-gap:5px;column-gap:5px}.header-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:38px}"]}),i})()},{path:"paciente",component:pt},{path:"paciente/:id",component:pt}];let Mo=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[U.Bz.forChild(Po)],U.Bz]}),i})();var Yo=l(8203),Do=l(2929),Lo=l(7661),Eo=l(3834);let $o=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[u.ez,Mo,Do.SamplesModule,Lo.FamiliesModule,Yo.m,Eo.StudyRequetsModule]]}),i})()},9441:function(L,w){var U;void 0!==(U=function(){"use strict";function t(p,h,F){var v=new XMLHttpRequest;v.open("GET",p),v.responseType="blob",v.onload=function(){_(v.response,h,F)},v.onerror=function(){console.error("could not download file")},v.send()}function y(p){var h=new XMLHttpRequest;h.open("HEAD",p,!1);try{h.send()}catch(F){}return 200<=h.status&&299>=h.status}function A(p){try{p.dispatchEvent(new MouseEvent("click"))}catch(F){var h=document.createEvent("MouseEvents");h.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),p.dispatchEvent(h)}}var b="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,m=b.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),_=b.saveAs||("object"!=typeof window||window!==b?function(){}:"download"in HTMLAnchorElement.prototype&&!m?function(p,h,F){var v=b.URL||b.webkitURL,Z=document.createElement("a");Z.download=h=h||p.name||"download",Z.rel="noopener","string"==typeof p?(Z.href=p,Z.origin===location.origin?A(Z):y(Z.href)?t(p,h,F):A(Z,Z.target="_blank")):(Z.href=v.createObjectURL(p),setTimeout(function(){v.revokeObjectURL(Z.href)},4e4),setTimeout(function(){A(Z)},0))}:"msSaveOrOpenBlob"in navigator?function(p,h,F){if(h=h||p.name||"download","string"!=typeof p)navigator.msSaveOrOpenBlob(function E(p,h){return void 0===h?h={autoBom:!1}:"object"!=typeof h&&(console.warn("Deprecated: Expected third argument to be a object"),h={autoBom:!h}),h.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(p.type)?new Blob(["\ufeff",p],{type:p.type}):p}(p,F),h);else if(y(p))t(p,h,F);else{var v=document.createElement("a");v.href=p,v.target="_blank",setTimeout(function(){A(v)})}}:function(p,h,F,v){if((v=v||open("","_blank"))&&(v.document.title=v.document.body.innerText="downloading..."),"string"==typeof p)return t(p,h,F);var Z="application/octet-stream"===p.type,q=/constructor/i.test(b.HTMLElement)||b.safari,d=/CriOS\/[\d]+/.test(navigator.userAgent);if((d||Z&&q||m)&&"undefined"!=typeof FileReader){var N=new FileReader;N.onloadend=function(){var Q=N.result;Q=d?Q:Q.replace(/^data:[^;]*;/,"data:attachment/file;"),v?v.location.href=Q:location=Q,v=null},N.readAsDataURL(p)}else{var J=b.URL||b.webkitURL,S=J.createObjectURL(p);v?v.location=S:location.href=S,v=null,setTimeout(function(){J.revokeObjectURL(S)},4e4)}});b.saveAs=_.saveAs=_,L.exports=_}.apply(w,[]))&&(L.exports=U)},6052:(L,w,l)=>{"use strict";var U=l(5019),E=l(2556),t=l(9607),y=l(2142),A=function(){function m(_){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,_&&(this._ctorUnsubscribe=!0,this._unsubscribe=_)}return m.prototype.unsubscribe=function(){var _;if(!this.closed){var p=this,h=p._parentOrParents,F=p._ctorUnsubscribe,v=p._unsubscribe,Z=p._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,h instanceof m)h.remove(this);else if(null!==h)for(var q=0;q<h.length;++q)h[q].remove(this);if(t.isFunction(v)){F&&(this._unsubscribe=void 0);try{v.call(this)}catch(S){_=S instanceof y.UnsubscriptionError?b(S.errors):[S]}}if(U.isArray(Z)){q=-1;for(var N=Z.length;++q<N;){var J=Z[q];if(E.isObject(J))try{J.unsubscribe()}catch(Q){_=_||[],Q instanceof y.UnsubscriptionError?_=_.concat(b(Q.errors)):_.push(Q)}}}if(_)throw new y.UnsubscriptionError(_)}},m.prototype.add=function(_){var p=_;if(!_)return m.EMPTY;switch(typeof _){case"function":p=new m(_);case"object":if(p===this||p.closed||"function"!=typeof p.unsubscribe)return p;if(this.closed)return p.unsubscribe(),p;if(!(p instanceof m)){var h=p;(p=new m)._subscriptions=[h]}break;default:throw new Error("unrecognized teardown "+_+" added to Subscription.")}var F=p._parentOrParents;if(null===F)p._parentOrParents=this;else if(F instanceof m){if(F===this)return p;p._parentOrParents=[F,this]}else{if(-1!==F.indexOf(this))return p;F.push(this)}var v=this._subscriptions;return null===v?this._subscriptions=[p]:v.push(p),p},m.prototype.remove=function(_){var p=this._subscriptions;if(p){var h=p.indexOf(_);-1!==h&&p.splice(h,1)}},m.EMPTY=((_=new m).closed=!0,_),m;var _}();function b(m){return m.reduce(function(_,p){return _.concat(p instanceof y.UnsubscriptionError?p.errors:p)},[])}w.w=A},2142:(L,w)=>{"use strict";Object.defineProperty(w,"__esModule",{value:!0});var l=function(){function u(U){return Error.call(this),this.message=U?U.length+" errors occurred during unsubscription:\n"+U.map(function(E,t){return t+1+") "+E.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=U,this}return u.prototype=Object.create(Error.prototype),u}();w.UnsubscriptionError=l},5019:(L,w)=>{"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.isArray=Array.isArray||function(l){return l&&"number"==typeof l.length}},9607:(L,w)=>{"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.isFunction=function l(u){return"function"==typeof u}},2556:(L,w)=>{"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.isObject=function l(u){return null!==u&&"object"==typeof u}}}]);