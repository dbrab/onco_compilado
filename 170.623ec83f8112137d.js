"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[170],{4933:(O,C,s)=>{s.r(C),s.d(C,{EstadioModule:()=>U});var f=s(9808),E=s(325),h=s(3075),v=s(6087),c=s(4850),l=s(2986),b=s(303),t=s(5e3),D=s(7315),u=s(8966),m=s(9224),a=s(7423),n=s(5245),d=s(953),P=s(3160);const A=function(){return[20,50,100]},M=[{path:"",component:(()=>{class i{constructor(e,o){this.estadioService=e,this.dialog=o,this.columns=[{title:"Nombre",col:"name"}],this.pageDefault=1,this.perPage=10,this.orden="desc",this.filter="",this.result=this.estadioService.resultItems$}ngOnInit(){this.getEstadios(this.pageDefault,this.perPage,this.filter,this.orden)}paginatorChange(e){this.getEstadios(e.pageIndex+1,e.pageSize)}getEstadios(e,o,r,p){this.subscroption=this.estadioService.getEstadios(e,o,r,p).subscribe(S=>this.loadData())}loadData(){this.dataSource=this.result.pipe((0,c.U)(e=>e.data.data.map(r=>({id:r.id,name:r.name})))),this.totalResut=this.result.pipe((0,c.U)(e=>e.data.total))}search(e){this.getEstadios(this.pageDefault,this.perPage,e,this.orden)}deleteItem(e){return this.estadioService.deleteEstadio(e)}itemAction(e){"delete"===e.action&&this.deleteItem(e.element.id).pipe((0,l.q)(1)).subscribe(),"edit"===e.action&&this.openDialog("Edita Estadio",e.element)}openDialog(e="Agrega Estadio",o){const r={title:e,data:this.setFields(o)};return this.dialog.open(b.Q,{width:"550px",data:r}).afterClosed().subscribe(S=>{S&&(S.id?this.updateEstadio(S):this.storeEstadio(S))})}updateEstadio(e){this.estadioService.updateEstadio(e).pipe((0,l.q)(1)).subscribe()}storeEstadio(e){this.estadioService.storeEstadio(e).pipe((0,l.q)(1)).subscribe(o=>{})}setFields(e){return[{nameControl:"id",type:"hidden",value:null==e?void 0:e.id,label:"Id"},{nameControl:"name",type:"text",value:null==e?void 0:e.name,validators:[h.kI.required],label:"Nombre",class:"mvd-col1--1"}]}ngOnDestroy(){this.subscroption.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(D.N),t.Y36(u.uw))},i.\u0275cmp=t.Xpm({type:i,selectors:[["mvd-estadio"]],viewQuery:function(e,o){if(1&e&&t.Gf(v.NW,7),2&e){let r;t.iGM(r=t.CRH())&&(o.paginator=r.first)}},decls:19,vars:11,consts:[[1,"card","mat-elevation-z16","animate__animated","animate__slideInRight"],[1,"actions"],["mat-flat-button","","color","primary",3,"click"],[1,"material-icons-round"],[3,"noteFilterBy","changeSearch"],[3,"columns","dataSource","actionChange"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],[1,"border"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),t._uU(3,"Estadios"),t.qZA(),t.TgZ(4,"mat-card-subtitle"),t._uU(5,"Administrar Estadios"),t.qZA(),t.TgZ(6,"div",1)(7,"button",2),t.NdJ("click",function(){return o.openDialog()}),t.TgZ(8,"mat-icon",3),t._uU(9,"add"),t.qZA(),t.TgZ(10,"span"),t._uU(11,"Crear"),t.qZA()()(),t.TgZ(12,"mvd-input-search",4),t.NdJ("changeSearch",function(p){return o.search(p)}),t.qZA()(),t.TgZ(13,"mat-card-content")(14,"mvd-data-table",5),t.NdJ("actionChange",function(p){return o.itemAction(p)}),t.ALo(15,"async"),t.qZA(),t.TgZ(16,"mat-paginator",6),t.NdJ("page",function(p){return o.paginatorChange(p)}),t.ALo(17,"async"),t.qZA()(),t._UZ(18,"span",7),t.qZA()),2&e&&(t.xp6(12),t.Q6J("noteFilterBy","Filtra por Nombre"),t.xp6(2),t.Q6J("columns",o.columns)("dataSource",t.lcZ(15,6,o.dataSource)),t.xp6(2),t.Q6J("length",t.lcZ(17,8,o.totalResut))("pageSize",o.perPage)("pageSizeOptions",t.DdM(10,A)))},directives:[m.a8,m.dk,m.n5,m.$j,a.lW,n.Hw,d.V,m.dn,P.Q,v.NW],pipes:[f.Ov],styles:[""]}),i})()}];let T=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[E.Bz.forChild(M)],E.Bz]}),i})();var B=s(8203);let U=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[f.ez,T,B.m]]}),i})()},7315:(O,C,s)=>{s.d(C,{N:()=>D});var f=s(520),E=s(591),h=s(4850),v=s(2986),c=s(2340),l=s(5e3),b=s(7261),t=s(189);let D=(()=>{class u{constructor(a,n,d){this.http=a,this.snackBar=n,this.ubicationService=d,this.dataOptionsForms$=new E.X(null),this.estadioEditSubject$=new E.X(null),this.urlUtils="src/app/shared/utils/data/",this.resultSubject$=new E.X(null)}get optionsForms$(){return this.dataOptionsForms$}get resultItems$(){return this.resultSubject$}setItems(a){this.resultSubject$.next(a)}get estadioOnEdit(){return this.estadioEditSubject$}setEstadioOnEdit(a){this.estadioEditSubject$.next(a)}storeEstadio(a){return this.http.post(`${c.N.API}estadios`,a).pipe((0,h.U)(n=>(this.getEstadios(1,10,"","desc").pipe((0,v.q)(1)).subscribe(),this.openSnackBar("Se cre\xf3 correctamente","success-snack-bar"),n.data)))}updateEstadio(a){const n=a.id;return a._method="put",this.http.post(`${c.N.API}estadios/${n}`,a).pipe((0,h.U)(d=>(this.getEstadios(1,10,"","desc").pipe((0,v.q)(1)).subscribe(),this.openSnackBar("Actualizado correctamente","success-snack-bar"),d.data)))}deleteEstadio(a){return this.http.delete(`${c.N.API}estadios/${a}`).pipe((0,h.U)(n=>(this.getEstadios(1,10,"","desc").pipe((0,v.q)(1)).subscribe(),this.openSnackBar("Eliminado correctamente","success-snack-bar"),n.data)))}getEstadio(a){return this.http.get(`${c.N.API}estadios/${a}`).pipe((0,h.U)(n=>n.data))}getEstadios(a=1,n=20,d="",P="desc"){return this.http.get(`${c.N.API}estadios`,{params:(new f.LE).set("page",a.toString()).set("filter",d).set("sort",P).set("per_page",n.toString())}).pipe((0,h.U)(A=>(this.setEstadioOnEdit(null),this.setItems(A),A)))}openSnackBar(a,n,d=""){this.snackBar.open(a,d,{duration:2e3,horizontalPosition:"center",verticalPosition:"top",panelClass:n})}}return u.\u0275fac=function(a){return new(a||u)(l.LFG(f.eN),l.LFG(b.ux),l.LFG(t._))},u.\u0275prov=l.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()}}]);