"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[86],{6086:(y,b,m)=>{m.r(b),m.d(b,{PermissionsModule:()=>S});var t=m(9808),h=m(325),d=m(3075),_=m(2986),e=m(5e3),C=m(278),T=m(8966),p=m(9224),f=m(277),P=m(7423),v=m(7322),Z=m(7531),E=m(7510);function x(o,u){if(1&o&&(e.TgZ(0,"mat-card-subtitle"),e._uU(1),e.qZA()),2&o){const s=u.ngIf;e.xp6(1),e.AsE(" Usuario: ",s.id," / Nombre: ",s.name," ")}}let r=(()=>{class o{constructor(s,i,l,g,M){this.permissionService=s,this.activatedRoute=i,this.fb=l,this.router=g,this.dialog=M,this.changes=!1,this.subscriptions=[],this.createForm()}ngOnInit(){this.subscriptions.push(this.permissionService.permissionOnEdit.subscribe(s=>{this.permissionEdit=s,this.permissionEdit&&this.updateForm(this.permissionEdit)})),this.activatedRoute.paramMap.subscribe(s=>{s.params.id&&this.permissionService.getPermission(s.params.id).pipe((0,_.q)(1)).subscribe(),s.params.id||(this.permissionEdit=null)}),this.activatedRoute.queryParamMap.subscribe(s=>{var i,l;this.urlReturn=null===(i=null==s?void 0:s.params)||void 0===i?void 0:i.urlReturn,this.permissionId=null===(l=null==s?void 0:s.params)||void 0===l?void 0:l.id})}createForm(){this.form=this.fb.group({name:[null,d.kI.required],description:[null,d.kI.required]})}updateForm(s){this.form.setValue({name:null==s?void 0:s.name,description:null==s?void 0:s.description})}onSubmit(){this.subscriptions.push(this.permissionEdit?this.permissionService.updatePermission(this.form.value).subscribe(s=>!!s&&this.back()):this.permissionService.storePermission(this.form.value).subscribe(s=>!!s&&this.back()))}back(){this.router.navigate(this.urlReturn?[this.urlReturn]:["/usuarios"])}ngOnDestroy(){this.subscriptions.map(s=>s.unsubscribe())}}return o.\u0275fac=function(s){return new(s||o)(e.Y36(C.q),e.Y36(h.gz),e.Y36(d.qu),e.Y36(h.F0),e.Y36(T.uw))},o.\u0275cmp=e.Xpm({type:o,selectors:[["mvd-permission"]],decls:25,vars:7,consts:[[1,"card","mat-elevation-z2","animate__animated","animate__slideInRight"],[4,"ngIf"],["fxLayoutAlign","end center"],["mat-stroked-button","","color","primary",1,"btn-submit",3,"click"],["mat-flat-button","","color","primary",1,"btn-submit",3,"disabled","click"],["fxFlex","100","fxLayout","row","fxLayoutGap","20px","fxLayoutAlign","space-between center",3,"formGroup"],["appearance","outline","fxFlex","100","appearance","outline"],["matInput","","formControlName","name","placeholder","Nombre"],[3,"campo","name"],["matInput","","formControlName","description","placeholder","Descripci\xf3n"],[1,"border"]],template:function(s,i){1&s&&(e.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),e._uU(3,"Ficha de Usuario"),e.qZA(),e.YNc(4,x,2,2,"mat-card-subtitle",1),e.TgZ(5,"div",2)(6,"button",3),e.NdJ("click",function(){return i.back()}),e._uU(7,"Volver"),e.qZA(),e.TgZ(8,"button",4),e.NdJ("click",function(){return i.onSubmit()}),e._uU(9,"Guardar"),e.qZA()()(),e.TgZ(10,"mat-card-content")(11,"form",5)(12,"mat-form-field",6)(13,"mat-label"),e._uU(14,"Nombre"),e.qZA(),e._UZ(15,"input",7),e.TgZ(16,"mat-error"),e._UZ(17,"mvd-errors-messages",8),e.qZA()(),e.TgZ(18,"mat-form-field",6)(19,"mat-label"),e._uU(20,"Descripci\xf3n"),e.qZA(),e._UZ(21,"input",9),e.TgZ(22,"mat-error"),e._UZ(23,"mvd-errors-messages",8),e.qZA()()()(),e._UZ(24,"span",10),e.qZA()),2&s&&(e.xp6(4),e.Q6J("ngIf",i.permissionEdit),e.xp6(4),e.Q6J("disabled",!i.form.valid),e.xp6(3),e.Q6J("formGroup",i.form),e.xp6(6),e.Q6J("campo",i.form.get("name").errors)("name","Nombre"),e.xp6(6),e.Q6J("campo",i.form.get("description").errors)("name","Descripci\xf3n"))},directives:[p.a8,p.dk,p.n5,t.O5,p.$j,f.Wh,P.lW,p.dn,d._Y,d.JL,f.yH,f.xw,f.SQ,d.sg,v.KE,v.hX,Z.Nt,d.Fj,d.JJ,d.u,v.TO,E.g],styles:[".tabs-content[_ngcontent-%COMP%]{margin-top:3rem}.mat-card-actions[_ngcontent-%COMP%]{padding-right:1.5rem}.btn-submit[_ngcontent-%COMP%]{width:100px;line-height:2.2;margin:1rem}.mat-card-subtitle[_ngcontent-%COMP%]{padding-left:1rem!important}"]}),o})();var c=m(6087),a=m(4850),n=m(953),A=m(5245),O=m(3160);const I=function(){return[20,50,100]};let U=(()=>{class o{constructor(s,i){this.permissionService=s,this.router=i,this.columns=[{title:"C\xf3digo",col:"id"},{title:"Nombre",col:"name"},{title:"Descripci\xf3n",col:"description"}],this.pageDefault=1,this.perPage=10,this.orden="desc",this.filter="",this.result=this.permissionService.resultItems$}paginatorChange(s){this.getPermissions(s.pageIndex+1,s.pageSize)}ngOnInit(){this.getPermissions(this.pageDefault,this.perPage,this.filter,this.orden)}add(){this.router.navigate(["/permisos/permiso"],{queryParams:{urlReturn:this.router.url}})}getPermissions(s,i,l,g){this.subscroption=this.permissionService.getPermissions(s,i,l,g).subscribe(M=>this.loadData())}loadData(){this.dataSource=this.result.pipe((0,a.U)(s=>s.data.data.map(l=>({id:l.id,name:l.name,description:l.description})))),this.totalResut=this.result.pipe((0,a.U)(s=>s.data.total))}search(s){this.getPermissions(this.pageDefault,this.perPage,s,this.orden)}deleteItem(s){return this.permissionService.deletePermission(s)}itemAction(s){"delete"===s.action&&this.deleteItem(s.element.id).pipe((0,_.q)(1)).subscribe(i=>console.log(i)),"edit"===s.action&&this.router.navigate(["/permisos/permiso",s.element.id],{queryParams:{urlReturn:this.router.url}})}ngOnDestroy(){this.subscroption.unsubscribe()}}return o.\u0275fac=function(s){return new(s||o)(e.Y36(C.q),e.Y36(h.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["mvd-permissions-table"]],viewQuery:function(s,i){if(1&s&&e.Gf(c.NW,7),2&s){let l;e.iGM(l=e.CRH())&&(i.paginator=l.first)}},decls:13,vars:11,consts:[[1,"header-table"],[3,"noteFilterBy","changeSearch"],[1,"actions"],["mat-flat-button","","color","primary",3,"click"],[1,"material-icons-round"],[3,"columns","dataSource","actionChange"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"]],template:function(s,i){1&s&&(e.TgZ(0,"div",0)(1,"mvd-input-search",1),e.NdJ("changeSearch",function(g){return i.search(g)}),e.qZA(),e.TgZ(2,"div",2)(3,"button",3),e.NdJ("click",function(){return i.add()}),e.TgZ(4,"mat-icon",4),e._uU(5,"add"),e.qZA(),e.TgZ(6,"span"),e._uU(7,"Crear"),e.qZA()()()(),e.TgZ(8,"mat-card-content")(9,"mvd-data-table",5),e.NdJ("actionChange",function(g){return i.itemAction(g)}),e.ALo(10,"async"),e.qZA(),e.TgZ(11,"mat-paginator",6),e.NdJ("page",function(g){return i.paginatorChange(g)}),e.ALo(12,"async"),e.qZA()()),2&s&&(e.xp6(1),e.Q6J("noteFilterBy","Filtra nombre"),e.xp6(8),e.Q6J("columns",i.columns)("dataSource",e.lcZ(10,6,i.dataSource)),e.xp6(2),e.Q6J("length",e.lcZ(12,8,i.totalResut))("pageSize",i.perPage)("pageSizeOptions",e.DdM(10,I)))},directives:[n.V,P.lW,A.Hw,p.dn,O.Q,c.NW],pipes:[t.Ov],styles:[".header-table[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr;grid-gap:1rem;gap:1rem}.header-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);justify-content:space-around!important;justify-items:right;grid-column-gap:5px;column-gap:5px}.header-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:38px}"]}),o})();const N=[{path:"",component:(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(s){return new(s||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["mvd-permissions"]],decls:8,vars:0,consts:[[1,"card","mat-elevation-z16","animate__animated","animate__slideInRight"],[1,"border"]],template:function(s,i){1&s&&(e.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),e._uU(3,"Permissions"),e.qZA(),e.TgZ(4,"mat-card-subtitle"),e._uU(5,"Administrar Permissions"),e.qZA()(),e._UZ(6,"mvd-permissions-table")(7,"span",1),e.qZA())},directives:[p.a8,p.dk,p.n5,p.$j,U],styles:[""]}),o})()},{path:"permiso",component:r},{path:"permiso/:id",component:r}];let J=(()=>{class o{}return o.\u0275fac=function(s){return new(s||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[h.Bz.forChild(N)],h.Bz]}),o})();var q=m(8203);let S=(()=>{class o{}return o.\u0275fac=function(s){return new(s||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[t.ez,J,q.m]]}),o})()},7510:(y,b,m)=>{m.d(b,{g:()=>x});var t=m(5e3),h=m(9808),d=m(7322);function _(r,c){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const a=t.oxw();t.xp6(1),t.Oqu(a.getErrorMessage("notIncludedIn"))}}function e(r,c){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const a=t.oxw();t.xp6(1),t.Oqu(a.getErrorMessage("validateNumDoc"))}}function C(r,c){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const a=t.oxw();t.xp6(1),t.Oqu(a.getErrorMessage("validateCode"))}}function T(r,c){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const a=t.oxw();t.xp6(1),t.Oqu(a.getErrorMessage("email"))}}function p(r,c){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const a=t.oxw();t.xp6(1),t.Oqu(a.getErrorMessage("validateEmailExist"))}}function f(r,c){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const a=t.oxw();t.xp6(1),t.Oqu(a.getErrorMessage("required"))}}function P(r,c){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const a=t.oxw();t.xp6(1),t.Oqu(a.getErrorMessage("number"))}}function v(r,c){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const a=t.oxw();t.xp6(1),t.Oqu(a.getErrorMessage("date"))}}function Z(r,c){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const a=t.oxw();t.xp6(1),t.Oqu(a.getErrorMessage("validateRoleExist"))}}function E(r,c){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const a=t.oxw();t.xp6(1),t.Oqu(a.getErrorMessage("validatePassword"))}}let x=(()=>{class r{constructor(){}ngOnInit(){}getErrorMessage(a){let n;switch(console.log(a),a){case"validateNumDoc":case"validateCode":case"notIncludedIn":n=`${this.name} ya existe`;break;case"validateEmailExist":n="Email ya existe";break;case"email":n="Email no v\xe1lido";break;case"date":n="Formato de fecha inv\xe1lido";break;case"number":n=`${this.name} admite solamente n\xfameros`;break;case"required":n=`${this.name} es necesario`;break;case"validateRoleExist":n="El rol ya existe";break;case"validatePassword":n="Contrase\xf1as no coinciden";break;default:n="No v\xe1lido"}return n}}return r.\u0275fac=function(a){return new(a||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["mvd-errors-messages"]],inputs:{campo:"campo",name:"name"},decls:10,vars:10,consts:[[4,"ngIf"]],template:function(a,n){1&a&&(t.YNc(0,_,2,1,"mat-error",0),t.YNc(1,e,2,1,"mat-error",0),t.YNc(2,C,2,1,"mat-error",0),t.YNc(3,T,2,1,"mat-error",0),t.YNc(4,p,2,1,"mat-error",0),t.YNc(5,f,2,1,"mat-error",0),t.YNc(6,P,2,1,"mat-error",0),t.YNc(7,v,2,1,"mat-error",0),t.YNc(8,Z,2,1,"mat-error",0),t.YNc(9,E,2,1,"mat-error",0)),2&a&&(t.Q6J("ngIf",null==n.campo?null:n.campo.notIncludedIn),t.xp6(1),t.Q6J("ngIf",null==n.campo?null:n.campo.validateNumDoc),t.xp6(1),t.Q6J("ngIf",null==n.campo?null:n.campo.validateCode),t.xp6(1),t.Q6J("ngIf",null==n.campo?null:n.campo.email),t.xp6(1),t.Q6J("ngIf",null==n.campo?null:n.campo.validateEmailExist),t.xp6(1),t.Q6J("ngIf",null==n.campo?null:n.campo.required),t.xp6(1),t.Q6J("ngIf",null==n.campo?null:n.campo.number),t.xp6(1),t.Q6J("ngIf",null==n.campo?null:n.campo.date),t.xp6(1),t.Q6J("ngIf",null==n.campo?null:n.campo.validateRoleExist),t.xp6(1),t.Q6J("ngIf",null==n.campo?null:n.campo.validatePassword))},directives:[h.O5,d.TO],styles:[""],changeDetection:0}),r})()}}]);