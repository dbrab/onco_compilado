"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[135],{9135:(P,h,a)=>{a.r(h),a.d(h,{TnmModule:()=>M});var g=a(9808),T=a(325),S=a(3075),v=a(6087),c=a(4850),l=a(2986),b=a(303),e=a(5e3),f=a(520),p=a(591),d=a(2340),C=a(7261),A=a(189);let $=(()=>{class s{constructor(t,n,i){this.http=t,this.snackBar=n,this.ubicationService=i,this.dataOptionsForms$=new p.X(null),this.tnmEditSubject$=new p.X(null),this.urlUtils="src/app/shared/utils/data/",this.resultSubject$=new p.X(null)}get optionsForms$(){return this.dataOptionsForms$}get resultItems$(){return this.resultSubject$}setItems(t){this.resultSubject$.next(t)}get tnmOnEdit(){return this.tnmEditSubject$}setTnmOnEdit(t){this.tnmEditSubject$.next(t)}storeTnm(t){return this.http.post(`${d.N.API}tnms`,t).pipe((0,c.U)(n=>(this.getTnms(1,10,"","desc").pipe((0,l.q)(1)).subscribe(),this.openSnackBar("Se cre\xf3 correctamente","success-snack-bar"),n.data)))}updateTnm(t){const n=t.id;return t._method="put",this.http.post(`${d.N.API}tnms/${n}`,t).pipe((0,c.U)(i=>(this.getTnms(1,10,"","desc").pipe((0,l.q)(1)).subscribe(),this.openSnackBar("Actualizado correctamente","success-snack-bar"),i.data)))}deleteTnm(t){return this.http.delete(`${d.N.API}tnms/${t}`).pipe((0,c.U)(n=>(this.getTnms(1,10,"","desc").pipe((0,l.q)(1)).subscribe(),this.openSnackBar("Eliminado correctamente","success-snack-bar"),n.data)))}getTnm(t){return this.http.get(`${d.N.API}tnms/${t}`).pipe((0,c.U)(n=>n.data))}getTnms(t=1,n=20,i="",o="desc"){return this.http.get(`${d.N.API}tnms`,{params:(new f.LE).set("page",t.toString()).set("filter",i).set("sort",o).set("per_page",n.toString())}).pipe((0,c.U)(m=>(this.setTnmOnEdit(null),this.setItems(m),m)))}openSnackBar(t,n,i=""){this.snackBar.open(t,i,{duration:2e3,horizontalPosition:"center",verticalPosition:"top",panelClass:n})}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(f.eN),e.LFG(C.ux),e.LFG(A._))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var y=a(8966),u=a(9224),Z=a(7423),I=a(5245),N=a(953),F=a(3160);const B=function(){return[20,50,100]},U=[{path:"",component:(()=>{class s{constructor(t,n){this.tnmService=t,this.dialog=n,this.columns=[{title:"Nombre",col:"name"}],this.pageDefault=1,this.perPage=10,this.orden="desc",this.filter="",this.result=this.tnmService.resultItems$}ngOnInit(){this.getTnms(this.pageDefault,this.perPage,this.filter,this.orden)}paginatorChange(t){this.getTnms(t.pageIndex+1,t.pageSize)}getTnms(t,n,i,o){this.subscroption=this.tnmService.getTnms(t,n,i,o).subscribe(m=>this.loadData())}loadData(){this.dataSource=this.result.pipe((0,c.U)(t=>t.data.data.map(i=>({id:i.id,name:i.name})))),this.totalResut=this.result.pipe((0,c.U)(t=>t.data.total))}search(t){this.getTnms(this.pageDefault,this.perPage,t,this.orden)}deleteItem(t){return this.tnmService.deleteTnm(t)}itemAction(t){"delete"===t.action&&this.deleteItem(t.element.id).pipe((0,l.q)(1)).subscribe(),"edit"===t.action&&this.openDialog("Edita Tnm",t.element)}openDialog(t="Agrega Tnm",n){const i={title:t,data:this.setFields(n)};return this.dialog.open(b.Q,{width:"550px",data:i}).afterClosed().subscribe(m=>{m&&(m.id?this.updateTnm(m):this.storeTnm(m))})}updateTnm(t){this.tnmService.updateTnm(t).pipe((0,l.q)(1)).subscribe()}storeTnm(t){this.tnmService.storeTnm(t).pipe((0,l.q)(1)).subscribe(n=>{})}setFields(t){return[{nameControl:"id",type:"hidden",value:null==t?void 0:t.id,label:"Id"},{nameControl:"name",type:"text",value:null==t?void 0:t.name,label:"Nombre",class:"mvd-col1--1",validators:[S.kI.required]}]}ngOnDestroy(){this.subscroption.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36($),e.Y36(y.uw))},s.\u0275cmp=e.Xpm({type:s,selectors:[["mvd-tnm"]],viewQuery:function(t,n){if(1&t&&e.Gf(v.NW,7),2&t){let i;e.iGM(i=e.CRH())&&(n.paginator=i.first)}},decls:19,vars:11,consts:[[1,"card","mat-elevation-z16","animate__animated","animate__slideInRight"],[1,"actions"],["mat-flat-button","","color","primary",3,"click"],[1,"material-icons-round"],[3,"noteFilterBy","changeSearch"],[3,"columns","dataSource","actionChange"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],[1,"border"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),e._uU(3,"TNM"),e.qZA(),e.TgZ(4,"mat-card-subtitle"),e._uU(5,"Administrar TNM"),e.qZA(),e.TgZ(6,"div",1)(7,"button",2),e.NdJ("click",function(){return n.openDialog()}),e.TgZ(8,"mat-icon",3),e._uU(9,"add"),e.qZA(),e.TgZ(10,"span"),e._uU(11,"Crear"),e.qZA()()(),e.TgZ(12,"mvd-input-search",4),e.NdJ("changeSearch",function(o){return n.search(o)}),e.qZA()(),e.TgZ(13,"mat-card-content")(14,"mvd-data-table",5),e.NdJ("actionChange",function(o){return n.itemAction(o)}),e.ALo(15,"async"),e.qZA(),e.TgZ(16,"mat-paginator",6),e.NdJ("page",function(o){return n.paginatorChange(o)}),e.ALo(17,"async"),e.qZA()(),e._UZ(18,"span",7),e.qZA()),2&t&&(e.xp6(12),e.Q6J("noteFilterBy","Filtra por Nombre"),e.xp6(2),e.Q6J("columns",n.columns)("dataSource",e.lcZ(15,6,n.dataSource)),e.xp6(2),e.Q6J("length",e.lcZ(17,8,n.totalResut))("pageSize",n.perPage)("pageSizeOptions",e.DdM(10,B)))},directives:[u.a8,u.dk,u.n5,u.$j,Z.lW,I.Hw,N.V,u.dn,F.Q,v.NW],pipes:[g.Ov],styles:[""]}),s})()}];let z=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[T.Bz.forChild(U)],T.Bz]}),s})();var D=a(8203);let M=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[g.ez,z,D.m]]}),s})()}}]);